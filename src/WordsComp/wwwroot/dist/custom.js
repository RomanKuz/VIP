function getWordContainerPostion(){var e=$("#word-element");return{x:e.offset().left,y:e.offset().top}}var Common;!function(e){function o(){return new t}var t=function(){function e(){this.appName="gameApp",this.hubConnectToGroupMethodName="connect",this.connectedToGroup="userAdded",this.leftGroup="userLeft",this.groupFulled="groupFulled",this.competitionHub="competitionHub",this.gameStarted="gameStarted",this.didMove="didMove",this.gameFinished="gameFinished",this.doMove="doMove",this.passMove="passMove"}return e}();e.Constants=t,e.GetConstants=o}(Common||(Common={}));var Mixins;!function(e){function o(e,o){return function(t,n){if(!e.$$phase){var r;return e.$apply(function(){r=o(t,n)}),r}return o(t,n)}}var t=function(){function e(e){this.immediateScheduler=Rx.Scheduler.immediate,this.$scope=e}return e.prototype.now=function(){return this.immediateScheduler.now()},e.prototype.schedule=function(e,t){return this.immediateScheduler.schedule(e,o(this.$scope,t))},e.prototype.scheduleFuture=function(e,o,t){throw new Error("Not supported")},e.prototype.scheduleRecursive=function(e,o){throw new Error("Not supported")},e.prototype.scheduleRecursiveFuture=function(e,o,t){throw new Error("Not supported")},e.prototype.schedulePeriodic=function(e,o,t){throw new Error("Not supported")},e.prototype.catch=function(e){return this.immediateScheduler.catch(e)},e}();e.NgScheduler=t}(Mixins||(Mixins={}));var App;!function(e){function o(){return n}var t=Common.GetConstants(),n=angular.module(t.appName,["ui.bootstrap.modal","cgBusy","ngAnimate"]);e.GetApp=o}(App||(App={}));var Models;!function(e){var o=function(){function e(){}return e}();e.User=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.Group=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.Score=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){this.variant=null,this.isTrue=!1,this.isSelected=!1}return e}();e.TranslateVariant=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.Word=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.Game=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.GameResult=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.MoveResult=o}(Models||(Models={}));var Models;!function(e){var o=function(){function e(){}return e}();e.PassedWordInfo=o}(Models||(Models={}));var Models;!function(e){!function(e){e[e.Beginer=1]="Beginer",e[e.Intermediate=2]="Intermediate",e[e.Advanced=3]="Advanced"}(e.Level||(e.Level={}));e.Level}(Models||(Models={}));var Services;!function(e){var o=function(){function e(e){this.constants=Common.GetConstants(),this.connection=e.getConnection(),this.hub=this.connection.createHubProxy(this.constants.competitionHub)}return e.prototype.connectToHub=function(){return this.hub.connection.start()},e.prototype.doMove=function(e,o,t){return this.hub.invoke(this.constants.doMove,e,o,t)},e.prototype.passMove=function(e){return this.hub.invoke(this.constants.passMove,e)},e.prototype.connectToNewGroup=function(e,o){return this.hub.invoke(this.constants.hubConnectToGroupMethodName,e,o)},e.prototype.onConnectedToGroup=function(e){this.hub.on(this.constants.connectedToGroup,function(o){return e(o)})},e.prototype.onGroupFulled=function(e){this.hub.on(this.constants.groupFulled,function(o){return e(o)})},e.prototype.onUserLeft=function(e){this.hub.on(this.constants.leftGroup,function(o){return e(o[0])})},e.prototype.gameStarted=function(e){this.hub.on(this.constants.gameStarted,function(o){e(o)})},e.prototype.didMove=function(e){this.hub.on(this.constants.didMove,function(o){return e(o)})},e.prototype.gameFinished=function(e){this.hub.on(this.constants.gameFinished,function(o){return e(o[0])})},e.$inject=["Services.HubConnectionService"],e}();e.ConnectToGameService=o,angular.module(Common.GetConstants().appName).service("Services.ConnectToGameService",o)}(Services||(Services={}));var Services;!function(e){var o=function(){function e(){}return e.prototype.getConnection=function(){return e.connection||(e.connection=$.hubConnection("/signalr",{useDefaultPath:!1}),e.connection.logging=!0),e.connection},e}();e.HubConnectionService=o,angular.module(Common.GetConstants().appName).service("Services.HubConnectionService",o)}(Services||(Services={}));var Services;!function(e){function o(e){var o=new ES6Promise(function(o){e.subscribe(function(){o({})})});return o}var t=function(){function e(e,o){this.constants=Common.GetConstants(),this.$modal=o,this.$rootScope=e,this.$rootScope.isStartGamePage=!1,this.$rootScope.userId=null,this.groupFulledObservable=new Rx.Subject,this.addedToGroupObservable=new Rx.Subject,this.userLeftGroupObservable=new Rx.Subject,this.gameStartedObservable=new Rx.Subject}return e.prototype.callInDigestLoop=function(e){this.$rootScope.$$phase?e():this.$rootScope.$apply(function(){e()})},e.prototype.showStartGameModal=function(){var e={};e.scope=this.connectToGameScope,e.templateUrl="connectToGroup.html",e.windowTemplateUrl="windowTemplate.html",e.backdrop="static",e.keyboard=!1,e.animation=!0,e.size="lg",this.startGameModalInstance=this.$modal.open(e)},e.prototype.showGameFinishedModalWindow=function(e,o){if(void 0===e&&void 0===o)throw"One of boolean flags should be specified";var t=this.connectToGameScope,n={};n.controller=function(n){n.playAgain=t.connectToGroup,o?n.message="It is draw. Good job :D!\nDo you want to play again?":e?n.message="Congratulation! You have won!\nDo you want to play again?":n.message="You have lost, but who cares :). It was fun.\nDo you want to play again?"},n.templateUrl="gameFinished.html",n.windowTemplateUrl="windowTemplate.html",n.backdrop="static",n.keyboard=!1,n.animation=!0,n.size="lg",this.startGameModalInstance=this.$modal.open(n)},e.prototype.setConnectToGameScope=function(e){this.connectToGameScope=e},e.prototype.handleConnectionToGroup=function(e){var t=this;e.fail(function(e){console.log("smth bad happened: "+e)}),this.callInDigestLoop(function(){t.callInDigestLoop(function(){var e=t.addedToGroupObservable.take(1);t.$rootScope.addedToGroupPromise=o(e),e.subscribe(function(){t.startGameModalInstance&&(t.startGameModalInstance.close(),t.startGameModalInstance=null)});var n=t.groupFulledObservable.take(1);t.$rootScope.user2ConnectedPromise=o(n),n.subscribe(function(){t.$rootScope.loadingGamePromise=o(Rx.Observable.merge(t.userLeftGroupObservable.take(1),t.gameStartedObservable.take(1)).take(1))}),t.$rootScope.isStartGamePage=!0})}),this.callInDigestLoop(function(){t.connectToGameScope.connectToGroupPromise=e})},e.prototype.handleUserAddedToGroup=function(){this.addedToGroupObservable.onNext({})},e.prototype.handleConnectionToHub=function(e){var o=this;e.fail(function(){console.log("smth bad happened")}),e.done(function(){o.callInDigestLoop(function(){o.showStartGameModal()})}),this.callInDigestLoop(function(){o.$rootScope.connectToHubPromise=e})},e.prototype.handleGameFinished=function(e,o){var t=this;this.callInDigestLoop(function(){t.$rootScope.isStartGamePage=!1,t.showGameFinishedModalWindow(e,o)})},e.prototype.handleGroupFulled=function(){var e=this;this.callInDigestLoop(function(){e.groupFulledObservable.onNext({})})},e.prototype.handleGameStarted=function(){var e=this;this.callInDigestLoop(function(){e.$rootScope.isStartGamePage=!0,e.startGameModalInstance&&(e.startGameModalInstance.close(),e.startGameModalInstance=null)}),this.gameStartedObservable.onNext({})},e.prototype.getUserId=function(){return this.$rootScope.userId},e.prototype.setUserId=function(e){this.$rootScope.userId=e},e.prototype.handleUser2LeftGroup=function(){var e=this;this.callInDigestLoop(function(){e.userLeftGroupObservable.onNext({}),e.$rootScope.isStartGamePage=!1,e.showStartGameModal()})},e.prototype.getUserDisplayName=function(){return this.$rootScope.displayName},e.$inject=["$rootScope","$uibModal"],e}();e.StateHandlerService=t,angular.module(Common.GetConstants().appName).service("Services.StateHandlerService",t)}(Services||(Services={}));var controllers;!function(e){var o=function(){function e(e,o,t,n){this.connectionHubService=e,this.$scope=o,this.stateHandler=t,this.$rootScope=n,this.initializeViewModel()}return e.prototype.initializeViewModel=function(){var e=this;this.stateHandler.setConnectToGameScope(this.$scope),this.connectionHubService.onUserLeft(function(o){return e.onUserLeft.call(e,o)}),this.connectionHubService.onGroupFulled(function(o){return e.onGroupFulled.call(e,o)}),this.connectionHubService.onConnectedToGroup(function(o){return e.onConnectedToGroup.call(e,o)}),this.$scope.connectToGroup=function(){return e.connectToGroup.apply(e)};var o=this.connectionHubService.connectToHub().done(function(o){e.stateHandler.setUserId(o)});this.stateHandler.handleConnectionToHub(o),this.$scope.levels=[{level:Models.Level.Beginer,name:"Новачок"},{level:Models.Level.Intermediate,name:"Средний"},{level:Models.Level.Advanced,name:"Высокий"}],this.$rootScope.level=this.$scope.levels[1],this.$scope.changeLevel=function(o){return e.$rootScope.level=o},this.$rootScope.displayName="Случайный игрок"},e.prototype.onGroupFulled=function(e){this.groupInfo=e,this.stateHandler.handleGroupFulled()},e.prototype.onUserLeft=function(e){this.groupInfo=null,this.stateHandler.handleUser2LeftGroup()},e.prototype.connectToGroup=function(){var e=this.connectionHubService.connectToNewGroup(this.stateHandler.getUserDisplayName(),this.$rootScope.level.level);this.stateHandler.handleConnectionToGroup(e)},e.prototype.onConnectedToGroup=function(e){this.stateHandler.setUserId(e),this.stateHandler.handleUserAddedToGroup()},e.$inject=["Services.ConnectToGameService","$scope","Services.StateHandlerService","$rootScope"],e}();e.ConnectToGameController=o,angular.module(Common.GetConstants().appName).controller("controllers.ConnectToGameController",o)}(controllers||(controllers={}));var controllers;!function(e){var o=function(){function e(e,o,t,n,r){this.connectionHubService=e,this.$scope=o,this.stateHandler=t,this.$interval=n,this.secondsForMove=10,this.$timeout=r,this.initializeViewModel()}return e.prototype.initializeViewModel=function(){var e=this;this.connectionHubService.gameStarted(function(o){return e.startGame.call(e,o)}),this.connectionHubService.didMove(function(o){return e.user2didMove.call(e,o)}),this.$scope.doMove=function(o){return e.doMove.call(e,o)},this.connectionHubService.onUserLeft(function(){return e.onUserLeft.call(e)}),this.unsetGameInfo()},e.prototype.onUserLeft=function(){this.stopTimer(),this.unsetGameInfo()},e.prototype.unsetGameInfo=function(){var e=this;this.gameInfo=null,this.callInDigestLoop(function(){e.$scope.currentWord=null,e.$scope.secondsForMoveLeft=null,e.$scope.percentagesLeft=null,e.$scope.isCurrentUserMove=null,e.$scope.currentUserScore=null,e.$scope.passedWords=[],e.$scope.leftWords=[]})},e.prototype.startGame=function(e){var o=this;this.gameInfo=e,this.words=e.words;var t=e.user1.userId===this.stateHandler.getUserId();this.userNum=t?1:2,this.$scope.$apply(function(){function n(e){for(var o,t,n=e.slice(0),r=n.length;r;)t=Math.floor(Math.random()*r--),o=n[r],n[r]=n[t],n[t]=o;return n}o.$scope.currentUserScore=t?e.user1Score:e.user2Score,o.$scope.user2Score=t?e.user2Score:e.user1Score,o.$scope.user2DisplayName=t?e.user2.displayName:e.user1.displayName,o.$scope.currentWordIndex=0,o.$scope.currentWord=o.words[0],o.setVarinatsOrder(),o.$scope.isCurrentUserMove=t&&1===o.gameInfo.currentMove||!t&&2===o.gameInfo.currentMove,o.$scope.leftWords=n(o.words.slice(1))}),this.stateHandler.handleGameStarted(),this.startTimer()},e.prototype.callInDigestLoop=function(e){this.$scope.$$phase?e():this.$scope.$apply(function(){e()})},e.prototype.startTimer=function(){var e=this;if(this.timerPromise)throw"Previous timer should be stopped";this.callInDigestLoop(function(){e.$scope.secondsForMoveLeft=e.secondsForMove,e.$scope.percentagesLeft=100}),this.timerPromise=this.$interval(function(){e.$scope.secondsForMoveLeft--,e.$scope.percentagesLeft=e.$scope.secondsForMoveLeft/10*100,0===e.$scope.secondsForMoveLeft&&e.$scope.isCurrentUserMove&&e.passMove()},1e3,10)},e.prototype.stopTimer=function(){this.timerPromise&&(this.$interval.cancel(this.timerPromise),this.timerPromise=null)},e.prototype.user2didMove=function(e){var o=this;this.$scope.$apply(function(){o.handleMove(e,!1)})},e.prototype.passMove=function(){var e=this;this.connectionHubService.passMove(this.userNum).done(function(o){e.$scope.$apply(function(){e.handleMove(o,!0)})})},e.prototype.doMove=function(e){var o=this;if(this.stopTimer(),0!==this.$scope.secondsForMoveLeft){var t=this.$scope.currentWord.translateVariants.filter(function(o){return o.variant===e})[0];t?t.isSelected=!0:console.log("Incorrect var selected"),this.connectionHubService.doMove(this.userNum,this.$scope.currentWord.word,e).done(function(e){o.$scope.$apply(function(){o.handleMove(e,!0)})})}},e.prototype.handleMove=function(e,o){var t=this;this.stopTimer();var n=1===this.userNum?this.gameInfo.user1Score:this.gameInfo.user2Score,r=1===this.userNum?this.gameInfo.user2Score:this.gameInfo.user1Score,s=o?n:r;e.isCorrect?e.isSuccessful?s.successfulMoves++:s.wrongMoves++:console.error(e.errorMessage),e.selectedVariantIndex!==-1&&(this.$scope.currentWord.translateVariants[e.selectedVariantIndex].isSelected=!0),1===this.userNum?(this.$scope.currentUserScore=this.gameInfo.user1Score,this.$scope.user2Score=this.gameInfo.user2Score):(this.$scope.currentUserScore=this.gameInfo.user2Score,this.$scope.user2Score=this.gameInfo.user1Score),this.$timeout(function(){function n(e,o){for(var t=0;t<e.length;){if(o(e[t],t))return void e.splice(t,1);++t}}if(t.$scope.isCurrentUserMove=!o,t.$scope.currentWordIndex++,o){var r=new Models.PassedWordInfo;r.word=t.$scope.currentWord.word,r.answer=t.$scope.currentWord.translateVariants.filter(function(e){return e.isTrue}).shift().variant,r.wasPassed=e.isSuccessful,t.$scope.passedWords.push(r)}t.$scope.currentWord=t.gameInfo.words[t.$scope.currentWordIndex],t.setVarinatsOrder(),n(t.$scope.leftWords,function(e){return e.word===t.$scope.currentWord.word}),e.isLastMove?(t.stateHandler.handleGameFinished(t.$scope.currentUserScore.successfulMoves>t.$scope.user2Score.successfulMoves,t.$scope.currentUserScore.successfulMoves==t.$scope.user2Score.successfulMoves),t.unsetGameInfo()):t.startTimer()},1e3,!0)},e.prototype.setVarinatsOrder=function(){this.$scope.currentWord&&this.$scope.currentWord.translateVariants.forEach(function(e,o){return e.order=o+1})},e.$inject=["Services.ConnectToGameService","$scope","Services.StateHandlerService","$interval","$timeout"],e}();e.GameController=o,angular.module(Common.GetConstants().appName).controller("controllers.GameController",o)}(controllers||(controllers={})),$(function(){$("#word, .word-left-item-caption").attr("unselectable","on").css({"-moz-user-select":"-moz-none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}).bind("selectstart",function(){return!1})}),$(function(){$(document).keypress(function(e){if(13===e.which)$(".btn-submit:visible").first().click();else if(e.which>=48&&e.which<=57){var o=e.which-48;$(".translateVariant:visible").filter(function(e,t){return $(t).data("order")===o}).first().click()}})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy90c2NyaXB0cy9hbmltYXRpb25zL3dvcmRzTGVmdEFuaW1hdGlvbi50cyIsInNyYy90c2NyaXB0cy9jb21tb24udHMiLCJzcmMvdHNjcmlwdHMvbWl4aW5zL25nU2NoZWR1bGVyLnRzIiwic3JjL3RzY3JpcHRzL2FwcC50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvVXNlci50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvZ3JvdXAudHMiLCJzcmMvdHNjcmlwdHMvbW9kZWxzL3Njb3JlLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy90cmFuc2xhdGVWYXJpYW50LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy93b3JkLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9nYW1lLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9nYW1lUmVzdWx0LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9tb3ZlUmVzdWx0LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9wYXNzZWRXb3JkSW5mby50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvbGV2ZWwudHMiLCJzcmMvdHNjcmlwdHMvc2VydmljZXMvY29ubmVjdFRvR2FtZVNlcnZpY2UudHMiLCJzcmMvdHNjcmlwdHMvc2VydmljZXMvaHViQ29ubmVjdGlvblNlcnZpY2UudHMiLCJzcmMvdHNjcmlwdHMvc2VydmljZXMvc3RhdGVIYW5kbGVyU2VydmljZS50cyIsInNyYy90c2NyaXB0cy9jb250cm9sbGVycy9jb25uZWN0aW9uQ29udHJvbGxlci50cyIsInNyYy90c2NyaXB0cy9jb250cm9sbGVycy9nYW1lQ29udHJvbGxlci50cyIsInNyYy90c2NyaXB0cy9kb20vZGlzYWJsZVNlbGVjdGlvbi50cyIsInNyYy90c2NyaXB0cy9kb20va2V5Ym9hcmRCaW5kaW5ncy50cyJdLCJuYW1lcyI6WyJnZXRXb3JkQ29udGFpbmVyUG9zdGlvbiIsIiRlbGVtZW50IiwiJCIsIngiLCJvZmZzZXQiLCJsZWZ0IiwieSIsInRvcCIsIkNvbW1vbiIsIkdldENvbnN0YW50cyIsIkNvbnN0YW50cyIsInRoaXMiLCJhcHBOYW1lIiwiaHViQ29ubmVjdFRvR3JvdXBNZXRob2ROYW1lIiwiY29ubmVjdGVkVG9Hcm91cCIsImxlZnRHcm91cCIsImdyb3VwRnVsbGVkIiwiY29tcGV0aXRpb25IdWIiLCJnYW1lU3RhcnRlZCIsImRpZE1vdmUiLCJnYW1lRmluaXNoZWQiLCJkb01vdmUiLCJwYXNzTW92ZSIsIk1peGlucyIsImFjdGlvbldyYXBwZXIiLCIkc2NvcGUiLCJhY3Rpb24iLCJzY2hlZHVsZXIiLCJzdGF0ZSIsIiQkcGhhc2UiLCJ2YWx1ZV8xIiwiJGFwcGx5IiwiTmdTY2hlZHVsZXIiLCJpbW1lZGlhdGVTY2hlZHVsZXIiLCJSeCIsIlNjaGVkdWxlciIsImltbWVkaWF0ZSIsInByb3RvdHlwZSIsIm5vdyIsInNjaGVkdWxlIiwic2NoZWR1bGVGdXR1cmUiLCJkdWVUaW1lIiwiRXJyb3IiLCJzY2hlZHVsZVJlY3Vyc2l2ZSIsInNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlIiwic2NoZWR1bGVQZXJpb2RpYyIsInBlcmlvZCIsImNhdGNoIiwiaGFuZGxlciIsIkFwcCIsIkdldEFwcCIsImFwcCIsImNvbnN0YW50cyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJNb2RlbHMiLCJVc2VyIiwiR3JvdXAiLCJTY29yZSIsIlRyYW5zbGF0ZVZhcmlhbnQiLCJ2YXJpYW50IiwiaXNUcnVlIiwiaXNTZWxlY3RlZCIsIldvcmQiLCJHYW1lIiwiR2FtZVJlc3VsdCIsIk1vdmVSZXN1bHQiLCJQYXNzZWRXb3JkSW5mbyIsIkxldmVsIiwiU2VydmljZXMiLCJDb25uZWN0VG9HYW1lU2VydmljZSIsImh1YkNvbm5lY3Rpb25TZXJ2aWNlIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJodWIiLCJjcmVhdGVIdWJQcm94eSIsImNvbm5lY3RUb0h1YiIsInN0YXJ0IiwibW92ZU9yZGVyIiwid29yZCIsImludm9rZSIsImNvbm5lY3RUb05ld0dyb3VwIiwiZGlzcGxheU5hbWUiLCJsZXZlbCIsIm9uQ29ubmVjdGVkVG9Hcm91cCIsImNhbGxCYWNrIiwib24iLCJtc2ciLCJvbkdyb3VwRnVsbGVkIiwib25Vc2VyTGVmdCIsIiRpbmplY3QiLCJzZXJ2aWNlIiwiSHViQ29ubmVjdGlvblNlcnZpY2UiLCJodWJDb25uZWN0aW9uIiwidXNlRGVmYXVsdFBhdGgiLCJsb2dnaW5nIiwidG9Qcm9taXNlQ3VzdG9tIiwib2JzZXJ2YWJsZSIsInByb21pc2UiLCJFUzZQcm9taXNlIiwicmVzb2x2ZSIsInN1YnNjcmliZSIsIlN0YXRlSGFuZGxlclNlcnZpY2UiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwiaXNTdGFydEdhbWVQYWdlIiwidXNlcklkIiwiZ3JvdXBGdWxsZWRPYnNlcnZhYmxlIiwiU3ViamVjdCIsImFkZGVkVG9Hcm91cE9ic2VydmFibGUiLCJ1c2VyTGVmdEdyb3VwT2JzZXJ2YWJsZSIsImdhbWVTdGFydGVkT2JzZXJ2YWJsZSIsImNhbGxJbkRpZ2VzdExvb3AiLCJzaG93U3RhcnRHYW1lTW9kYWwiLCJvcHQiLCJzY29wZSIsImNvbm5lY3RUb0dhbWVTY29wZSIsInRlbXBsYXRlVXJsIiwid2luZG93VGVtcGxhdGVVcmwiLCJiYWNrZHJvcCIsImtleWJvYXJkIiwiYW5pbWF0aW9uIiwic2l6ZSIsInN0YXJ0R2FtZU1vZGFsSW5zdGFuY2UiLCJvcGVuIiwic2hvd0dhbWVGaW5pc2hlZE1vZGFsV2luZG93IiwiaXNXaW4iLCJpc0RyYXciLCJ1bmRlZmluZWQiLCJjb250cm9sbGVyIiwicGxheUFnYWluIiwiY29ubmVjdFRvR3JvdXAiLCJtZXNzYWdlIiwic2V0Q29ubmVjdFRvR2FtZVNjb3BlIiwiaGFuZGxlQ29ubmVjdGlvblRvR3JvdXAiLCJfdGhpcyIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJhZGRlZFRvR3JvdXAiLCJ0YWtlIiwiYWRkZWRUb0dyb3VwUHJvbWlzZSIsImNsb3NlIiwidXNlcjJDb25uZWN0ZWRQcm9taXNlIiwibG9hZGluZ0dhbWVQcm9taXNlIiwiT2JzZXJ2YWJsZSIsIm1lcmdlIiwiY29ubmVjdFRvR3JvdXBQcm9taXNlIiwiaGFuZGxlVXNlckFkZGVkVG9Hcm91cCIsIm9uTmV4dCIsImhhbmRsZUNvbm5lY3Rpb25Ub0h1YiIsImRvbmUiLCJjb25uZWN0VG9IdWJQcm9taXNlIiwiaGFuZGxlR2FtZUZpbmlzaGVkIiwiaGFuZGxlR3JvdXBGdWxsZWQiLCJoYW5kbGVHYW1lU3RhcnRlZCIsImdldFVzZXJJZCIsInNldFVzZXJJZCIsImhhbmRsZVVzZXIyTGVmdEdyb3VwIiwiZ2V0VXNlckRpc3BsYXlOYW1lIiwiY29udHJvbGxlcnMiLCJDb25uZWN0VG9HYW1lQ29udHJvbGxlciIsImNvbm5lY3Rpb25IdWJTZXJ2aWNlIiwic3RhdGVIYW5kbGVyIiwiaW5pdGlhbGl6ZVZpZXdNb2RlbCIsImRhdGEiLCJjYWxsIiwiYXBwbHkiLCJ2YWx1ZSIsImxldmVscyIsIkJlZ2luZXIiLCJuYW1lIiwiSW50ZXJtZWRpYXRlIiwiQWR2YW5jZWQiLCJjaGFuZ2VMZXZlbCIsImdyb3VwSW5mbyIsIkdhbWVDb250cm9sbGVyIiwiJGludGVydmFsIiwiJHRpbWVvdXQiLCJzZWNvbmRzRm9yTW92ZSIsInN0YXJ0R2FtZSIsInVzZXIyZGlkTW92ZSIsInVuc2V0R2FtZUluZm8iLCJzdG9wVGltZXIiLCJnYW1lSW5mbyIsImN1cnJlbnRXb3JkIiwic2Vjb25kc0Zvck1vdmVMZWZ0IiwicGVyY2VudGFnZXNMZWZ0IiwiaXNDdXJyZW50VXNlck1vdmUiLCJjdXJyZW50VXNlclNjb3JlIiwicGFzc2VkV29yZHMiLCJsZWZ0V29yZHMiLCJnYW1lIiwid29yZHMiLCJpc1VzZXIxIiwidXNlcjEiLCJ1c2VyTnVtIiwic2h1ZmZsZSIsImFyciIsInQiLCJpIiwiYXJyYXkiLCJzbGljZSIsIm0iLCJsZW5ndGgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ1c2VyMVNjb3JlIiwidXNlcjJTY29yZSIsInVzZXIyRGlzcGxheU5hbWUiLCJ1c2VyMiIsImN1cnJlbnRXb3JkSW5kZXgiLCJzZXRWYXJpbmF0c09yZGVyIiwiY3VycmVudE1vdmUiLCJzdGFydFRpbWVyIiwidGltZXJQcm9taXNlIiwiY2FuY2VsIiwibW92ZVJlcyIsImhhbmRsZU1vdmUiLCJtb3ZlUmVzdWx0Iiwic2VsZWN0ZWRWYXIiLCJ0cmFuc2xhdGVWYXJpYW50cyIsImZpbHRlciIsInYiLCJzY29yZSIsImlzQ29ycmVjdCIsImlzU3VjY2Vzc2Z1bCIsInN1Y2Nlc3NmdWxNb3ZlcyIsIndyb25nTW92ZXMiLCJlcnJvck1lc3NhZ2UiLCJzZWxlY3RlZFZhcmlhbnRJbmRleCIsInJlbW92ZUZyb21BcnJheUlmIiwiY2FsbGJhY2siLCJzcGxpY2UiLCJwYXNzZWRXb3JkIiwiYW5zd2VyIiwic2hpZnQiLCJ3YXNQYXNzZWQiLCJwdXNoIiwidyIsImlzTGFzdE1vdmUiLCJmb3JFYWNoIiwiaW5kZXgiLCJvcmRlciIsImF0dHIiLCJjc3MiLCItbW96LXVzZXItc2VsZWN0IiwiLW8tdXNlci1zZWxlY3QiLCIta2h0bWwtdXNlci1zZWxlY3QiLCItd2Via2l0LXVzZXItc2VsZWN0IiwiLW1zLXVzZXItc2VsZWN0IiwidXNlci1zZWxlY3QiLCJiaW5kIiwiZG9jdW1lbnQiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsImZpcnN0IiwiY2xpY2siLCJudW1QcmVzc2VkXzEiLCJlbGVtIl0sIm1hcHBpbmdzIjoiQUE2QkEsUUFBQUEsMkJBQ0ksR0FBSUMsR0FBV0MsRUFBRSxnQkFFakIsUUFDSUMsRUFBR0YsRUFBU0csU0FBU0MsS0FDckJDLEVBQUdMLEVBQVNHLFNBQVNHLEtDMUI3QixHQUFPQyxTQUFQLFNBQU9BLEdBNkJILFFBQUFDLEtBQ0ksTUFBTyxJQUFJQyxHQTdCZixHQUFBQSxHQUFBLFdBYUksUUFBQUEsS0FDSUMsS0FBS0MsUUFBVSxVQUNmRCxLQUFLRSw0QkFBOEIsVUFDbkNGLEtBQUtHLGlCQUFtQixZQUN4QkgsS0FBS0ksVUFBWSxXQUNqQkosS0FBS0ssWUFBYyxjQUNuQkwsS0FBS00sZUFBaUIsaUJBQ3RCTixL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UDNCNUgsUUFBUUMsT0FBTzlDLE9BQU9DLGVBQWVHLFNBQVNxSCxXQUFXLDZCQUE4QmdELElBMVBwRmhCLGNBQUFBLGlCQ0RQL0osRUFBRSxXQUVFQSxFQUFFLGtDQUFrQ29QLEtBQUssZUFBZSxNQUN0REMsS0FBS0MsbUJBQW1CLFlBQ25CQyxpQkFBaUIsT0FDakJDLHFCQUFxQixPQUNyQkMsc0JBQXNCLE9BQ3RCQyxrQkFBa0IsT0FDbEJDLGNBQWMsU0FDakJDLEtBQUssY0FBZSxXQUFZLE9BQU8sTUNUL0M1UCxFQUFFLFdBQ0VBLEVBQUU2UCxVQUFVQyxTQUFTLFNBQUFDLEdBQ2pCLEdBQWdCLEtBQVpBLEVBQUVDLE1BQ0ZoUSxFQUFFLHVCQUF1QmlRLFFBQVFDLFlBQzlCLElBQUlILEVBQUVDLE9BQVMsSUFBTUQsRUFBRUMsT0FBUyxHQUFJLENBQ3ZDLEdBQUlHLEdBQWFKLEVBQUVDLE1BQVEsRUFDM0JoUSxHQUFFLDZCQUE2QjhOLE9BQU8sU0FBQ29CLEVBQU9rQixHQUFTLE1BQUFwUSxHQUFFb1EsR0FBTWhHLEtBQUssV0FBYStGLElBQzVFRixRQUNBQyIsImZpbGUiOiJjdXN0b20uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2FwcC50c1wiIC8+XHJcbmludGVyZmFjZSBQb2ludCB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbn07XHJcblxyXG4vLyBBcHAuR2V0QXBwKCkuYW5pbWF0aW9uKCcud29yZHMtbGVmdC1pdGVtJywgZnVuY3Rpb24oKTphbmd1bGFyLmFuaW1hdGUuSUFuaW1hdGVDYWxsYmFja09iamVjdCB7XHJcbi8vICAgICByZXR1cm4ge1xyXG4vLyAgICAgICAgIGxlYXZlOiBmdW5jdGlvbihlbGVtZW50OiBKUXVlcnksIGRvbmU6IEZ1bmN0aW9uKSB7XHJcbi8vICAgICAgICAgICAgIGxldCAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcbi8vICAgICAgICAgICAgIHZhciB0YXJnZXRQb3MgPSBnZXRXb3JkQ29udGFpbmVyUG9zdGlvbigpO1xyXG4vLyAgICAgICAgICAgICAvLyAkZWxlbWVudC5hbmltYXRlKHtcclxuLy8gICAgICAgICAgICAgLy8gICAgIG9wYXNpdHk6IDAsXHJcbi8vICAgICAgICAgICAgIC8vICAgICB0b3A6IHRhcmdldFBvcy55LFxyXG4vLyAgICAgICAgICAgICAvLyAgICAgbGVmdDogdGFyZ2V0UG9zLnhcclxuLy8gICAgICAgICAgICAgLy8gfSwgZG9uZSk7XHJcbi8vICAgICAgICAgICAgIGRvbmUoKTtcclxuXHJcbi8vICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihpc0NhbmNlbGxlZDogYm9vbGVhbikge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKGlzQ2FuY2VsbGVkKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuc3RvcCgpO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfTtcclxuLy8gfSlcclxuXHJcblxyXG5mdW5jdGlvbiBnZXRXb3JkQ29udGFpbmVyUG9zdGlvbigpOiBQb2ludCB7XHJcbiAgICBsZXQgJGVsZW1lbnQgPSAkKCcjd29yZC1lbGVtZW50Jyk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiAkZWxlbWVudC5vZmZzZXQoKS5sZWZ0LFxyXG4gICAgICAgIHk6ICRlbGVtZW50Lm9mZnNldCgpLnRvcFxyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZ2xvYmFscy9hbmd1bGFyL2luZGV4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZ2xvYmFscy9zaWduYWxyL2luZGV4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9nbG9iYWxzL2VzNi1zaGltL2luZGV4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9nbG9iYWxzL2FuZ3VsYXItdWktYm9vdHN0cmFwL2luZGV4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9nbG9iYWxzL3J4L3J4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9nbG9iYWxzL3J4LmFuZ3VsYXIvaW5kZXguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2dsb2JhbHMvYW5ndWxhci1hbmltYXRlL2luZGV4LmQudHNcIiAvPlxyXG5tb2R1bGUgQ29tbW9uIHtcclxuICAgIGV4cG9ydCBjbGFzcyBDb25zdGFudHMge1xyXG4gICAgICAgIHB1YmxpYyBhcHBOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGh1YkNvbm5lY3RUb0dyb3VwTWV0aG9kTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBjb25uZWN0ZWRUb0dyb3VwOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGxlZnRHcm91cDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBncm91cEZ1bGxlZDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBjb21wZXRpdGlvbkh1Yjogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBnYW1lU3RhcnRlZDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBkaWRNb3ZlOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGdhbWVGaW5pc2hlZDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBkb01vdmU6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFzc01vdmU6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwTmFtZSA9IFwiZ2FtZUFwcFwiXHJcbiAgICAgICAgICAgIHRoaXMuaHViQ29ubmVjdFRvR3JvdXBNZXRob2ROYW1lID0gXCJjb25uZWN0XCI7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkVG9Hcm91cCA9IFwidXNlckFkZGVkXCI7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdEdyb3VwID0gXCJ1c2VyTGVmdFwiO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRnVsbGVkID0gXCJncm91cEZ1bGxlZFwiO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBldGl0aW9uSHViID0gXCJjb21wZXRpdGlvbkh1YlwiO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFydGVkID0gXCJnYW1lU3RhcnRlZFwiO1xyXG4gICAgICAgICAgICB0aGlzLmRpZE1vdmUgPSBcImRpZE1vdmVcIjtcclxuICAgICAgICAgICAgdGhpcy5nYW1lRmluaXNoZWQgPSBcImdhbWVGaW5pc2hlZFwiO1xyXG4gICAgICAgICAgICB0aGlzLmRvTW92ZSA9IFwiZG9Nb3ZlXCI7XHJcbiAgICAgICAgICAgIHRoaXMucGFzc01vdmUgPSBcInBhc3NNb3ZlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gIEdldENvbnN0YW50cygpOiBDb25zdGFudHMge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RhbnRzKCk7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxubW9kdWxlIE1peGlucyB7XHJcbiAgICBmdW5jdGlvbiBhY3Rpb25XcmFwcGVyPFRTdGF0ZT4oJHNjb3BlOiBuZy5JU2NvcGUsIGFjdGlvbjogKHNjaGVkdWxlcjogUnguSVNjaGVkdWxlciwgc3RhdGU6IFRTdGF0ZSkgPT4gUnguSURpc3Bvc2FibGUpOiBcclxuICAgIChzY2hlZHVsZXI6IFJ4LklTY2hlZHVsZXIsIHN0YXRlOiBUU3RhdGUpID0+IFJ4LklEaXNwb3NhYmxlICB7XHJcbiAgICAgICAgcmV0dXJuIChzY2hlZHVsZXI6IFJ4LklTY2hlZHVsZXIsIHN0YXRlOiBUU3RhdGUpOiBSeC5JRGlzcG9zYWJsZSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghJHNjb3BlLiQkcGhhc2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZTogUnguSURpc3Bvc2FibGU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFjdGlvbihzY2hlZHVsZXIsIHN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBOZ1NjaGVkdWxlciBpbXBsZW1lbnRzIFJ4LklTY2hlZHVsZXIge1xyXG4gICAgICAgIHByaXZhdGUgaW1tZWRpYXRlU2NoZWR1bGVyOiBSeC5JU2NoZWR1bGVyO1xyXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBuZy5JU2NvcGU7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRzY29wZTogbmcuSVNjb3BlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1tZWRpYXRlU2NoZWR1bGVyID0gUnguU2NoZWR1bGVyLmltbWVkaWF0ZTtcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub3coKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlU2NoZWR1bGVyLm5vdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAgICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxyXG4gICAgICAgICAgKi9cclxuICAgICAgICBzY2hlZHVsZTxUU3RhdGU+KHN0YXRlOiBUU3RhdGUsIGFjdGlvbjogKHNjaGVkdWxlcjogUnguSVNjaGVkdWxlciwgc3RhdGU6IFRTdGF0ZSkgPT4gUnguSURpc3Bvc2FibGUpOiBSeC5JRGlzcG9zYWJsZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uV3JhcHBlcih0aGlzLiRzY29wZSwgYWN0aW9uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGR1ZVRpbWUuXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXHJcbiAgICAgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNjaGVkdWxlRnV0dXJlPFRTdGF0ZT4oc3RhdGU6IFRTdGF0ZSwgZHVlVGltZTogbnVtYmVyIHwgRGF0ZSwgYWN0aW9uOiAoc2NoZWR1bGVyOiBSeC5JU2NoZWR1bGVyLCBzdGF0ZTogVFN0YXRlKSA9PiBSeC5JRGlzcG9zYWJsZSk6IFJ4LklEaXNwb3NhYmxlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBleGVjdXRlIHJlY3Vyc2l2ZWx5LiBUaGUgbGFzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBhY3Rpb24gaXMgdXNlZCB0byB0cmlnZ2VyIHJlY3Vyc2l2ZSBzY2hlZHVsaW5nIG9mIHRoZSBhY3Rpb24sIHBhc3NpbmcgaW4gcmVjdXJzaXZlIGludm9jYXRpb24gc3RhdGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNjaGVkdWxlUmVjdXJzaXZlPFRTdGF0ZT4oc3RhdGU6IFRTdGF0ZSwgYWN0aW9uOiAoc3RhdGU6IFRTdGF0ZSwgYWN0aW9uOiAoc3RhdGU6IFRTdGF0ZSkgPT4gdm9pZCkgPT4gdm9pZCk6IFJ4LklEaXNwb3NhYmxlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkgYWZ0ZXIgYSBzcGVjaWZpZWQgcmVsYXRpdmUgZHVlIHRpbWUuXHJcbiAgICAgICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBleGVjdXRlIHJlY3Vyc2l2ZWx5LiBUaGUgbGFzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBhY3Rpb24gaXMgdXNlZCB0byB0cmlnZ2VyIHJlY3Vyc2l2ZSBzY2hlZHVsaW5nIG9mIHRoZSBhY3Rpb24sIHBhc3NpbmcgaW4gdGhlIHJlY3Vyc2l2ZSBkdWUgdGltZSBhbmQgaW52b2NhdGlvbiBzdGF0ZS5cclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn1kdWVUaW1lIFJlbGF0aXZlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uIGZvciB0aGUgZmlyc3QgdGltZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmU8VFN0YXRlLCBUVGltZSBleHRlbmRzIG51bWJlciB8IERhdGU+KHN0YXRlOiBUU3RhdGUsIGR1ZVRpbWU6IFRUaW1lLCBhY3Rpb246IChzdGF0ZTogVFN0YXRlLCBhY3Rpb246IChzdGF0ZTogVFN0YXRlLCBkdWVUaW1lOiBUVGltZSkgPT4gdm9pZCkgPT4gdm9pZCk6IFJ4LklEaXNwb3NhYmxlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBzY2hlZHVsZWQgdXNpbmcgd2luZG93LnNldEludGVydmFsIGZvciB0aGUgYmFzZSBpbXBsZW1lbnRhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBJbml0aWFsIHN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHVwb24gdGhlIGZpcnN0IGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcnVubmluZyB0aGUgd29yayBwZXJpb2RpY2FsbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCByZWN1cnJpbmcgYWN0aW9uIChiZXN0IGVmZm9ydCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2NoZWR1bGVQZXJpb2RpYzxUU3RhdGU+KHN0YXRlOiBUU3RhdGUsIHBlcmlvZDogbnVtYmVyLCBhY3Rpb246IChzdGF0ZTogVFN0YXRlKSA9PiBUU3RhdGUpOiBSeC5JRGlzcG9zYWJsZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYXRjaChoYW5kbGVyOiBGdW5jdGlvbik6IFJ4LklTY2hlZHVsZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGVTY2hlZHVsZXIuY2F0Y2goaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cImNvbW1vbi50c1wiIC8+XHJcbm1vZHVsZSBBcHAge1xyXG4gICAgdmFyIGNvbnN0YW50cyA9IENvbW1vbi5HZXRDb25zdGFudHMoKTtcclxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShjb25zdGFudHMuYXBwTmFtZSwgWyd1aS5ib290c3RyYXAubW9kYWwnLCdjZ0J1c3knLCAnbmdBbmltYXRlJ10pO1xyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBHZXRBcHAoKTogbmcuSU1vZHVsZSB7XHJcbiAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgIH1cclxufSIsIm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIFVzZXIge1xyXG4gICAgICAgIHB1YmxpYyB1c2VySWQ6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VzZXIudHNcIiAvPlxyXG5tb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBHcm91cCB7XHJcbiAgICAgICAgcHVibGljIGdyb3VwSWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIHVzZXJzTGlzdDogQXJyYXk8TW9kZWxzLlVzZXI+XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBTY29yZSB7XHJcbiAgICAgICAgcHVibGljIHN1Y2Nlc3NmdWxNb3ZlczogbnVtYmVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgd3JvbmdNb3ZlczogbnVtYmVyO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgVHJhbnNsYXRlVmFyaWFudCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUcnVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZhcmlhbnQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGlzVHJ1ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBvcmRlcjogbnVtYmVyO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vdHJhbnNsYXRlVmFyaWFudC50c1wiIC8+XHJcbm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIFdvcmQge1xyXG4gICAgICAgIHB1YmxpYyB3b3JkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyB0cmFuc2xhdGVWYXJpYW50czogQXJyYXk8VHJhbnNsYXRlVmFyaWFudD5cclxuXHJcbiAgICAgICAgcHVibGljIGV4cGxhbmF0aW9uUXVvdGVzOiBBcnJheTxzdHJpbmc+XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWZpbml0aW9uOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaG9ydFdvcmRSZXByZXNlbnRhdGlvbjogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vc2NvcmUudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi93b3JkLnRzXCIgLz5cclxubW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZSB7XHJcbiAgICAgICAgcHVibGljIHVzZXIxOiBVc2VyO1xyXG5cclxuICAgICAgICBwdWJsaWMgdXNlcjI6IFVzZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjdXJyZW50TW92ZTogbnVtYmVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgd29yZHM6IEFycmF5PFdvcmQ+XHJcblxyXG4gICAgICAgIHB1YmxpYyB1c2VyMVNjb3JlOiBTY29yZTtcclxuXHJcbiAgICAgICAgcHVibGljIHVzZXIyU2NvcmU6IFNjb3JlO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZVJlc3VsdCB7XHJcbiAgICAgICAgcHVibGljIHdpbm5lcjogbnVtYmVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgaXNEcmF3OiBib29sZWFuO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vZ2FtZVJlc3VsdC50c1wiIC8+XHJcbm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIE1vdmVSZXN1bHQge1xyXG4gICAgICAgIHB1YmxpYyBpc1N1Y2Nlc3NmdWw6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc0NvcnJlY3Q6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGlzTGFzdE1vdmU6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBnYW1lUmVzdWx0OiBNb2RlbHMuR2FtZVJlc3VsdDtcclxuXHJcbiAgICAgICAgcHVibGljIHNlbGVjdGVkVmFyaWFudEluZGV4OiBudW1iZXI7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBQYXNzZWRXb3JkSW5mbyB7XHJcbiAgICAgICAgcHVibGljIHdvcmQ6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgYW5zd2VyOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3YXNQYXNzZWQ6IGJvb2xlYW47XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBlbnVtIExldmVsIHtcclxuICAgICAgICBCZWdpbmVyID0gMSxcclxuXHJcbiAgICAgICAgSW50ZXJtZWRpYXRlID0gMixcclxuXHJcbiAgICAgICAgQWR2YW5jZWQgPSAzXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGV2ZWxOYW1lUGFpciB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGxldmVsOiBNb2RlbHMuTGV2ZWw7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy50c1wiIC8+XHJcbm1vZHVsZSBTZXJ2aWNlcyB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29ubmVjdFRvR2FtZVNlcnZpY2UgaW1wbGVtZW50cyBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lIHtcclxuICAgICAgICBwcml2YXRlIGh1YjogU2lnbmFsUi5IdWIuUHJveHk7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0aW9uOiBTaWduYWxSLkh1Yi5Db25uZWN0aW9uO1xyXG4gICAgICAgIHByaXZhdGUgY29uc3RhbnRzOiBDb21tb24uQ29uc3RhbnRzO1xyXG5cclxuICAgICAgICBzdGF0aWMgJGluamVjdCA9IFtcIlNlcnZpY2VzLkh1YkNvbm5lY3Rpb25TZXJ2aWNlXCJdO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGh1YkNvbm5lY3Rpb25TZXJ2aWNlOiBJbnRlcmZhY2VzLklIdWJDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RhbnRzID0gQ29tbW9uLkdldENvbnN0YW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBodWJDb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaHViID0gdGhpcy5jb25uZWN0aW9uLmNyZWF0ZUh1YlByb3h5KHRoaXMuY29uc3RhbnRzLmNvbXBldGl0aW9uSHViKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25uZWN0VG9IdWIoKTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHViLmNvbm5lY3Rpb24uc3RhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb01vdmUobW92ZU9yZGVyOiBudW1iZXIsIHdvcmQ6IHN0cmluZywgdmFyaWFudDpzdHJpbmcpOiBKUXVlcnlQcm9taXNlPE1vZGVscy5Nb3ZlUmVzdWx0PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh1Yi5pbnZva2UodGhpcy5jb25zdGFudHMuZG9Nb3ZlLCBtb3ZlT3JkZXIsIHdvcmQsIHZhcmlhbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHBhc3NNb3ZlKG1vdmVPcmRlcjogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxNb2RlbHMuTW92ZVJlc3VsdD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odWIuaW52b2tlKHRoaXMuY29uc3RhbnRzLnBhc3NNb3ZlLCBtb3ZlT3JkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvbm5lY3RUb05ld0dyb3VwKGRpc3BsYXlOYW1lOiBzdHJpbmcsIGxldmVsOiBNb2RlbHMuTGV2ZWwpOiBKUXVlcnlQcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odWIuaW52b2tlKHRoaXMuY29uc3RhbnRzLmh1YkNvbm5lY3RUb0dyb3VwTWV0aG9kTmFtZSwgZGlzcGxheU5hbWUsIGxldmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkNvbm5lY3RlZFRvR3JvdXAoY2FsbEJhY2s6KHVzZXJJZDogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuaHViLm9uKHRoaXMuY29uc3RhbnRzLmNvbm5lY3RlZFRvR3JvdXAsIChtc2cpID0+IGNhbGxCYWNrKG1zZykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uR3JvdXBGdWxsZWQoY2FsbEJhY2s6KGdyb3VwOiBNb2RlbHMuR3JvdXApID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5odWIub24odGhpcy5jb25zdGFudHMuZ3JvdXBGdWxsZWQsIChtc2cpID0+IGNhbGxCYWNrKG1zZykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uVXNlckxlZnQoY2FsbEJhY2s6KGdyb3VwOiBNb2RlbHMuR3JvdXApID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5odWIub24odGhpcy5jb25zdGFudHMubGVmdEdyb3VwLCAobXNnKSA9PiBjYWxsQmFjayhtc2dbMF0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnYW1lU3RhcnRlZChjYWxsQmFjazooZ3JvdXA6IE1vZGVscy5HYW1lKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuaHViLm9uKHRoaXMuY29uc3RhbnRzLmdhbWVTdGFydGVkLCAobXNnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhtc2cpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaWRNb3ZlKGNhbGxCYWNrOihtb3ZlUmVzOiBNb2RlbHMuTW92ZVJlc3VsdCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmh1Yi5vbih0aGlzLmNvbnN0YW50cy5kaWRNb3ZlLCAobXNnKSA9PiBjYWxsQmFjayhtc2cpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnYW1lRmluaXNoZWQoY2FsbEJhY2s6KGdyb3VwOiBNb2RlbHMuR2FtZSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmh1Yi5vbih0aGlzLmNvbnN0YW50cy5nYW1lRmluaXNoZWQsIChtc2cpID0+IGNhbGxCYWNrKG1zZ1swXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuc2VydmljZShcIlNlcnZpY2VzLkNvbm5lY3RUb0dhbWVTZXJ2aWNlXCIsIENvbm5lY3RUb0dhbWVTZXJ2aWNlKTtcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzLnRzXCIgLz5cclxubW9kdWxlIFNlcnZpY2VzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBIdWJDb25uZWN0aW9uU2VydmljZSBpbXBsZW1lbnRzIEludGVyZmFjZXMuSUh1YkNvbm5lY3Rpb24ge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNvbm5lY3Rpb246IFNpZ25hbFIuSHViLkNvbm5lY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDb25uZWN0aW9uKCk6IFNpZ25hbFIuSHViLkNvbm5lY3Rpb24ge1xyXG4gICAgICAgICAgICBpZiAoIUh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24gPSAkLmh1YkNvbm5lY3Rpb24oXCIvc2lnbmFsclwiLCB7IHVzZURlZmF1bHRQYXRoOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24ubG9nZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYW5ndWxhci5tb2R1bGUoQ29tbW9uLkdldENvbnN0YW50cygpLmFwcE5hbWUpLnNlcnZpY2UoXCJTZXJ2aWNlcy5IdWJDb25uZWN0aW9uU2VydmljZVwiLCBIdWJDb25uZWN0aW9uU2VydmljZSk7XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9taXhpbnMvbmdTY2hlZHVsZXIudHNcIiAvPlxyXG5tb2R1bGUgU2VydmljZXMge1xyXG4gICAgZnVuY3Rpb24gdG9Qcm9taXNlQ3VzdG9tPFQ+KG9ic2VydmFibGU6IFJ4LklPYnNlcnZhYmxlPFQ+KTogRVM2UHJvbWlzZSA8YW55PiB7XHJcbiAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgRVM2UHJvbWlzZTxhbnk+KHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHt9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBJTW9kYWxTZXR0aW5ncyBleHRlbmRzIG5nLnVpLmJvb3RzdHJhcC5JTW9kYWxTZXR0aW5ncyB7XHJcblxyXG4gICAgICAgIC8qKiBTZXRzIHRoZSBhcmlhLWRlc2NyaWJlZGJ5IHByb3BlcnR5IG9uIHRoZSBtb2RhbC4gXHJcbiAgICAgICAgICogVGhlIHZhbHVlIHNob3VsZCBiZSBhbiBpZCAod2l0aG91dCB0aGUgbGVhZGluZyAjKSBwb2ludGluZyB0byB0aGUgZWxlbWVudCB0aGF0IGRlc2NyaWJlcyB5b3VyIG1vZGFsLiBcclxuICAgICAgICAgKiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSB0aGUgdGV4dCBvbiB5b3VyIG1vZGFsLFxyXG4gICAgICAgICAqICBidXQgZG9lcyBub3QgaW5jbHVkZSBzb21ldGhpbmcgdGhlIHVzZXIgd291bGQgaW50ZXJhY3Qgd2l0aCwgXHJcbiAgICAgICAgICogbGlrZSBidXR0b25zIG9yIGEgZm9ybS4gXHJcbiAgICAgICAgICogT21pdHRpbmcgdGhpcyBvcHRpb24gd2lsbCBub3QgaW1wYWN0IHNpZ2h0ZWQgdXNlcnMgYnV0IHdpbGwgd2Vha2VuIHlvdXIgYWNjZXNzaWJpbGl0eSBzdXBwb3J0LiAqL1xyXG4gICAgICAgIGFyaWFEZXNjcmliZWRCeTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKiogU2V0cyB0aGUgYXJpYS1sYWJlbGxlZGJ5IHByb3BlcnR5IG9uIHRoZSBtb2RhbC4gXHJcbiAgICAgICAgICogVGhlIHZhbHVlIHNob3VsZCBiZSBhbiBpZCAod2l0aG91dCB0aGUgbGVhZGluZyAjKSBwb2ludGluZyB0byB0aGUgZWxlbWVudCB0aGF0IGxhYmVscyB5b3VyIG1vZGFsLiBcclxuICAgICAgICAgKiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBhIGhlYWRlciBlbGVtZW50LiBcclxuICAgICAgICAgKiBPbWl0dGluZyB0aGlzIG9wdGlvbiB3aWxsIG5vdCBpbXBhY3Qgc2lnaHRlZCB1c2VycyBidXQgd2lsbCB3ZWFrZW4geW91ciBhY2Nlc3NpYmlsaXR5IHN1cHBvcnQuICovXHJcbiAgICAgICAgYXJpYUxhYmVsbGVkQnk6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RhdGVIYW5kbGVyU2VydmljZSBpbXBsZW1lbnRzIEludGVyZmFjZXMuSVN0YXRlSGFuZGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdGFudHM6IENvbW1vbi5Db25zdGFudHM7XHJcbiAgICAgICAgcHJpdmF0ZSAkcm9vdFNjb3BlOiBJbnRlcmZhY2VzLklSb290U2NvcGU7XHJcbiAgICAgICAgcHJpdmF0ZSAkbW9kYWw6IGFuZ3VsYXIudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2U7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9HYW1lU2NvcGU6IEludGVyZmFjZXMuSUNvbm5lY3RUb0dhbWVTY29wZTtcclxuICAgICAgICBwcml2YXRlIGdyb3VwRnVsbGVkT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgdXNlckxlZnRHcm91cE9ic2VydmFibGU6IFJ4LlN1YmplY3Q8YW55PjtcclxuICAgICAgICBwcml2YXRlIGdhbWVTdGFydGVkT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXJ0R2FtZU1vZGFsSW5zdGFuY2U6IGFuZ3VsYXIudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2VJbnN0YW5jZTtcclxuXHJcbiAgICAgICAgc3RhdGljICRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwiJHVpYk1vZGFsXCJdO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRyb290U2NvcGU6IEludGVyZmFjZXMuSVJvb3RTY29wZSwgJG1vZGFsOiBhbmd1bGFyLnVpLmJvb3RzdHJhcC5JTW9kYWxTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RhbnRzID0gQ29tbW9uLkdldENvbnN0YW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLiRtb2RhbCA9ICRtb2RhbDtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmlzU3RhcnRHYW1lUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLiRyb290U2NvcGUudXNlcklkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEZ1bGxlZE9ic2VydmFibGUgPSBuZXcgUnguU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZSA9IG5ldyBSeC5TdWJqZWN0PGFueT4oKTtcclxuICAgICAgICAgICAgdGhpcy51c2VyTGVmdEdyb3VwT2JzZXJ2YWJsZSA9IG5ldyBSeC5TdWJqZWN0PGFueT4oKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhcnRlZE9ic2VydmFibGUgPSBuZXcgUnguU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbGxJbkRpZ2VzdExvb3AoYWN0aW9uOigpID0+IHZvaWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHJvb3RTY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93U3RhcnRHYW1lTW9kYWwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBvcHQgPSB7fSBhcyBuZy51aS5ib290c3RyYXAuSU1vZGFsU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBvcHQuc2NvcGUgPSB0aGlzLmNvbm5lY3RUb0dhbWVTY29wZTtcclxuICAgICAgICAgICAgICAgIG9wdC50ZW1wbGF0ZVVybCA9IFwiY29ubmVjdFRvR3JvdXAuaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgb3B0LndpbmRvd1RlbXBsYXRlVXJsID0gXCJ3aW5kb3dUZW1wbGF0ZS5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICBvcHQuYmFja2Ryb3AgPSBcInN0YXRpY1wiO1xyXG4gICAgICAgICAgICAgICAgb3B0LmtleWJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBvcHQuYW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9wdC5zaXplID0gXCJsZ1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlID0gdGhpcy4kbW9kYWwub3BlbihvcHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93R2FtZUZpbmlzaGVkTW9kYWxXaW5kb3coaXNXaW4/OiBib29sZWFuLCBpc0RyYXc/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChpc1dpbiA9PT0gdW5kZWZpbmVkICYmIGlzRHJhdyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBcIk9uZSBvZiBib29sZWFuIGZsYWdzIHNob3VsZCBiZSBzcGVjaWZpZWRcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNvbm5lY3RUb0dhbWVTY29wZSA9IHRoaXMuY29ubmVjdFRvR2FtZVNjb3BlO1xyXG4gICAgICAgICAgICBsZXQgb3B0ID0ge30gYXMgbmcudWkuYm9vdHN0cmFwLklNb2RhbFNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgb3B0LmNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGU6IEludGVyZmFjZXMuSUdhbWVGaW5pc2hlZE1vZGFsV2luZG93U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGxheUFnYWluID0gY29ubmVjdFRvR2FtZVNjb3BlLmNvbm5lY3RUb0dyb3VwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEcmF3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gXCJJdCBpcyBkcmF3LiBHb29kIGpvYiA6RCFcXG5EbyB5b3Ugd2FudCB0byBwbGF5IGFnYWluP1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIkNvbmdyYXR1bGF0aW9uISBZb3UgaGF2ZSB3b24hXFxuRG8geW91IHdhbnQgdG8gcGxheSBhZ2Fpbj9cIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IFwiWW91IGhhdmUgbG9zdCwgYnV0IHdobyBjYXJlcyA6KS4gSXQgd2FzIGZ1bi5cXG5EbyB5b3Ugd2FudCB0byBwbGF5IGFnYWluP1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9wdC50ZW1wbGF0ZVVybCA9IFwiZ2FtZUZpbmlzaGVkLmh0bWxcIjtcclxuICAgICAgICAgICAgICAgIG9wdC53aW5kb3dUZW1wbGF0ZVVybCA9IFwid2luZG93VGVtcGxhdGUuaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgb3B0LmJhY2tkcm9wID0gXCJzdGF0aWNcIjtcclxuICAgICAgICAgICAgICAgIG9wdC5rZXlib2FyZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgb3B0LmFuaW1hdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBvcHQuc2l6ZSA9IFwibGdcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRHYW1lTW9kYWxJbnN0YW5jZSA9IHRoaXMuJG1vZGFsLm9wZW4ob3B0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDb25uZWN0VG9HYW1lU2NvcGUoY29ubmVjdFRvR2FtZVNjb3BlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lU2NvcGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0VG9HYW1lU2NvcGUgPSBjb25uZWN0VG9HYW1lU2NvcGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaGFuZGxlQ29ubmVjdGlvblRvR3JvdXAocHJvbWlzZTogSlF1ZXJ5UHJvbWlzZTxhbnk+KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHByb21pc2UuZmFpbCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic210aCBiYWQgaGFwcGVuZWQ6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRUb0dyb3VwID0gdGhpcy5hZGRlZFRvR3JvdXBPYnNlcnZhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRha2UoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuYWRkZWRUb0dyb3VwUHJvbWlzZSA9IHRvUHJvbWlzZUN1c3RvbShhZGRlZFRvR3JvdXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRUb0dyb3VwLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBGdWxsZWQgPSB0aGlzLmdyb3VwRnVsbGVkT2JzZXJ2YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRha2UoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCVUc6IEZvciBzb21lIHJlYXNvbiBzb21ldGhpbWVzIGlzIG5vdCByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUudXNlcjJDb25uZWN0ZWRQcm9taXNlID0gdG9Qcm9taXNlQ3VzdG9tKGdyb3VwRnVsbGVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwRnVsbGVkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmxvYWRpbmdHYW1lUHJvbWlzZSA9IHRvUHJvbWlzZUN1c3RvbShSeC5PYnNlcnZhYmxlLm1lcmdlKHRoaXMudXNlckxlZnRHcm91cE9ic2VydmFibGUudGFrZSgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU3RhcnRlZE9ic2VydmFibGUudGFrZSgxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWtlKDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmlzU3RhcnRHYW1lUGFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdFRvR2FtZVNjb3BlLmNvbm5lY3RUb0dyb3VwUHJvbWlzZSA9IHByb21pc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZVVzZXJBZGRlZFRvR3JvdXAoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZS5vbk5leHQoe30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZUNvbm5lY3Rpb25Ub0h1Yihwcm9taXNlOiBKUXVlcnlQcm9taXNlPGFueT4pOiB2b2lkIHtcclxuICAgICAgICAgICAgcHJvbWlzZS5mYWlsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic210aCBiYWQgaGFwcGVuZWRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcHJvbWlzZS5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dTdGFydEdhbWVNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FsbEluRGlnZXN0TG9vcCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuY29ubmVjdFRvSHViUHJvbWlzZSA9IHByb21pc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZUdhbWVGaW5pc2hlZChpc1dpbj86IGJvb2xlYW4sIGlzRHJhdz86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS5pc1N0YXJ0R2FtZVBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0dhbWVGaW5pc2hlZE1vZGFsV2luZG93KGlzV2luLCBpc0RyYXcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBoYW5kbGVHcm91cEZ1bGxlZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogQmV0dGVyIHRvIGltcGxlbWVudCBzY2hlZHVsZXIgdG8gc3Vic2NyaWJlIHdpdGhpbiBuZyBzY29wZVxyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cEZ1bGxlZE9ic2VydmFibGUub25OZXh0KHt9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBoYW5kbGVHYW1lU3RhcnRlZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS5pc1N0YXJ0R2FtZVBhZ2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0R2FtZU1vZGFsSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZU1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZU1vZGFsSW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXJ0ZWRPYnNlcnZhYmxlLm9uTmV4dCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0VXNlcklkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb290U2NvcGUudXNlcklkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFVzZXJJZCh1c2VySWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLiRyb290U2NvcGUudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZVVzZXIyTGVmdEdyb3VwKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyTGVmdEdyb3VwT2JzZXJ2YWJsZS5vbk5leHQoe30pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmlzU3RhcnRHYW1lUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhcnRHYW1lTW9kYWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0VXNlckRpc3BsYXlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb290U2NvcGUuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKENvbW1vbi5HZXRDb25zdGFudHMoKS5hcHBOYW1lKS5zZXJ2aWNlKFwiU2VydmljZXMuU3RhdGVIYW5kbGVyU2VydmljZVwiLCBTdGF0ZUhhbmRsZXJTZXJ2aWNlKTtcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9jb21tb24udHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy50c1wiIC8+XHJcbm1vZHVsZSBjb250cm9sbGVycyB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29ubmVjdFRvR2FtZUNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgY29ubmVjdGlvbkh1YlNlcnZpY2U6IEludGVyZmFjZXMuSUNvbm5lY3RUb0dhbWU7XHJcbiAgICAgICAgcHJpdmF0ZSAkc2NvcGU6IEludGVyZmFjZXMuSUNvbm5lY3RUb0dhbWVTY29wZTtcclxuICAgICAgICBwcml2YXRlIGdyb3VwSW5mbzogTW9kZWxzLkdyb3VwO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGVIYW5kbGVyOiBJbnRlcmZhY2VzLklTdGF0ZUhhbmRsZXI7XHJcbiAgICAgICAgcHJpdmF0ZSAkcm9vdFNjb3BlOiBJbnRlcmZhY2VzLklSb290U2NvcGU7XHJcblxyXG4gICAgICAgIHN0YXRpYyAkaW5qZWN0ID0gW1wiU2VydmljZXMuQ29ubmVjdFRvR2FtZVNlcnZpY2VcIiwgXCIkc2NvcGVcIiwgXCJTZXJ2aWNlcy5TdGF0ZUhhbmRsZXJTZXJ2aWNlXCIsIFwiJHJvb3RTY29wZVwiXTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSHViU2VydmljZTogSW50ZXJmYWNlcy5JQ29ubmVjdFRvR2FtZSwgJHNjb3BlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lU2NvcGUsIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlSGFuZGxlcjogSW50ZXJmYWNlcy5JU3RhdGVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGU6IEludGVyZmFjZXMuSVJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlID0gY29ubmVjdGlvbkh1YlNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlciA9IHN0YXRlSGFuZGxlcjtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplVmlld01vZGVsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVWaWV3TW9kZWwoKTp2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuc2V0Q29ubmVjdFRvR2FtZVNjb3BlKHRoaXMuJHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2Uub25Vc2VyTGVmdChkYXRhID0+IHRoaXMub25Vc2VyTGVmdC5jYWxsKHRoaXMsIGRhdGEpKTtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5vbkdyb3VwRnVsbGVkKGRhdGEgPT4gdGhpcy5vbkdyb3VwRnVsbGVkLmNhbGwodGhpcywgZGF0YSkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLm9uQ29ubmVjdGVkVG9Hcm91cChkYXRhID0+IHRoaXMub25Db25uZWN0ZWRUb0dyb3VwLmNhbGwodGhpcywgZGF0YSkpO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5jb25uZWN0VG9Hcm91cCA9ICgpID0+IHRoaXMuY29ubmVjdFRvR3JvdXAuYXBwbHkodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UuY29ubmVjdFRvSHViKCkuZG9uZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5zZXRVc2VySWQodmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlQ29ubmVjdGlvblRvSHViKHByb21pc2UpO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5sZXZlbHMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGV2ZWw6IE1vZGVscy5MZXZlbC5CZWdpbmVyLCBuYW1lOiBcItCd0L7QstCw0YfQvtC6XCJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xldmVsOiBNb2RlbHMuTGV2ZWwuSW50ZXJtZWRpYXRlLCBuYW1lOiBcItCh0YDQtdC00L3QuNC5XCJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xldmVsOiBNb2RlbHMuTGV2ZWwuQWR2YW5jZWQsIG5hbWU6IFwi0JLRi9GB0L7QutC40LlcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmxldmVsID0gdGhpcy4kc2NvcGUubGV2ZWxzWzFdO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5jaGFuZ2VMZXZlbCA9IChsZXZlbDogTW9kZWxzLklMZXZlbE5hbWVQYWlyKSA9PiB0aGlzLiRyb290U2NvcGUubGV2ZWwgPSBsZXZlbDtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmRpc3BsYXlOYW1lID0gXCLQodC70YPRh9Cw0LnQvdGL0Lkg0LjQs9GA0L7QulwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uR3JvdXBGdWxsZWQoZ3JvdXBJbmZvOiBNb2RlbHMuR3JvdXApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEluZm8gPSBncm91cEluZm87XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyLmhhbmRsZUdyb3VwRnVsbGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uVXNlckxlZnQoZ3JvdXBJbmZvOiBNb2RlbHMuR3JvdXApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEluZm8gPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5oYW5kbGVVc2VyMkxlZnRHcm91cCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9Hcm91cCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLmNvbm5lY3RUb05ld0dyb3VwKHRoaXMuc3RhdGVIYW5kbGVyLmdldFVzZXJEaXNwbGF5TmFtZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmxldmVsLmxldmVsKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlQ29ubmVjdGlvblRvR3JvdXAocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQ29ubmVjdGVkVG9Hcm91cCh1c2VySWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5zZXRVc2VySWQodXNlcklkKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlVXNlckFkZGVkVG9Hcm91cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuY29udHJvbGxlcihcImNvbnRyb2xsZXJzLkNvbm5lY3RUb0dhbWVDb250cm9sbGVyXCIsIENvbm5lY3RUb0dhbWVDb250cm9sbGVyKTtcclxufSAiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2ludGVyZmFjZXMudHNcIiAvPlxyXG5tb2R1bGUgY29udHJvbGxlcnMge1xyXG4gICAgZXhwb3J0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIGNvbm5lY3Rpb25IdWJTZXJ2aWNlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lO1xyXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBJbnRlcmZhY2VzLklHYW1lU2NvcGU7XHJcbiAgICAgICAgcHJpdmF0ZSBnYW1lSW5mbzogTW9kZWxzLkdhbWU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0ZUhhbmRsZXI6IEludGVyZmFjZXMuSVN0YXRlSGFuZGxlcjtcclxuICAgICAgICBwcml2YXRlIHdvcmRzOiBBcnJheTxNb2RlbHMuV29yZD5cclxuICAgICAgICBwcml2YXRlIHVzZXJOdW06IG51bWJlcjtcclxuICAgICAgICBwcml2YXRlICRpbnRlcnZhbDogbmcuSUludGVydmFsU2VydmljZTtcclxuICAgICAgICBwcml2YXRlIHNlY29uZHNGb3JNb3ZlOiBudW1iZXI7XHJcbiAgICAgICAgcHJpdmF0ZSB0aW1lclByb21pc2U6IG5nLklQcm9taXNlPGFueT47XHJcbiAgICAgICAgcHJpdmF0ZSAkdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlO1xyXG5cclxuICAgICAgICBzdGF0aWMgJGluamVjdCA9IFtcIlNlcnZpY2VzLkNvbm5lY3RUb0dhbWVTZXJ2aWNlXCIsIFwiJHNjb3BlXCIsIFwiU2VydmljZXMuU3RhdGVIYW5kbGVyU2VydmljZVwiLCBcIiRpbnRlcnZhbFwiLCAnJHRpbWVvdXQnXTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSHViU2VydmljZTogSW50ZXJmYWNlcy5JQ29ubmVjdFRvR2FtZSwgJHNjb3BlOiBJbnRlcmZhY2VzLklHYW1lU2NvcGUsIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlSGFuZGxlcjogSW50ZXJmYWNlcy5JU3RhdGVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbDogbmcuSUludGVydmFsU2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UgPSBjb25uZWN0aW9uSHViU2VydmljZTtcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyID0gc3RhdGVIYW5kbGVyO1xyXG4gICAgICAgICAgICB0aGlzLiRpbnRlcnZhbCA9ICRpbnRlcnZhbDtcclxuICAgICAgICAgICAgdGhpcy5zZWNvbmRzRm9yTW92ZSA9IDEwO1xyXG4gICAgICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXdNb2RlbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplVmlld01vZGVsKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UuZ2FtZVN0YXJ0ZWQoZGF0YSA9PiB0aGlzLnN0YXJ0R2FtZS5jYWxsKHRoaXMsIGRhdGEpKTtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5kaWRNb3ZlKGRhdGEgPT4gdGhpcy51c2VyMmRpZE1vdmUuY2FsbCh0aGlzLCBkYXRhKSk7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmRvTW92ZSA9ICh2YXJpYW50OiBzdHJpbmcpID0+IHRoaXMuZG9Nb3ZlLmNhbGwodGhpcywgdmFyaWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2Uub25Vc2VyTGVmdCgoKSA9PiB0aGlzLm9uVXNlckxlZnQuY2FsbCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMudW5zZXRHYW1lSW5mbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblVzZXJMZWZ0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnVuc2V0R2FtZUluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdW5zZXRHYW1lSW5mbygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lSW5mbyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFdvcmQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBlcmNlbnRhZ2VzTGVmdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5pc0N1cnJlbnRVc2VyTW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBhc3NlZFdvcmRzID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5sZWZ0V29yZHMgPSBbXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXJ0R2FtZShnYW1lOiBNb2RlbHMuR2FtZSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVJbmZvID0gZ2FtZTtcclxuICAgICAgICAgICAgdGhpcy53b3JkcyA9IGdhbWUud29yZHM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc1VzZXIxID0gZ2FtZS51c2VyMS51c2VySWQgPT09IHRoaXMuc3RhdGVIYW5kbGVyLmdldFVzZXJJZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJOdW0gPSBpc1VzZXIxID8gMSA6IDI7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlID0gaXNVc2VyMSA/IGdhbWUudXNlcjFTY29yZSA6IGdhbWUudXNlcjJTY29yZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUgPSAhaXNVc2VyMSA/IGdhbWUudXNlcjFTY29yZSA6IGdhbWUudXNlcjJTY29yZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnVzZXIyRGlzcGxheU5hbWUgPSAhaXNVc2VyMSA/IGdhbWUudXNlcjEuZGlzcGxheU5hbWUgOiBnYW1lLnVzZXIyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFdvcmRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50V29yZCA9IHRoaXMud29yZHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFZhcmluYXRzT3JkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmlzQ3VycmVudFVzZXJNb3ZlID0gKGlzVXNlcjEgJiYgdGhpcy5nYW1lSW5mby5jdXJyZW50TW92ZSA9PT0gMSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghaXNVc2VyMSAmJiB0aGlzLmdhbWVJbmZvLmN1cnJlbnRNb3ZlID09PSAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2h1ZmZsZShhcnI6IEFycmF5PE1vZGVscy5Xb3JkPik6IEFycmF5PE1vZGVscy5Xb3JkPiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJyYXkgPSBhcnIuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbSA9IGFycmF5Lmxlbmd0aCwgdCwgaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnTigKZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbS0tKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBhcnJheVttXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVttXSA9IGFycmF5W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W2ldID0gdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5sZWZ0V29yZHMgPSBzaHVmZmxlKHRoaXMud29yZHMuc2xpY2UoMSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyLmhhbmRsZUdhbWVTdGFydGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYWxsSW5EaWdlc3RMb29wKGFjdGlvbjooKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXJ0VGltZXIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVyUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJQcmV2aW91cyB0aW1lciBzaG91bGQgYmUgc3RvcHBlZFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0ID0gdGhpcy5zZWNvbmRzRm9yTW92ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBlcmNlbnRhZ2VzTGVmdCA9IDEwMDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZSA9IHRoaXMuJGludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnNlY29uZHNGb3JNb3ZlTGVmdC0tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUucGVyY2VudGFnZXNMZWZ0ID0gdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0IC8gMTAgKiAxMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlLnNlY29uZHNGb3JNb3ZlTGVmdCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICYmIHRoaXMuJHNjb3BlLmlzQ3VycmVudFVzZXJNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDAwLCAxMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0b3BUaW1lcigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVyUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRpbnRlcnZhbC5jYW5jZWwodGhpcy50aW1lclByb21pc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVzZXIyZGlkTW92ZShtb3ZlUmVzOiBNb2RlbHMuTW92ZVJlc3VsdCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlKG1vdmVSZXMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhc3NNb3ZlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLnBhc3NNb3ZlKHRoaXMudXNlck51bSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKChtb3ZlUmVzdWx0Ok1vZGVscy5Nb3ZlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuJGFwcGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlKG1vdmVSZXN1bHQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGRvTW92ZSh2YXJpYW50OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlLnNlY29uZHNGb3JNb3ZlTGVmdCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGltZXIgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkVmFyID0gdGhpcy4kc2NvcGUuY3VycmVudFdvcmQudHJhbnNsYXRlVmFyaWFudHMuZmlsdGVyKHYgPT4gdi52YXJpYW50ID09PSB2YXJpYW50KVswXTtcclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFZhcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luY29ycmVjdCB2YXIgc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLmRvTW92ZSh0aGlzLnVzZXJOdW0sIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLndvcmQsIHZhcmlhbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZSgobW92ZVJlc3VsdDpNb2RlbHMuTW92ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZShtb3ZlUmVzdWx0LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVNb3ZlKG1vdmVSZXM6IE1vZGVscy5Nb3ZlUmVzdWx0LCBpc0N1cnJlbnRVc2VyTW92ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRVc2VyU2NvcmUgPSB0aGlzLnVzZXJOdW0gPT09IDEgPyB0aGlzLmdhbWVJbmZvLnVzZXIxU2NvcmUgOiB0aGlzLmdhbWVJbmZvLnVzZXIyU2NvcmU7XHJcbiAgICAgICAgICAgIHZhciB1c2VyMlNjb3JlID0gdGhpcy51c2VyTnVtID09PSAxID8gdGhpcy5nYW1lSW5mby51c2VyMlNjb3JlIDogdGhpcy5nYW1lSW5mby51c2VyMVNjb3JlO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNjb3JlID0gaXNDdXJyZW50VXNlck1vdmUgPyBjdXJyZW50VXNlclNjb3JlIDogdXNlcjJTY29yZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbW92ZVJlcy5pc0NvcnJlY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobW92ZVJlcy5lcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1vdmVSZXMuaXNTdWNjZXNzZnVsKSB7XHJcbiAgICAgICAgICAgICAgICBzY29yZS5zdWNjZXNzZnVsTW92ZXMrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjb3JlLndyb25nTW92ZXMrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1vdmVSZXMuc2VsZWN0ZWRWYXJpYW50SW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50V29yZC50cmFuc2xhdGVWYXJpYW50c1ttb3ZlUmVzLnNlbGVjdGVkVmFyaWFudEluZGV4XS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlck51bSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXJTY29yZSA9IHRoaXMuZ2FtZUluZm8udXNlcjFTY29yZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUgPSB0aGlzLmdhbWVJbmZvLnVzZXIyU2NvcmU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlID0gdGhpcy5nYW1lSW5mby51c2VyMlNjb3JlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUudXNlcjJTY29yZSA9IHRoaXMuZ2FtZUluZm8udXNlcjFTY29yZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy4kdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5pc0N1cnJlbnRVc2VyTW92ZSA9ICFpc0N1cnJlbnRVc2VyTW92ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkSW5kZXgrKztcclxuICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnRVc2VyTW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXNzZWRXb3JkID0gbmV3IE1vZGVscy5QYXNzZWRXb3JkSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZFdvcmQud29yZCA9IHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLndvcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc2VkV29yZC5hbnN3ZXIgPSB0aGlzLiRzY29wZS5jdXJyZW50V29yZC50cmFuc2xhdGVWYXJpYW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGkgPT4gaS5pc1RydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaGlmdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC52YXJpYW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZFdvcmQud2FzUGFzc2VkID0gbW92ZVJlcy5pc1N1Y2Nlc3NmdWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUucGFzc2VkV29yZHMucHVzaChwYXNzZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRnJvbUFycmF5SWYoYXJyOiBBcnJheTxNb2RlbHMuV29yZD4sIGNhbGxiYWNrOiAoYXJnOiBNb2RlbHMuV29yZCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGFyci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGFycltpXSwgaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFdvcmQgPSB0aGlzLmdhbWVJbmZvLndvcmRzW3RoaXMuJHNjb3BlLmN1cnJlbnRXb3JkSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYXJpbmF0c09yZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tQXJyYXlJZih0aGlzLiRzY29wZS5sZWZ0V29yZHMsIHcgPT4gdy53b3JkID09PSB0aGlzLiRzY29wZS5jdXJyZW50V29yZC53b3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW92ZVJlcy5pc0xhc3RNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlR2FtZUZpbmlzaGVkKHRoaXMuJHNjb3BlLmN1cnJlbnRVc2VyU2NvcmUuc3VjY2Vzc2Z1bE1vdmVzID4gdGhpcy4kc2NvcGUudXNlcjJTY29yZS5zdWNjZXNzZnVsTW92ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRVc2VyU2NvcmUuc3VjY2Vzc2Z1bE1vdmVzID09IHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUuc3VjY2Vzc2Z1bE1vdmVzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0R2FtZUluZm8oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDAsIHRydWUpOyAvLyBkZWxheSB0byBsZXQgdXNlciBzZWUgdGhlIHJlc3VsdCBvZiBoaXMgbW92ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRWYXJpbmF0c09yZGVyKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLnRyYW5zbGF0ZVZhcmlhbnRzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUub3JkZXIgPSBpbmRleCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuY29udHJvbGxlcihcImNvbnRyb2xsZXJzLkdhbWVDb250cm9sbGVyXCIsIEdhbWVDb250cm9sbGVyKTtcclxufSAiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuJCgoKSA9PiB7XHJcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3MDAwMDAvaG93LXRvLWRpc2FibGUtdGV4dC1zZWxlY3Rpb24tdXNpbmctanF1ZXJ5XHJcbiAgICAkKCcjd29yZCwgLndvcmQtbGVmdC1pdGVtLWNhcHRpb24nKS5hdHRyKCd1bnNlbGVjdGFibGUnLCdvbicpXHJcbiAgICAgLmNzcyh7Jy1tb3otdXNlci1zZWxlY3QnOictbW96LW5vbmUnLFxyXG4gICAgICAgICAgICctby11c2VyLXNlbGVjdCc6J25vbmUnLFxyXG4gICAgICAgICAgICcta2h0bWwtdXNlci1zZWxlY3QnOidub25lJywgLyogeW91IGNvdWxkIGFsc28gcHV0IHRoaXMgaW4gYSBjbGFzcyAqL1xyXG4gICAgICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0Jzonbm9uZScsLyogYW5kIGFkZCB0aGUgQ1NTIGNsYXNzIGhlcmUgaW5zdGVhZCAqL1xyXG4gICAgICAgICAgICctbXMtdXNlci1zZWxlY3QnOidub25lJyxcclxuICAgICAgICAgICAndXNlci1zZWxlY3QnOidub25lJ1xyXG4gICAgIH0pLmJpbmQoJ3NlbGVjdHN0YXJ0JywgZnVuY3Rpb24oKXsgcmV0dXJuIGZhbHNlOyB9KTtcclxufSkiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuJCgoKSA9PiB7XHJcbiAgICAkKGRvY3VtZW50KS5rZXlwcmVzcyhlID0+IHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpIHtcclxuICAgICAgICAgICAgJChcIi5idG4tc3VibWl0OnZpc2libGVcIikuZmlyc3QoKS5jbGljaygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA+PSA0OCAmJiBlLndoaWNoIDw9IDU3KSB7XHJcbiAgICAgICAgICAgIGxldCBudW1QcmVzc2VkID0gZS53aGljaCAtIDQ4O1xyXG4gICAgICAgICAgICAkKCcudHJhbnNsYXRlVmFyaWFudDp2aXNpYmxlJykuZmlsdGVyKChpbmRleCwgZWxlbSkgPT4gJChlbGVtKS5kYXRhKCdvcmRlcicpID09PSBudW1QcmVzc2VkKVxyXG4gICAgICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgICAgIC5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
