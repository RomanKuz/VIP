function getWordContainerPostion(){var $element=$("#word-element");return{x:$element.offset().left,y:$element.offset().top}}var Common;!function(Common){function GetConstants(){return new Constants}var Constants=function(){function Constants(){this.appName="gameApp",this.hubConnectToGroupMethodName="connect",this.connectedToGroup="userAdded",this.leftGroup="userLeft",this.groupFulled="groupFulled",this.competitionHub="competitionHub",this.gameStarted="gameStarted",this.didMove="didMove",this.gameFinished="gameFinished",this.doMove="doMove",this.passMove="passMove"}return Constants}();Common.Constants=Constants,Common.GetConstants=GetConstants}(Common||(Common={}));var Mixins;!function(Mixins){function actionWrapper($scope,action){return function(scheduler,state){if(!$scope.$$phase){var value_1;return $scope.$apply(function(){value_1=action(scheduler,state)}),value_1}return action(scheduler,state)}}var NgScheduler=function(){function NgScheduler($scope){this.immediateScheduler=Rx.Scheduler.immediate,this.$scope=$scope}return NgScheduler.prototype.now=function(){return this.immediateScheduler.now()},NgScheduler.prototype.schedule=function(state,action){return this.immediateScheduler.schedule(state,actionWrapper(this.$scope,action))},NgScheduler.prototype.scheduleFuture=function(state,dueTime,action){throw new Error("Not supported")},NgScheduler.prototype.scheduleRecursive=function(state,action){throw new Error("Not supported")},NgScheduler.prototype.scheduleRecursiveFuture=function(state,dueTime,action){throw new Error("Not supported")},NgScheduler.prototype.schedulePeriodic=function(state,period,action){throw new Error("Not supported")},NgScheduler.prototype.catch=function(handler){return this.immediateScheduler.catch(handler)},NgScheduler}();Mixins.NgScheduler=NgScheduler}(Mixins||(Mixins={}));var App;!function(App){function GetApp(){return app}var constants=Common.GetConstants(),app=angular.module(constants.appName,["ui.bootstrap.modal","cgBusy","ngAnimate"]);App.GetApp=GetApp}(App||(App={}));var Models;!function(Models){var User=function(){function User(){}return User}();Models.User=User}(Models||(Models={}));var Models;!function(Models){var Group=function(){function Group(){}return Group}();Models.Group=Group}(Models||(Models={}));var Models;!function(Models){var Score=function(){function Score(){}return Score}();Models.Score=Score}(Models||(Models={}));var Models;!function(Models){var TranslateVariant=function(){function TranslateVariant(){this.variant=null,this.isTrue=!1,this.isSelected=!1}return TranslateVariant}();Models.TranslateVariant=TranslateVariant}(Models||(Models={}));var Models;!function(Models){var Word=function(){function Word(){}return Word}();Models.Word=Word}(Models||(Models={}));var Models;!function(Models){var Game=function(){function Game(){}return Game}();Models.Game=Game}(Models||(Models={}));var Models;!function(Models){var GameResult=function(){function GameResult(){}return GameResult}();Models.GameResult=GameResult}(Models||(Models={}));var Models;!function(Models){var MoveResult=function(){function MoveResult(){}return MoveResult}();Models.MoveResult=MoveResult}(Models||(Models={}));var Models;!function(Models){var PassedWordInfo=function(){function PassedWordInfo(){}return PassedWordInfo}();Models.PassedWordInfo=PassedWordInfo}(Models||(Models={}));var Models;!function(Models){!function(Level){Level[Level.Beginer=1]="Beginer",Level[Level.Intermediate=2]="Intermediate",Level[Level.Advanced=3]="Advanced"}(Models.Level||(Models.Level={}));Models.Level}(Models||(Models={}));var Services;!function(Services){var ConnectToGameService=function(){function ConnectToGameService(hubConnectionService){this.constants=Common.GetConstants(),this.connection=hubConnectionService.getConnection(),this.hub=this.connection.createHubProxy(this.constants.competitionHub)}return ConnectToGameService.prototype.connectToHub=function(){return this.hub.connection.start()},ConnectToGameService.prototype.onConnectToHub=function(callBack){this.onConnectedToHubCallback=callBack},ConnectToGameService.prototype.doMove=function(moveOrder,word,variant){return this.hub.invoke(this.constants.doMove,moveOrder,word,variant)},ConnectToGameService.prototype.passMove=function(moveOrder){return this.hub.invoke(this.constants.passMove,moveOrder)},ConnectToGameService.prototype.connectToNewGroupImpl=function(displayName,level){return this.hub.invoke(this.constants.hubConnectToGroupMethodName,displayName,level)},ConnectToGameService.prototype.connectToNewGroup=function(displayName,level){var _this=this;return 4===this.connection.state?this.connectToHub().then(function(values){return _this.onConnectedToHubCallback(values.id),_this.hub.invoke(_this.constants.hubConnectToGroupMethodName,displayName,level)}):this.hub.invoke(this.constants.hubConnectToGroupMethodName,displayName,level)},ConnectToGameService.prototype.onConnectedToGroup=function(callBack){this.hub.on(this.constants.connectedToGroup,function(msg){return callBack(msg)})},ConnectToGameService.prototype.onGroupFulled=function(callBack){this.hub.on(this.constants.groupFulled,function(msg){return callBack(msg)})},ConnectToGameService.prototype.onUserLeft=function(callBack){this.hub.on(this.constants.leftGroup,function(msg){return callBack(msg[0])})},ConnectToGameService.prototype.gameStarted=function(callBack){this.hub.on(this.constants.gameStarted,function(msg){callBack(msg)})},ConnectToGameService.prototype.didMove=function(callBack){this.hub.on(this.constants.didMove,function(msg){return callBack(msg)})},ConnectToGameService.prototype.gameFinished=function(callBack){this.hub.on(this.constants.gameFinished,function(msg){return callBack(msg[0])})},ConnectToGameService.prototype.onDisconnectedFromHub=function(callBack){this.connection.disconnected(callBack)},ConnectToGameService.prototype.stopHubConnection=function(){4!==this.connection.state&&this.connection.stop()},ConnectToGameService.$inject=["Services.HubConnectionService"],ConnectToGameService}();Services.ConnectToGameService=ConnectToGameService,angular.module(Common.GetConstants().appName).service("Services.ConnectToGameService",ConnectToGameService)}(Services||(Services={}));var Services;!function(Services){var CookieService=function(){function CookieService(){}return CookieService.prototype.setCookie=function(cname,cvalue,exdays){exdays||(exdays=3670);var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"},CookieService.prototype.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},CookieService}();Services.CookieService=CookieService,angular.module(Common.GetConstants().appName).service("Services.CookieService",CookieService)}(Services||(Services={}));var Services;!function(Services){var HubConnectionService=function(){function HubConnectionService(){}return HubConnectionService.prototype.getConnection=function(){return HubConnectionService.connection||(HubConnectionService.connection=$.hubConnection("/signalr",{useDefaultPath:!1}),HubConnectionService.connection.logging=!0),HubConnectionService.connection},HubConnectionService}();Services.HubConnectionService=HubConnectionService,angular.module(Common.GetConstants().appName).service("Services.HubConnectionService",HubConnectionService)}(Services||(Services={}));var Services;!function(Services){function toPromiseCustom(observable){var promise=new Promise(function(resolve){observable.subscribe(function(){resolve({})})});return promise}var StateHandlerService=function(){function StateHandlerService($rootScope,$modal){this.constants=Common.GetConstants(),this.$modal=$modal,this.$rootScope=$rootScope,this.$rootScope.isStartGamePage=!1,this.$rootScope.userId=null,this.groupFulledObservable=new Rx.Subject,this.addedToGroupObservable=new Rx.Subject,this.userLeftGroupObservable=new Rx.Subject,this.gameStartedObservable=new Rx.Subject}return StateHandlerService.prototype.callInDigestLoop=function(action){this.$rootScope.$$phase?action():this.$rootScope.$apply(function(){action()})},StateHandlerService.prototype.showStartGameModal=function(){var opt={};opt.scope=this.connectToGameScope,opt.templateUrl="connectToGroup.html",opt.windowTemplateUrl="windowTemplate.html",opt.backdrop="static",opt.keyboard=!1,opt.animation=!0,opt.size="lg",this.startGameModalInstance=this.$modal.open(opt)},StateHandlerService.prototype.showGameFinishedModalWindow=function(isWin,isDraw){if(void 0===isWin&&void 0===isDraw)throw"One of boolean flags should be specified";var connectToGameScope=this.connectToGameScope,opt={};opt.controller=function($scope){$scope.playAgain=connectToGameScope.connectToGroup,isDraw?$scope.message="Ничья. Отличная игра :D!\nХотите сыграть ещё раз?":isWin?$scope.message="Поздравления! Вы выиграли!\nХотите сыграть ещё раз?":$scope.message="Даже если проиграл, преобретенный опыт останется навсегда с тобой и станет твоей наградой :)\nХотите сыграть ещё раз?"},opt.templateUrl="gameFinished.html",opt.windowTemplateUrl="windowTemplate.html",opt.backdrop="static",opt.keyboard=!1,opt.animation=!0,opt.size="lg",this.startGameModalInstance=this.$modal.open(opt)},StateHandlerService.prototype.setConnectToGameScope=function(connectToGameScope){this.connectToGameScope=connectToGameScope},StateHandlerService.prototype.handleConnectionToGroup=function(promise){var _this=this;this.callInDigestLoop(function(){var addedToGroup=_this.addedToGroupObservable.take(1);_this.$rootScope.addedToGroupPromise=toPromiseCustom(addedToGroup),addedToGroup.subscribe(function(){_this.startGameModalInstance&&(_this.startGameModalInstance.close(),_this.startGameModalInstance=null),_this.$rootScope.isStartGamePage=!0});var groupFulled=_this.groupFulledObservable.take(1);_this.$rootScope.user2ConnectedPromise=toPromiseCustom(groupFulled),groupFulled.subscribe(function(){_this.$rootScope.loadingGamePromise=toPromiseCustom(Rx.Observable.merge(_this.userLeftGroupObservable.take(1),_this.gameStartedObservable.take(1)).take(1))}),_this.connectToGameScope.connectToGroupPromise=promise}),promise.fail(function(error){console.log("smth bad happened: "+error)})},StateHandlerService.prototype.handleUserAddedToGroup=function(){this.addedToGroupObservable.onNext({})},StateHandlerService.prototype.showStartGameWindow=function(){var _this=this;this.callInDigestLoop(function(){_this.showStartGameModal()})},StateHandlerService.prototype.handleGameFinished=function(isWin,isDraw){var _this=this;this.callInDigestLoop(function(){_this.$rootScope.isStartGamePage=!1,_this.showGameFinishedModalWindow(isWin,isDraw)})},StateHandlerService.prototype.handleGroupFulled=function(){var _this=this;this.callInDigestLoop(function(){_this.groupFulledObservable.onNext({})})},StateHandlerService.prototype.handleGameStarted=function(){var _this=this;this.callInDigestLoop(function(){_this.$rootScope.isStartGamePage=!0,_this.startGameModalInstance&&(_this.startGameModalInstance.close(),_this.startGameModalInstance=null)}),this.gameStartedObservable.onNext({})},StateHandlerService.prototype.getUserId=function(){return this.$rootScope.userId},StateHandlerService.prototype.setUserId=function(userId){this.$rootScope.userId=userId},StateHandlerService.prototype.handleUser2LeftGroup=function(){var _this=this;this.callInDigestLoop(function(){_this.userLeftGroupObservable.onNext({}),_this.$rootScope.isStartGamePage=!1,_this.showStartGameModal()})},StateHandlerService.prototype.getUserDisplayName=function(){return this.$rootScope.displayName},StateHandlerService.prototype.handleDisconnectedFromHub=function(){var _this=this;this.$rootScope.isStartGamePage&&this.callInDigestLoop(function(){_this.$rootScope.isStartGamePage=!1,_this.showStartGameModal()})},StateHandlerService.$inject=["$rootScope","$uibModal"],StateHandlerService}();Services.StateHandlerService=StateHandlerService,angular.module(Common.GetConstants().appName).service("Services.StateHandlerService",StateHandlerService)}(Services||(Services={}));var controllers;!function(controllers){var ConnectToGameController=function(){function ConnectToGameController(connectionHubService,$scope,stateHandler,$rootScope,coockieService){this.connectionHubService=connectionHubService,this.$scope=$scope,this.stateHandler=stateHandler,this.$rootScope=$rootScope,this.coockieService=coockieService,this.displayNameCookieKey="displayName",this.levelCookieKey="levelName",this.initializeViewModel()}return ConnectToGameController.prototype.initializeViewModel=function(){var _this=this;this.stateHandler.setConnectToGameScope(this.$scope),this.connectionHubService.onUserLeft(function(data){return _this.onUserLeft.call(_this,data)}),this.connectionHubService.onGroupFulled(function(data){return _this.onGroupFulled.call(_this,data)}),this.connectionHubService.onConnectedToGroup(function(data){return _this.onConnectedToGroup.call(_this,data)}),this.$scope.connectToGroup=function(){return _this.connectToGroup.apply(_this)},this.connectionHubService.onConnectToHub(function(value){_this.stateHandler.setUserId(value)}),this.connectionHubService.onDisconnectedFromHub(function(){return _this.stateHandler.handleDisconnectedFromHub()}),this.$scope.levels=[{level:Models.Level.Beginer,name:"Новачок"},{level:Models.Level.Intermediate,name:"Средний"},{level:Models.Level.Advanced,name:"Высокий"}],this.$scope.changeLevel=function(level){return _this.$rootScope.level=level};var displayNameFromCookies="Случайный игрок",levelFromCookies=2;try{var cookieValue=this.coockieService.getCookie(this.displayNameCookieKey);""!==cookieValue&&(displayNameFromCookies=cookieValue),cookieValue=this.coockieService.getCookie(this.levelCookieKey),""!==cookieValue&&(levelFromCookies=parseInt(cookieValue)||levelFromCookies)}catch(error){console.log(error)}this.$rootScope.displayName=displayNameFromCookies,this.$rootScope.level=this.$scope.levels[levelFromCookies-1],this.stateHandler.showStartGameWindow()},ConnectToGameController.prototype.onGroupFulled=function(groupInfo){this.groupInfo=groupInfo,this.stateHandler.handleGroupFulled()},ConnectToGameController.prototype.onUserLeft=function(groupInfo){this.groupInfo=null,this.stateHandler.handleUser2LeftGroup()},ConnectToGameController.prototype.connectToGroup=function(){var displayName=this.stateHandler.getUserDisplayName(),level=this.$rootScope.level.level;try{this.coockieService.setCookie(this.displayNameCookieKey,displayName),this.coockieService.setCookie(this.levelCookieKey,level)}catch(error){console.log(error)}var promise=this.connectionHubService.connectToNewGroup(displayName,level);this.stateHandler.handleConnectionToGroup(promise)},ConnectToGameController.prototype.onConnectedToGroup=function(userId){this.stateHandler.setUserId(userId),this.stateHandler.handleUserAddedToGroup()},ConnectToGameController.$inject=["Services.ConnectToGameService","$scope","Services.StateHandlerService","$rootScope","Services.CookieService"],ConnectToGameController}();controllers.ConnectToGameController=ConnectToGameController,angular.module(Common.GetConstants().appName).controller("controllers.ConnectToGameController",ConnectToGameController)}(controllers||(controllers={}));var controllers;!function(controllers){var GameController=function(){function GameController(connectionHubService,$scope,stateHandler,$interval,$timeout){this.connectionHubService=connectionHubService,this.$scope=$scope,this.stateHandler=stateHandler,this.$interval=$interval,this.secondsForMove=10,this.$timeout=$timeout,this.initializeViewModel()}return GameController.prototype.initializeViewModel=function(){var _this=this;this.connectionHubService.gameStarted(function(data){return _this.startGame.call(_this,data)}),this.connectionHubService.didMove(function(data){return _this.user2didMove.call(_this,data)}),this.$scope.doMove=function(variant){return _this.doMove.call(_this,variant)},this.connectionHubService.onUserLeft(function(){return _this.onUserLeft.call(_this)}),this.unsetGameInfo()},GameController.prototype.onUserLeft=function(){this.stopTimer(),this.unsetGameInfo()},GameController.prototype.unsetGameInfo=function(){var _this=this;this.gameInfo=null,this.callInDigestLoop(function(){_this.$scope.currentWord=null,_this.$scope.secondsForMoveLeft=null,_this.$scope.percentagesLeft=null,_this.$scope.isCurrentUserMove=null,_this.$scope.currentUserScore=null,_this.$scope.user2Score=null,_this.$scope.passedWords=[],_this.$scope.leftWords=[]})},GameController.prototype.startGame=function(game){var _this=this;this.gameInfo=game,this.words=game.words;var isUser1=game.user1.userId===this.stateHandler.getUserId();this.userNum=isUser1?1:2,this.$scope.$apply(function(){function shuffle(arr){for(var t,i,array=arr.slice(0),m=array.length;m;)i=Math.floor(Math.random()*m--),t=array[m],array[m]=array[i],array[i]=t;return array}_this.$scope.currentUserScore=isUser1?game.user1Score:game.user2Score,_this.$scope.user2Score=isUser1?game.user2Score:game.user1Score,_this.$scope.user2DisplayName=isUser1?game.user2.displayName:game.user1.displayName,_this.$scope.currentWordIndex=0,_this.$scope.currentWord=_this.words[0],_this.setVarinatsOrder(),_this.$scope.isCurrentUserMove=isUser1&&1===_this.gameInfo.currentMove||!isUser1&&2===_this.gameInfo.currentMove,_this.$scope.leftWords=shuffle(_this.words.slice(1))}),this.stateHandler.handleGameStarted(),this.startTimer()},GameController.prototype.callInDigestLoop=function(action){this.$scope.$$phase?action():this.$scope.$apply(function(){action()})},GameController.prototype.startTimer=function(){var _this=this;if(this.timerPromise)throw"Previous timer should be stopped";this.callInDigestLoop(function(){_this.$scope.secondsForMoveLeft=_this.secondsForMove,_this.$scope.percentagesLeft=100}),this.timerPromise=this.$interval(function(){_this.$scope.secondsForMoveLeft--,_this.$scope.percentagesLeft=_this.$scope.secondsForMoveLeft/10*100,0===_this.$scope.secondsForMoveLeft&&_this.$scope.isCurrentUserMove&&_this.passMove()},1e3,10)},GameController.prototype.stopTimer=function(){this.timerPromise&&(this.$interval.cancel(this.timerPromise),this.timerPromise=null)},GameController.prototype.user2didMove=function(moveRes){var _this=this;this.$scope.$apply(function(){_this.handleMove(moveRes,!1)})},GameController.prototype.passMove=function(){var _this=this;this.connectionHubService.passMove(this.userNum).done(function(moveResult){_this.$scope.$apply(function(){_this.handleMove(moveResult,!0)})})},GameController.prototype.doMove=function(variant){var _this=this;if(0===this.$scope.currentWord.translateVariants.filter(function(v){return v.isSelected}).length&&(this.stopTimer(),0!==this.$scope.secondsForMoveLeft)){var selectedVar=this.$scope.currentWord.translateVariants.filter(function(v){return v.variant===variant})[0];selectedVar?selectedVar.isSelected=!0:console.log("Incorrect var selected"),this.connectionHubService.doMove(this.userNum,this.$scope.currentWord.word,variant).done(function(moveResult){_this.$scope.$apply(function(){_this.handleMove(moveResult,!0)})})}},GameController.prototype.handleMove=function(moveRes,isCurrentUserMove){var _this=this;this.stopTimer(),moveRes.isSkipped&&(this.$scope.secondsForMoveLeft=0,this.$scope.percentagesLeft=0);var currentUserScore=1===this.userNum?this.gameInfo.user1Score:this.gameInfo.user2Score,user2Score=1===this.userNum?this.gameInfo.user2Score:this.gameInfo.user1Score,score=isCurrentUserMove?currentUserScore:user2Score;moveRes.isCorrect?moveRes.isSuccessful?score.successfulMoves++:score.wrongMoves++:console.error(moveRes.errorMessage),moveRes.selectedVariantIndex!==-1&&(this.$scope.currentWord.translateVariants[moveRes.selectedVariantIndex].isSelected=!0),1===this.userNum?(this.$scope.currentUserScore=this.gameInfo.user1Score,this.$scope.user2Score=this.gameInfo.user2Score):(this.$scope.currentUserScore=this.gameInfo.user2Score,this.$scope.user2Score=this.gameInfo.user1Score),this.$timeout(function(){function removeFromArrayIf(arr,callback){for(var i=0;i<arr.length;){if(callback(arr[i],i))return void arr.splice(i,1);++i}}if(_this.$scope.isCurrentUserMove=!isCurrentUserMove,_this.$scope.currentWordIndex++,isCurrentUserMove){var passedWord=new Models.PassedWordInfo;passedWord.word=_this.$scope.currentWord.word,passedWord.answer=_this.$scope.currentWord.translateVariants.filter(function(i){return i.isTrue}).shift().variant,passedWord.wasPassed=moveRes.isSuccessful,_this.$scope.passedWords.push(passedWord)}_this.$scope.currentWord=_this.gameInfo.words[_this.$scope.currentWordIndex],_this.setVarinatsOrder(),removeFromArrayIf(_this.$scope.leftWords,function(w){return w.word===_this.$scope.currentWord.word}),moveRes.isLastMove?(_this.stateHandler.handleGameFinished(_this.$scope.currentUserScore.successfulMoves>_this.$scope.user2Score.successfulMoves,_this.$scope.currentUserScore.successfulMoves==_this.$scope.user2Score.successfulMoves),_this.unsetGameInfo(),_this.connectionHubService.stopHubConnection()):_this.startTimer()},1e3,!0)},GameController.prototype.setVarinatsOrder=function(){this.$scope.currentWord&&this.$scope.currentWord.translateVariants.forEach(function(value,index){return value.order=index+1})},GameController.$inject=["Services.ConnectToGameService","$scope","Services.StateHandlerService","$interval","$timeout"],GameController}();controllers.GameController=GameController,angular.module(Common.GetConstants().appName).controller("controllers.GameController",GameController)}(controllers||(controllers={})),$(function(){$("#word, .word-left-item-caption").attr("unselectable","on").css({"-moz-user-select":"-moz-none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}).bind("selectstart",function(){return!1})}),$(function(){$(document).keypress(function(e){if(13===e.which)$(".btn-submit:visible").first().click();else if(e.which>=48&&e.which<=57){var numPressed_1=e.which-48;$(".translateVariant:visible").filter(function(index,elem){return $(elem).data("order")===numPressed_1}).first().click()}})}),$(function(){$("#user2variants").bind("DOMNodeInserted",function(){return $(".translateVariant.nohover").tooltip()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy90c2NyaXB0cy9hbmltYXRpb25zL3dvcmRzTGVmdEFuaW1hdGlvbi50cyIsInNyYy90c2NyaXB0cy9jb21tb24udHMiLCJzcmMvdHNjcmlwdHMvbWl4aW5zL25nU2NoZWR1bGVyLnRzIiwic3JjL3RzY3JpcHRzL2FwcC50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvVXNlci50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvZ3JvdXAudHMiLCJzcmMvdHNjcmlwdHMvbW9kZWxzL3Njb3JlLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy90cmFuc2xhdGVWYXJpYW50LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy93b3JkLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9nYW1lLnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9nYW1lUmVzdWx0LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9tb3ZlUmVzdWx0LnRzIiwic3JjL3RzY3JpcHRzL21vZGVscy9wYXNzZWRXb3JkSW5mby50cyIsInNyYy90c2NyaXB0cy9tb2RlbHMvbGV2ZWwudHMiLCJzcmMvdHNjcmlwdHMvc2VydmljZXMvY29ubmVjdFRvR2FtZVNlcnZpY2UudHMiLCJzcmMvdHNjcmlwdHMvc2VydmljZXMvQ29va2llU2VydmljZS50cyIsInNyYy90c2NyaXB0cy9zZXJ2aWNlcy9odWJDb25uZWN0aW9uU2VydmljZS50cyIsInNyYy90c2NyaXB0cy9zZXJ2aWNlcy9zdGF0ZUhhbmRsZXJTZXJ2aWNlLnRzIiwic3JjL3RzY3JpcHRzL2NvbnRyb2xsZXJzL2Nvbm5lY3Rpb25Db250cm9sbGVyLnRzIiwic3JjL3RzY3JpcHRzL2NvbnRyb2xsZXJzL2dhbWVDb250cm9sbGVyLnRzIiwic3JjL3RzY3JpcHRzL2RvbS9kaXNhYmxlU2VsZWN0aW9uLnRzIiwic3JjL3RzY3JpcHRzL2RvbS9rZXlib2FyZEJpbmRpbmdzLnRzIiwic3JjL3RzY3JpcHRzL2RvbS90b29sdGlwLnRzIl0sIm5hbWVzIjpbImdldFdvcmRDb250YWluZXJQb3N0aW9uIiwiJGVsZW1lbnQiLCIkIiwieCIsIm9mZnNldCIsImxlZnQiLCJ5IiwidG9wIiwiQ29tbW9uIiwiR2V0Q29uc3RhbnRzIiwiQ29uc3RhbnRzIiwidGhpcyIsImFwcE5hbWUiLCJodWJDb25uZWN0VG9Hcm91cE1ldGhvZE5hbWUiLCJjb25uZWN0ZWRUb0dyb3VwIiwibGVmdEdyb3VwIiwiZ3JvdXBGdWxsZWQiLCJjb21wZXRpdGlvbkh1YiIsImdhbWVTdGFydGVkIiwiZGlkTW92ZSIsImdhbWVGaW5pc2hlZCIsImRvTW92ZSIsInBhc3NNb3ZlIiwiTWl4aW5zIiwiYWN0aW9uV3JhcHBlciIsIiRzY29wZSIsImFjdGlvbiIsInNjaGVkdWxlciIsInN0YXRlIiwiJCRwaGFzZSIsInZhbHVlXzEiLCIkYXBwbHkiLCJOZ1NjaGVkdWxlciIsImltbWVkaWF0ZVNjaGVkdWxlciIsIlJ4IiwiU2NoZWR1bGVyIiwiaW1tZWRpYXRlIiwicHJvdG90eXBlIiwibm93Iiwic2NoZWR1bGUiLCJzY2hlZHVsZUZ1dHVyZSIsImR1ZVRpbWUiLCJFcnJvciIsInNjaGVkdWxlUmVjdXJzaXZlIiwic2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUiLCJzY2hlZHVsZVBlcmlvZGljIiwicGVyaW9kIiwiY2F0Y2giLCJoYW5kbGVyIiwiQXBwIiwiR2V0QXBwIiwiYXBwIiwiY29uc3RhbnRzIiwiYW5ndWxhciIsIm1vZHVsZSIsIk1vZGVscyIsIlVzZXIiLCJHcm91cCIsIlNjb3JlIiwiVHJhbnNsYXRlVmFyaWFudCIsInZhcmlhbnQiLCJpc1RydWUiLCJpc1NlbGVjdGVkIiwiV29yZCIsIkdhbWUiLCJHYW1lUmVzdWx0IiwiTW92ZVJlc3VsdCIsIlBhc3NlZFdvcmRJbmZvIiwiTGV2ZWwiLCJTZXJ2aWNlcyIsIkNvbm5lY3RUb0dhbWVTZXJ2aWNlIiwiaHViQ29ubmVjdGlvblNlcnZpY2UiLCJjb25uZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbiIsImh1YiIsImNyZWF0ZUh1YlByb3h5IiwiY29ubmVjdFRvSHViIiwic3RhcnQiLCJvbkNvbm5lY3RUb0h1YiIsImNhbGxCYWNrIiwib25Db25uZWN0ZWRUb0h1YkNhbGxiYWNrIiwibW92ZU9yZGVyIiwid29yZCIsImludm9rZSIsImNvbm5lY3RUb05ld0dyb3VwSW1wbCIsImRpc3BsYXlOYW1lIiwibGV2ZWwiLCJjb25uZWN0VG9OZXdHcm91cCIsIl90aGlzIiwidGhlbiIsInZhbHVlcyIsImlkIiwib25Db25uZWN0ZWRUb0dyb3VwIiwib24iLCJtc2ciLCJvbkdyb3VwRnVsbGVkIiwib25Vc2VyTGVmdCIsIm9uRGlzY29ubmVjdGVkRnJvbUh1YiIsImRpc2Nvbm5lY3RlZCIsInN0b3BIdWJDb25uZWN0aW9uIiwic3RvcCIsIiRpbmplY3QiLCJzZXJ2aWNlIiwiQ29va2llU2VydmljZSIsInNldENvb2tpZSIsImNuYW1lIiwiY3ZhbHVlIiwiZXhkYXlzIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImRvY3VtZW50IiwiY29va2llIiwiZ2V0Q29va2llIiwibmFtZSIsImNhIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJIdWJDb25uZWN0aW9uU2VydmljZSIsImh1YkNvbm5lY3Rpb24iLCJ1c2VEZWZhdWx0UGF0aCIsImxvZ2dpbmciLCJ0b1Byb21pc2VDdXN0b20iLCJvYnNlcnZhYmxlIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic3Vic2NyaWJlIiwiU3RhdGVIYW5kbGVyU2VydmljZSIsIiRyb290U2NvcGUiLCIkbW9kYWwiLCJpc1N0YXJ0R2FtZVBhZ2UiLCJ1c2VySWQiLCJncm91cEZ1bGxlZE9ic2VydmFibGUiLCJTdWJqZWN0IiwiYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZSIsInVzZXJMZWZ0R3JvdXBPYnNlcnZhYmxlIiwiZ2FtZVN0YXJ0ZWRPYnNlcnZhYmxlIiwiY2FsbEluRGlnZXN0TG9vcCIsInNob3dTdGFydEdhbWVNb2RhbCIsIm9wdCIsInNjb3BlIiwiY29ubmVjdFRvR2FtZVNjb3BlIiwidGVtcGxhdGVVcmwiLCJ3aW5kb3dUZW1wbGF0ZVVybCIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJhbmltYXRpb24iLCJzaXplIiwic3RhcnRHYW1lTW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJzaG93R2FtZUZpbmlzaGVkTW9kYWxXaW5kb3ciLCJpc1dpbiIsImlzRHJhdyIsInVuZGVmaW5lZCIsImNvbnRyb2xsZXIiLCJwbGF5QWdhaW4iLCJjb25uZWN0VG9Hcm91cCIsIm1lc3NhZ2UiLCJzZXRDb25uZWN0VG9HYW1lU2NvcGUiLCJoYW5kbGVDb25uZWN0aW9uVG9Hcm91cCIsImFkZGVkVG9Hcm91cCIsInRha2UiLCJhZGRlZFRvR3JvdXBQcm9taXNlIiwiY2xvc2UiLCJ1c2VyMkNvbm5lY3RlZFByb21pc2UiLCJsb2FkaW5nR2FtZVByb21pc2UiLCJPYnNlcnZhYmxlIiwibWVyZ2UiLCJjb25uZWN0VG9Hcm91cFByb21pc2UiLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlVXNlckFkZGVkVG9Hcm91cCIsIm9uTmV4dCIsInNob3dTdGFydEdhbWVXaW5kb3ciLCJoYW5kbGVHYW1lRmluaXNoZWQiLCJoYW5kbGVHcm91cEZ1bGxlZCIsImhhbmRsZUdhbWVTdGFydGVkIiwiZ2V0VXNlcklkIiwic2V0VXNlcklkIiwiaGFuZGxlVXNlcjJMZWZ0R3JvdXAiLCJnZXRVc2VyRGlzcGxheU5hbWUiLCJoYW5kbGVEaXNjb25uZWN0ZWRGcm9tSHViIiwiY29udHJvbGxlcnMiLCJDb25uZWN0VG9HYW1lQ29udHJvbGxlciIsImNvbm5lY3Rpb25IdWJTZXJ2aWNlIiwic3RhdGVIYW5kbGVyIiwiY29vY2tpZVNlcnZpY2UiLCJkaXNwbGF5TmFtZUNvb2tpZUtleSIsImxldmVsQ29va2llS2V5IiwiaW5pdGlhbGl6ZVZpZXdNb2RlbCIsImRhdGEiLCJjYWxsIiwiYXBwbHkiLCJ2YWx1ZSIsImxldmVscyIsIkJlZ2luZXIiLCJJbnRlcm1lZGlhdGUiLCJBZHZhbmNlZCIsImNoYW5nZUxldmVsIiwiZGlzcGxheU5hbWVGcm9tQ29va2llcyIsImxldmVsRnJvbUNvb2tpZXMiLCJjb29raWVWYWx1ZSIsInBhcnNlSW50IiwiZ3JvdXBJbmZvIiwiR2FtZUNvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCIkdGltZW91dCIsInNlY29uZHNGb3JNb3ZlIiwic3RhcnRHYW1lIiwidXNlcjJkaWRNb3ZlIiwidW5zZXRHYW1lSW5mbyIsInN0b3BUaW1lciIsImdhbWVJbmZvIiwiY3VycmVudFdvcmQiLCJzZWNvbmRzRm9yTW92ZUxlZnQiLCJwZXJjZW50YWdlc0xlZnQiLCJpc0N1cnJlbnRVc2VyTW92ZSIsImN1cnJlbnRVc2VyU2NvcmUiLCJ1c2VyMlNjb3JlIiwicGFzc2VkV29yZHMiLCJsZWZ0V29yZHMiLCJnYW1lIiwid29yZHMiLCJpc1VzZXIxIiwidXNlcjEiLCJ1c2VyTnVtIiwic2h1ZmZsZSIsImFyciIsInQiLCJhcnJheSIsInNsaWNlIiwibSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInVzZXIxU2NvcmUiLCJ1c2VyMkRpc3BsYXlOYW1lIiwidXNlcjIiLCJjdXJyZW50V29yZEluZGV4Iiwic2V0VmFyaW5hdHNPcmRlciIsImN1cnJlbnRNb3ZlIiwic3RhcnRUaW1lciIsInRpbWVyUHJvbWlzZSIsImNhbmNlbCIsIm1vdmVSZXMiLCJoYW5kbGVNb3ZlIiwiZG9uZSIsIm1vdmVSZXN1bHQiLCJ0cmFuc2xhdGVWYXJpYW50cyIsImZpbHRlciIsInYiLCJzZWxlY3RlZFZhciIsImlzU2tpcHBlZCIsInNjb3JlIiwiaXNDb3JyZWN0IiwiaXNTdWNjZXNzZnVsIiwic3VjY2Vzc2Z1bE1vdmVzIiwid3JvbmdNb3ZlcyIsImVycm9yTWVzc2FnZSIsInNlbGVjdGVkVmFyaWFudEluZGV4IiwicmVtb3ZlRnJvbUFycmF5SWYiLCJjYWxsYmFjayIsInNwbGljZSIsInBhc3NlZFdvcmQiLCJhbnN3ZXIiLCJzaGlmdCIsIndhc1Bhc3NlZCIsInB1c2giLCJ3IiwiaXNMYXN0TW92ZSIsImZvckVhY2giLCJpbmRleCIsIm9yZGVyIiwiYXR0ciIsImNzcyIsIi1tb3otdXNlci1zZWxlY3QiLCItby11c2VyLXNlbGVjdCIsIi1raHRtbC11c2VyLXNlbGVjdCIsIi13ZWJraXQtdXNlci1zZWxlY3QiLCItbXMtdXNlci1zZWxlY3QiLCJ1c2VyLXNlbGVjdCIsImJpbmQiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsImZpcnN0IiwiY2xpY2siLCJudW1QcmVzc2VkXzEiLCJlbGVtIiwidG9vbHRpcCJdLCJtYXBwaW5ncyI6IkFBNkJBLFFBQUFBLDJCQUNJLEdBQUlDLFVBQVdDLEVBQUUsZ0JBRWpCLFFBQ0lDLEVBQUdGLFNBQVNHLFNBQVNDLEtBQ3JCQyxFQUFHTCxTQUFTRyxTQUFTRyxLQzFCN0IsR0FBT0MsU0FBUCxTQUFPQSxRQTZCSCxRQUFBQyxnQkFDSSxNQUFPLElBQUlDLFdBN0JmLEdBQUFBLFdBQUEsV0FhSSxRQUFBQSxhQUNJQyxLQUFLQyxRQUFVLFVBQ2ZELEtBQUtFLDRCQUE4QixVQUNuQ0YsS0FBS0csaUJBQW1CLFlBQ3hCSCxLQUFLSSxVQUFZLFdBQ2pCSixLQUFLSyxZQUFjLGNBQ25CTCxLQUFLTSxlQUFpQixpQkFDdEJOLEtBQUtPLFlBQWMsY0FDbkJQLEtBQUtRLFFBQVUsVUFDZlIsS0FBS1MsYUFBZSxlQUNwQlQsS0FBS1UsT0FBUyxTQUNkVixLQUFLVyxTQUFXLFdBRXhCLE1BQUFaLGFBMUJhRixRQUFBRSxVQUFTQSxVQTRCTEYsT0FBQUMsYUFBWUEsY0E3QjFCRCxTQUFBQSxXQ1BQLElBQU9lLFNBQVAsU0FBT0EsUUFDSCxRQUFBQyxlQUErQkMsT0FBbUJDLFFBRTlDLE1BQU8sVUFBQ0MsVUFBMEJDLE9BQzlCLElBQUtILE9BQU9JLFFBQVMsQ0FDakIsR0FBSUMsUUFJSixPQUhBTCxRQUFPTSxPQUFPLFdBQ1ZELFFBQVFKLE9BQU9DLFVBQVdDLFNBRXZCRSxRQUVYLE1BQU9KLFFBQU9DLFVBQVdDLFFBSWpDLEdBQUFJLGFBQUEsV0FJSSxRQUFBQSxhQUFZUCxRQUNSZCxLQUFLc0IsbUJBQXFCQyxHQUFHQyxVQUFVQyxVQUN2Q3pCLEtBQUtjLE9BQVNBLE9BK0R0QixNQTVESU8sYUFBQUssVUFBQUMsSUFBQSxXQUNJLE1BQU8zQixNQUFLc0IsbUJBQW1CSyxPQVNuQ04sWUFBQUssVUFBQUUsU0FBQSxTQUFpQlgsTUFBZUYsUUFDNUIsTUFBT2YsTUFBS3NCLG1CQUFtQk0sU0FBU1gsTUFBT0osY0FBY2IsS0FBS2MsT0FBUUMsVUFVOUVNLFlBQUFLLFVBQUFHLGVBQUEsU0FBdUJaLE1BQWVhLFFBQXdCZixRQUMxRCxLQUFNLElBQUlnQixPQUFNLGtCQVNwQlYsWUFBQUssVUFBQU0sa0JBQUEsU0FBMEJmLE1BQWVGLFFBQ3JDLEtBQU0sSUFBSWdCLE9BQU0sa0JBVXBCVixZQUFBSyxVQUFBTyx3QkFBQSxTQUE2RGhCLE1BQWVhLFFBQWdCZixRQUN4RixLQUFNLElBQUlnQixPQUFNLGtCQVVwQlYsWUFBQUssVUFBQVEsaUJBQUEsU0FBeUJqQixNQUFla0IsT0FBZ0JwQixRQUNwRCxLQUFNLElBQUlnQixPQUFNLGtCQUdwQlYsWUFBQUssVUFBQVUsTUFBQSxTQUFNQyxTQUNGLE1BQU9yQyxNQUFLc0IsbUJBQW1CYyxNQUFNQyxVQUU3Q2hCLGNBckVhVCxRQUFBUyxZQUFXQSxhQWZyQlQsU0FBQUEsV0NBUCxJQUFPMEIsTUFBUCxTQUFPQSxLQUlILFFBQUFDLFVBQ0ksTUFBT0MsS0FKWCxHQUFJQyxXQUFZNUMsT0FBT0MsZUFDbkIwQyxJQUFNRSxRQUFRQyxPQUFPRixVQUFVeEMsU0FBVSxxQkFBcUIsU0FBVSxhQUU1RHFDLEtBQUFDLE9BQU1BLFFBSm5CRCxNQUFBQSxRQ0RQLElBQU9NLFNBQVAsU0FBT0EsUUFDSCxHQUFBQyxNQUFBLFdBQUEsUUFBQUEsU0FHQSxNQUFBQSxRQUhhRCxRQUFBQyxLQUFJQSxNQURkRCxTQUFBQSxXQ0NQLElBQU9BLFNBQVAsU0FBT0EsUUFDSCxHQUFBRSxPQUFBLFdBQUEsUUFBQUEsVUFJQSxNQUFBQSxTQUphRixRQUFBRSxNQUFLQSxPQURmRixTQUFBQSxXQ0RQLElBQU9BLFNBQVAsU0FBT0EsUUFDSCxHQUFBRyxPQUFBLFdBQUEsUUFBQUEsVUFJQSxNQUFBQSxTQUphSCxRQUFBRyxNQUFLQSxPQURmSCxTQUFBQSxXQ0FQLElBQU9BLFNBQVAsU0FBT0EsUUFDSCxHQUFBSSxrQkFBQSxXQUNJLFFBQUFBLG9CQUNJaEQsS0FBS2lELFFBQVUsS0FDZmpELEtBQUtrRCxRQUFTLEVBQ2RsRCxLQUFLbUQsWUFBYSxFQVUxQixNQUFBSCxvQkFkYUosUUFBQUksaUJBQWdCQSxrQkFEMUJKLFNBQUFBLFdDQ1AsSUFBT0EsU0FBUCxTQUFPQSxRQUNILEdBQUFRLE1BQUEsV0FBQSxRQUFBQSxTQVVBLE1BQUFBLFFBVmFSLFFBQUFRLEtBQUlBLE1BRGRSLFNBQUFBLFdDQ1AsSUFBT0EsU0FBUCxTQUFPQSxRQUNILEdBQUFTLE1BQUEsV0FBQSxRQUFBQSxTQVlBLE1BQUFBLFFBWmFULFFBQUFTLEtBQUlBLE1BRGRULFNBQUFBLFdDRlAsSUFBT0EsU0FBUCxTQUFPQSxRQUNILEdBQUFVLFlBQUEsV0FBQSxRQUFBQSxlQUlBLE1BQUFBLGNBSmFWLFFBQUFVLFdBQVVBLFlBRHBCVixTQUFBQSxXQ0NQLElBQU9BLFNBQVAsU0FBT0EsUUFDSCxHQUFBVyxZQUFBLFdBQUEsUUFBQUEsZUFjQSxNQUFBQSxjQWRhWCxRQUFBVyxXQUFVQSxZQURwQlgsU0FBQUEsV0NEUCxJQUFPQSxTQUFQLFNBQU9BLFFBQ0gsR0FBQVksZ0JBQUEsV0FBQSxRQUFBQSxtQkFLQSxNQUFBQSxrQkFMYVosUUFBQVksZUFBY0EsZ0JBRHhCWixTQUFBQSxXQ0FQLElBQU9BLFNBQVAsU0FBT0EsU0FDSCxTQUFZYSxPQUNSQSxNQUFBQSxNQUFBLFFBQUEsR0FBQSxVQUVBQSxNQUFBQSxNQUFBLGFBQUEsR0FBQSxlQUVBQSxNQUFBQSxNQUFBLFNBQUEsR0FBQSxZQUxRYixPQUFBYSxRQUFBYixPQUFBYSxVQUFBYixRQUFBYSxPQURUYixTQUFBQSxXQ0NQLElBQU9jLFdBQVAsU0FBT0EsVUFDSCxHQUFBQyxzQkFBQSxXQU9JLFFBQUFBLHNCQUFZQyxzQkFDUjVELEtBQUt5QyxVQUFZNUMsT0FBT0MsZUFDeEJFLEtBQUs2RCxXQUFhRCxxQkFBcUJFLGdCQUN2QzlELEtBQUsrRCxJQUFNL0QsS0FBSzZELFdBQVdHLGVBQWVoRSxLQUFLeUMsVUFBVW5DLGdCQXNFakUsTUFuRVlxRCxzQkFBQWpDLFVBQUF1QyxhQUFSLFdBQ0ksTUFBT2pFLE1BQUsrRCxJQUFJRixXQUFXSyxTQUd4QlAscUJBQUFqQyxVQUFBeUMsZUFBUCxTQUFzQkMsVUFDbEJwRSxLQUFLcUUseUJBQTJCRCxVQUc3QlQscUJBQUFqQyxVQUFBaEIsT0FBUCxTQUFjNEQsVUFBbUJDLEtBQWN0QixTQUMzQyxNQUFPakQsTUFBSytELElBQUlTLE9BQU94RSxLQUFLeUMsVUFBVS9CLE9BQVE0RCxVQUFXQyxLQUFNdEIsVUFHNURVLHFCQUFBakMsVUFBQWYsU0FBUCxTQUFnQjJELFdBQ1osTUFBT3RFLE1BQUsrRCxJQUFJUyxPQUFPeEUsS0FBS3lDLFVBQVU5QixTQUFVMkQsWUFHNUNYLHFCQUFBakMsVUFBQStDLHNCQUFSLFNBQThCQyxZQUFxQkMsT0FDL0MsTUFBTzNFLE1BQUsrRCxJQUFJUyxPQUFPeEUsS0FBS3lDLFVBQVV2Qyw0QkFBNkJ3RSxZQUFhQyxRQUc3RWhCLHFCQUFBakMsVUFBQWtELGtCQUFQLFNBQXlCRixZQUFxQkMsT0FBOUMsR0FBQUUsT0FBQTdFLElBQ0ksT0FBOEIsS0FBMUJBLEtBQUs2RCxXQUFXNUMsTUFDVGpCLEtBQUtpRSxlQUNIYSxLQUFLLFNBQUFDLFFBRUYsTUFEQUYsT0FBS1IseUJBQXlCVSxPQUFPQyxJQUM5QkgsTUFBS2QsSUFBSVMsT0FBT0ssTUFBS3BDLFVBQVV2Qyw0QkFBNkJ3RSxZQUFhQyxTQUl6RjNFLEtBQUsrRCxJQUFJUyxPQUFPeEUsS0FBS3lDLFVBQVV2Qyw0QkFBNkJ3RSxZQUFhQyxRQUc3RWhCLHFCQUFBakMsVUFBQXVELG1CQUFQLFNBQTBCYixVQUN0QnBFLEtBQUsrRCxJQUFJbUIsR0FBR2xGLEtBQUt5QyxVQUFVdEMsaUJBQWtCLFNBQUNnRixLQUFRLE1BQUFmLFVBQVNlLFFBRzVEeEIscUJBQUFqQyxVQUFBMEQsY0FBUCxTQUFxQmhCLFVBQ2pCcEUsS0FBSytELElBQUltQixHQUFHbEYsS0FBS3lDLFVBQVVwQyxZQUFhLFNBQUM4RSxLQUFRLE1BQUFmLFVBQVNlLFFBR3ZEeEIscUJBQUFqQyxVQUFBMkQsV0FBUCxTQUFrQmpCLFVBQ2RwRSxLQUFLK0QsSUFBSW1CLEdBQUdsRixLQUFLeUMsVUFBVXJDLFVBQVcsU0FBQytFLEtBQVEsTUFBQWYsVUFBU2UsSUFBSSxPQUd6RHhCLHFCQUFBakMsVUFBQW5CLFlBQVAsU0FBbUI2RCxVQUNmcEUsS0FBSytELElBQUltQixHQUFHbEYsS0FBS3lDLFVBQVVsQyxZQUFhLFNBQUM0RSxLQUNyQ2YsU0FBU2UsUUFJVnhCLHFCQUFBakMsVUFBQWxCLFFBQVAsU0FBZTRELFVBQ1hwRSxLQUFLK0QsSUFBSW1CLEdBQUdsRixLQUFLeUMsVUFBVWpDLFFBQVMsU0FBQzJFLEtBQVEsTUFBQWYsVUFBU2UsUUFHbkR4QixxQkFBQWpDLFVBQUFqQixhQUFQLFNBQW9CMkQsVUFDaEJwRSxLQUFLK0QsSUFBSW1CLEdBQUdsRixLQUFLeUMsVUFBVWhDLGFBQWMsU0FBQzBFLEtBQVEsTUFBQWYsVUFBU2UsSUFBSSxPQUc1RHhCLHFCQUFBakMsVUFBQTRELHNCQUFQLFNBQTZCbEIsVUFDekJwRSxLQUFLNkQsV0FBVzBCLGFBQWFuQixXQUcxQlQscUJBQUFqQyxVQUFBOEQsa0JBQVAsV0FDa0MsSUFBMUJ4RixLQUFLNkQsV0FBVzVDLE9BQ2hCakIsS0FBSzZELFdBQVc0QixRQXZFakI5QixxQkFBQStCLFNBQVcsaUNBMEV0Qi9CLHVCQWhGYUQsVUFBQUMscUJBQW9CQSxxQkFrRmpDakIsUUFBUUMsT0FBTzlDLE9BQU9DLGVBQWVHLFNBQVMwRixRQUFRLGdDQUFpQ2hDLHVCQW5GcEZELFdBQUFBLGFDQVAsSUFBT0EsV0FBUCxTQUFPQSxVQUNILEdBQUFrQyxlQUFBLFdBQUEsUUFBQUEsa0JBMEJBLE1BekJJQSxlQUFBbEUsVUFBQW1FLFVBQUEsU0FBVUMsTUFBZUMsT0FBYUMsUUFDN0JBLFNBQ0RBLE9BQVMsS0FHYixJQUFJQyxHQUFJLEdBQUlDLEtBQ1pELEdBQUVFLFFBQVFGLEVBQUVHLFVBQW9CLEdBQVBKLE9BQVUsR0FBRyxHQUFHLElBQ3pDLElBQUlLLFNBQVUsV0FBWUosRUFBRUssYUFDNUJDLFVBQVNDLE9BQVNWLE1BQVEsSUFBTUMsT0FBUyxJQUFNTSxRQUFVLFdBRzdEVCxjQUFBbEUsVUFBQStFLFVBQUEsU0FBVVgsT0FHTixJQUFJLEdBRkFZLE1BQU9aLE1BQVEsSUFDZmEsR0FBS0osU0FBU0MsT0FBT0ksTUFBTSxLQUN2QkMsRUFBSSxFQUFHQSxFQUFJRixHQUFHRyxPQUFRRCxJQUFLLENBRS9CLElBREEsR0FBSUUsR0FBSUosR0FBR0UsR0FDVyxLQUFmRSxFQUFFQyxPQUFPLElBQ1pELEVBQUlBLEVBQUVFLFVBQVUsRUFFcEIsSUFBdUIsR0FBbkJGLEVBQUVHLFFBQVFSLE1BQ1YsTUFBT0ssR0FBRUUsVUFBVVAsS0FBS0ksT0FBUUMsRUFBRUQsUUFHMUMsTUFBTyxJQUVmbEIsZ0JBMUJhbEMsVUFBQWtDLGNBQWFBLGNBMkIxQmxELFFBQVFDLE9BQU85QyxPQUFPQyxlQUFlRyxTQUFTMEYsUUFBUSx5QkFBMEJDLGdCQTVCN0VsQyxXQUFBQSxhQ0FQLElBQU9BLFdBQVAsU0FBT0EsVUFDSCxHQUFBeUQsc0JBQUEsV0FBQSxRQUFBQSx5QkFVQSxNQVBXQSxzQkFBQXpGLFVBQUFvQyxjQUFQLFdBS0ksTUFKS3FELHNCQUFxQnRELGFBQ3RCc0QscUJBQXFCdEQsV0FBYXRFLEVBQUU2SCxjQUFjLFlBQWNDLGdCQUFnQixJQUNoRkYscUJBQXFCdEQsV0FBV3lELFNBQVUsR0FFdkNILHFCQUFxQnRELFlBRXBDc0QsdUJBVmF6RCxVQUFBeUQscUJBQW9CQSxxQkFXakN6RSxRQUFRQyxPQUFPOUMsT0FBT0MsZUFBZUcsU0FBUzBGLFFBQVEsZ0NBQWlDd0IsdUJBWnBGekQsV0FBQUEsYUNDUCxJQUFPQSxXQUFQLFNBQU9BLFVBQ0gsUUFBQTZELGlCQUE0QkMsWUFDeEIsR0FBSUMsU0FBVSxHQUFJQyxTQUFhLFNBQUFDLFNBQzNCSCxXQUFXSSxVQUFVLFdBQ2pCRCxlQUlSLE9BQU9GLFNBb0JYLEdBQUFJLHFCQUFBLFdBYUksUUFBQUEscUJBQVlDLFdBQW1DQyxRQUMzQy9ILEtBQUt5QyxVQUFZNUMsT0FBT0MsZUFDeEJFLEtBQUsrSCxPQUFTQSxPQUNkL0gsS0FBSzhILFdBQWFBLFdBQ2xCOUgsS0FBSzhILFdBQVdFLGlCQUFrQixFQUNsQ2hJLEtBQUs4SCxXQUFXRyxPQUFTLEtBQ3pCakksS0FBS2tJLHNCQUF3QixHQUFJM0csSUFBRzRHLFFBQ3BDbkksS0FBS29JLHVCQUF5QixHQUFJN0csSUFBRzRHLFFBQ3JDbkksS0FBS3FJLHdCQUEwQixHQUFJOUcsSUFBRzRHLFFBQ3RDbkksS0FBS3NJLHNCQUF3QixHQUFJL0csSUFBRzRHLFFBOEo1QyxNQTNKWU4scUJBQUFuRyxVQUFBNkcsaUJBQVIsU0FBeUJ4SCxRQUNqQmYsS0FBSzhILFdBQVc1RyxRQUNoQkgsU0FFQWYsS0FBSzhILFdBQVcxRyxPQUFPLFdBQ25CTCxZQUtKOEcsb0JBQUFuRyxVQUFBOEcsbUJBQVIsV0FDSSxHQUFJQyxPQUNBQSxLQUFJQyxNQUFRMUksS0FBSzJJLG1CQUNqQkYsSUFBSUcsWUFBYyxzQkFDbEJILElBQUlJLGtCQUFvQixzQkFDeEJKLElBQUlLLFNBQVcsU0FDZkwsSUFBSU0sVUFBVyxFQUNmTixJQUFJTyxXQUFZLEVBQ2hCUCxJQUFJUSxLQUFPLEtBQ1hqSixLQUFLa0osdUJBQXlCbEosS0FBSytILE9BQU9vQixLQUFLVixNQUcvQ1osb0JBQUFuRyxVQUFBMEgsNEJBQVIsU0FBb0NDLE1BQWlCQyxRQUNqRCxHQUFjQyxTQUFWRixPQUFrQ0UsU0FBWEQsT0FDdkIsS0FBTSwwQ0FHVixJQUFJWCxvQkFBcUIzSSxLQUFLMkksbUJBQzFCRixNQUNBQSxLQUFJZSxXQUFhLFNBQVMxSSxRQUN0QkEsT0FBTzJJLFVBQVlkLG1CQUFtQmUsZUFFbENKLE9BQ0F4SSxPQUFPNkksUUFBVSxvREFDVk4sTUFDUHZJLE9BQU82SSxRQUFVLHNEQUVqQjdJLE9BQU82SSxRQUFVLHlIQUd6QmxCLElBQUlHLFlBQWMsb0JBQ2xCSCxJQUFJSSxrQkFBb0Isc0JBQ3hCSixJQUFJSyxTQUFXLFNBQ2ZMLElBQUlNLFVBQVcsRUFDZk4sSUFBSU8sV0FBWSxFQUNoQlAsSUFBSVEsS0FBTyxLQUNYakosS0FBS2tKLHVCQUF5QmxKLEtBQUsrSCxPQUFPb0IsS0FBS1YsTUFHaERaLG9CQUFBbkcsVUFBQWtJLHNCQUFQLFNBQTZCakIsb0JBQ3pCM0ksS0FBSzJJLG1CQUFxQkEsb0JBR3ZCZCxvQkFBQW5HLFVBQUFtSSx3QkFBUCxTQUErQnBDLFNBQS9CLEdBQUE1QyxPQUFBN0UsSUFDSUEsTUFBS3VJLGlCQUFpQixXQUNWLEdBQUl1QixjQUFlakYsTUFBS3VELHVCQUNTMkIsS0FBSyxFQUV0Q2xGLE9BQUtpRCxXQUFXa0Msb0JBQXNCekMsZ0JBQWdCdUMsY0FFdERBLGFBQWFsQyxVQUFVLFdBQ2YvQyxNQUFLcUUseUJBQ0xyRSxNQUFLcUUsdUJBQXVCZSxRQUM1QnBGLE1BQUtxRSx1QkFBeUIsTUFHbENyRSxNQUFLaUQsV0FBV0UsaUJBQWtCLEdBR3RDLElBQUkzSCxhQUFjd0UsTUFBS3FELHNCQUNBNkIsS0FBSyxFQUc1QmxGLE9BQUtpRCxXQUFXb0Msc0JBQXdCM0MsZ0JBQWdCbEgsYUFFeERBLFlBQVl1SCxVQUFVLFdBQ2QvQyxNQUFLaUQsV0FBV3FDLG1CQUFxQjVDLGdCQUFnQmhHLEdBQUc2SSxXQUFXQyxNQUFNeEYsTUFBS3dELHdCQUF3QjBCLEtBQUssR0FDbENsRixNQUFLeUQsc0JBQXNCeUIsS0FBSyxJQUN0Q0EsS0FBSyxNQUdoRmxGLE1BQUs4RCxtQkFBbUIyQixzQkFBd0I3QyxVQUc1REEsUUFBUThDLEtBQUssU0FBQ0MsT0FDVkMsUUFBUUMsSUFBSSxzQkFBd0JGLFVBSXJDM0Msb0JBQUFuRyxVQUFBaUosdUJBQVAsV0FDSTNLLEtBQUtvSSx1QkFBdUJ3QyxZQUd6Qi9DLG9CQUFBbkcsVUFBQW1KLG9CQUFQLFdBQUEsR0FBQWhHLE9BQUE3RSxJQUNJQSxNQUFLdUksaUJBQWlCLFdBQ1YxRCxNQUFLMkQsd0JBSWRYLG9CQUFBbkcsVUFBQW9KLG1CQUFQLFNBQTBCekIsTUFBaUJDLFFBQTNDLEdBQUF6RSxPQUFBN0UsSUFDSUEsTUFBS3VJLGlCQUFpQixXQUNsQjFELE1BQUtpRCxXQUFXRSxpQkFBa0IsRUFDbENuRCxNQUFLdUUsNEJBQTRCQyxNQUFPQyxXQUl6Q3pCLG9CQUFBbkcsVUFBQXFKLGtCQUFQLFdBQUEsR0FBQWxHLE9BQUE3RSxJQUVJQSxNQUFLdUksaUJBQWlCLFdBQ2xCMUQsTUFBS3FELHNCQUFzQjBDLGNBSTVCL0Msb0JBQUFuRyxVQUFBc0osa0JBQVAsV0FBQSxHQUFBbkcsT0FBQTdFLElBQ0lBLE1BQUt1SSxpQkFBaUIsV0FDbEIxRCxNQUFLaUQsV0FBV0UsaUJBQWtCLEVBRTlCbkQsTUFBS3FFLHlCQUNMckUsTUFBS3FFLHVCQUF1QmUsUUFDNUJwRixNQUFLcUUsdUJBQXlCLFFBSXRDbEosS0FBS3NJLHNCQUFzQnNDLFlBR3hCL0Msb0JBQUFuRyxVQUFBdUosVUFBUCxXQUNJLE1BQU9qTCxNQUFLOEgsV0FBV0csUUFHcEJKLG9CQUFBbkcsVUFBQXdKLFVBQVAsU0FBaUJqRCxRQUNiakksS0FBSzhILFdBQVdHLE9BQVNBLFFBR3RCSixvQkFBQW5HLFVBQUF5SixxQkFBUCxXQUFBLEdBQUF0RyxPQUFBN0UsSUFDSUEsTUFBS3VJLGlCQUFpQixXQUNsQjFELE1BQUt3RCx3QkFBd0J1QyxXQUM3Qi9GLE1BQUtpRCxXQUFXRSxpQkFBa0IsRUFDbENuRCxNQUFLMkQsd0JBSU5YLG9CQUFBbkcsVUFBQTBKLG1CQUFQLFdBQ0ksTUFBT3BMLE1BQUs4SCxXQUFXcEQsYUFHcEJtRCxvQkFBQW5HLFVBQUEySiwwQkFBUCxXQUFBLEdBQUF4RyxPQUFBN0UsSUFDUUEsTUFBSzhILFdBQVdFLGlCQUNoQmhJLEtBQUt1SSxpQkFBaUIsV0FFbEIxRCxNQUFLaUQsV0FBV0UsaUJBQWtCLEVBQ2xDbkQsTUFBSzJELHdCQXBLVlgsb0JBQUFuQyxTQUFXLGFBQWMsYUF3S3BDbUMsc0JBcExhbkUsVUFBQW1FLG9CQUFtQkEsb0JBc0xoQ25GLFFBQVFDLE9BQU85QyxPQUFPQyxlQUFlRyxTQUFTMEYsUUFBUSwrQkFBZ0NrQyxzQkFsTm5GbkUsV0FBQUEsYUNBUCxJQUFPNEgsY0FBUCxTQUFPQSxhQUNILEdBQUFDLHlCQUFBLFdBV0ksUUFBQUEseUJBQVlDLHFCQUNBMUssT0FDQTJLLGFBQ0EzRCxXQUNBNEQsZ0JBQ1IxTCxLQUFLd0wscUJBQXVCQSxxQkFDNUJ4TCxLQUFLYyxPQUFTQSxPQUNkZCxLQUFLeUwsYUFBZUEsYUFDcEJ6TCxLQUFLOEgsV0FBYUEsV0FDbEI5SCxLQUFLMEwsZUFBaUJBLGVBQ3RCMUwsS0FBSzJMLHFCQUF1QixjQUM1QjNMLEtBQUs0TCxlQUFpQixZQUN0QjVMLEtBQUs2TCxzQkE2RWIsTUExRVlOLHlCQUFBN0osVUFBQW1LLG9CQUFSLFdBQUEsR0FBQWhILE9BQUE3RSxJQUNJQSxNQUFLeUwsYUFBYTdCLHNCQUFzQjVKLEtBQUtjLFFBRTdDZCxLQUFLd0wscUJBQXFCbkcsV0FBVyxTQUFBeUcsTUFBUSxNQUFBakgsT0FBS1EsV0FBVzBHLEtBQUtsSCxNQUFNaUgsUUFDeEU5TCxLQUFLd0wscUJBQXFCcEcsY0FBYyxTQUFBMEcsTUFBUSxNQUFBakgsT0FBS08sY0FBYzJHLEtBQUtsSCxNQUFNaUgsUUFDOUU5TCxLQUFLd0wscUJBQXFCdkcsbUJBQW1CLFNBQUE2RyxNQUFRLE1BQUFqSCxPQUFLSSxtQkFBbUI4RyxLQUFLbEgsTUFBTWlILFFBQ3hGOUwsS0FBS2MsT0FBTzRJLGVBQWlCLFdBQU0sTUFBQTdFLE9BQUs2RSxlQUFlc0MsTUFBTW5ILFFBRTdEN0UsS0FBS3dMLHFCQUFxQnJILGVBQWUsU0FBQThILE9BQ3JDcEgsTUFBSzRHLGFBQWFQLFVBQVVlLFNBRWhDak0sS0FBS3dMLHFCQUFxQmxHLHNCQUFzQixXQUFNLE1BQUFULE9BQUs0RyxhQUFhSiw4QkFFeEVyTCxLQUFLYyxPQUFPb0wsU0FDV3ZILE1BQU8vQixPQUFPYSxNQUFNMEksUUFBU3pGLEtBQU0sWUFDbkMvQixNQUFPL0IsT0FBT2EsTUFBTTJJLGFBQWMxRixLQUFNLFlBQ3hDL0IsTUFBTy9CLE9BQU9hLE1BQU00SSxTQUFVM0YsS0FBTSxZQUUzRDFHLEtBQUtjLE9BQU93TCxZQUFjLFNBQUMzSCxPQUFpQyxNQUFBRSxPQUFLaUQsV0FBV25ELE1BQVFBLE1BRXBGLElBQUk0SCx3QkFBeUIsa0JBQ3pCQyxpQkFBbUIsQ0FDdkIsS0FDSSxHQUFJQyxhQUFjek0sS0FBSzBMLGVBQWVqRixVQUFVekcsS0FBSzJMLHFCQUNqQyxNQUFoQmMsY0FDQUYsdUJBQXlCRSxhQUc3QkEsWUFBY3pNLEtBQUswTCxlQUFlakYsVUFBVXpHLEtBQUs0TCxnQkFDN0IsS0FBaEJhLGNBQ0FELGlCQUFtQkUsU0FBU0QsY0FBZ0JELGtCQUdwRCxNQUFPaEMsT0FDSEMsUUFBUUMsSUFBSUYsT0FHaEJ4SyxLQUFLOEgsV0FBV3BELFlBQWM2SCx1QkFDOUJ2TSxLQUFLOEgsV0FBV25ELE1BQVEzRSxLQUFLYyxPQUFPb0wsT0FBT00saUJBQW1CLEdBRTlEeE0sS0FBS3lMLGFBQWFaLHVCQUdkVSx3QkFBQTdKLFVBQUEwRCxjQUFSLFNBQXNCdUgsV0FDbEIzTSxLQUFLMk0sVUFBWUEsVUFDakIzTSxLQUFLeUwsYUFBYVYscUJBR2RRLHdCQUFBN0osVUFBQTJELFdBQVIsU0FBbUJzSCxXQUNmM00sS0FBSzJNLFVBQVksS0FDakIzTSxLQUFLeUwsYUFBYU4sd0JBR2RJLHdCQUFBN0osVUFBQWdJLGVBQVIsV0FDSSxHQUFJaEYsYUFBYzFFLEtBQUt5TCxhQUFhTCxxQkFDaEN6RyxNQUFRM0UsS0FBSzhILFdBQVduRCxNQUFNQSxLQUVsQyxLQUNJM0UsS0FBSzBMLGVBQWU3RixVQUFVN0YsS0FBSzJMLHFCQUFzQmpILGFBQ3pEMUUsS0FBSzBMLGVBQWU3RixVQUFVN0YsS0FBSzRMLGVBQWdCakgsT0FFdkQsTUFBTzZGLE9BQ0hDLFFBQVFDLElBQUlGLE9BR2hCLEdBQUkvQyxTQUFVekgsS0FBS3dMLHFCQUFxQjVHLGtCQUFrQkYsWUFDQUMsTUFDMUQzRSxNQUFLeUwsYUFBYTVCLHdCQUF3QnBDLFVBR3RDOEQsd0JBQUE3SixVQUFBdUQsbUJBQVIsU0FBMkJnRCxRQUN2QmpJLEtBQUt5TCxhQUFhUCxVQUFVakQsUUFDNUJqSSxLQUFLeUwsYUFBYWQsMEJBeEZmWSx3QkFBQTdGLFNBQVcsZ0NBQWlDLFNBQVUsK0JBQWdDLGFBQWMsMEJBMEYvRzZGLDBCQXBHYUQsYUFBQUMsd0JBQXVCQSx3QkFzR3BDN0ksUUFBUUMsT0FBTzlDLE9BQU9DLGVBQWVHLFNBQVN1SixXQUFXLHNDQUF1QytCLDBCQXZHN0ZELGNBQUFBLGdCQ0FQLElBQU9BLGNBQVAsU0FBT0EsYUFDSCxHQUFBc0IsZ0JBQUEsV0FhSSxRQUFBQSxnQkFBWXBCLHFCQUFpRDFLLE9BQ2pEMkssYUFDQW9CLFVBQ0FDLFVBQ1I5TSxLQUFLd0wscUJBQXVCQSxxQkFDNUJ4TCxLQUFLYyxPQUFTQSxPQUNkZCxLQUFLeUwsYUFBZUEsYUFDcEJ6TCxLQUFLNk0sVUFBWUEsVUFDakI3TSxLQUFLK00sZUFBaUIsR0FDdEIvTSxLQUFLOE0sU0FBV0EsU0FDaEI5TSxLQUFLNkwsc0JBK09iLE1BNU9ZZSxnQkFBQWxMLFVBQUFtSyxvQkFBUixXQUFBLEdBQUFoSCxPQUFBN0UsSUFDSUEsTUFBS3dMLHFCQUFxQmpMLFlBQVksU0FBQXVMLE1BQVEsTUFBQWpILE9BQUttSSxVQUFVakIsS0FBS2xILE1BQU1pSCxRQUN4RTlMLEtBQUt3TCxxQkFBcUJoTCxRQUFRLFNBQUFzTCxNQUFRLE1BQUFqSCxPQUFLb0ksYUFBYWxCLEtBQUtsSCxNQUFNaUgsUUFDdkU5TCxLQUFLYyxPQUFPSixPQUFTLFNBQUN1QyxTQUFvQixNQUFBNEIsT0FBS25FLE9BQU9xTCxLQUFLbEgsTUFBTTVCLFVBQ2pFakQsS0FBS3dMLHFCQUFxQm5HLFdBQVcsV0FBTSxNQUFBUixPQUFLUSxXQUFXMEcsS0FBS2xILFNBQ2hFN0UsS0FBS2tOLGlCQUdETixlQUFBbEwsVUFBQTJELFdBQVIsV0FDSXJGLEtBQUttTixZQUNMbk4sS0FBS2tOLGlCQUdETixlQUFBbEwsVUFBQXdMLGNBQVIsV0FBQSxHQUFBckksT0FBQTdFLElBQ0lBLE1BQUtvTixTQUFXLEtBRWhCcE4sS0FBS3VJLGlCQUFpQixXQUNsQjFELE1BQUsvRCxPQUFPdU0sWUFBYyxLQUMxQnhJLE1BQUsvRCxPQUFPd00sbUJBQXFCLEtBQ2pDekksTUFBSy9ELE9BQU95TSxnQkFBa0IsS0FDOUIxSSxNQUFLL0QsT0FBTzBNLGtCQUFvQixLQUNoQzNJLE1BQUsvRCxPQUFPMk0saUJBQW1CLEtBQy9CNUksTUFBSy9ELE9BQU80TSxXQUFhLEtBQ3pCN0ksTUFBSy9ELE9BQU82TSxlQUNaOUksTUFBSy9ELE9BQU84TSxnQkFJWmhCLGVBQUFsTCxVQUFBc0wsVUFBUixTQUFrQmEsTUFBbEIsR0FBQWhKLE9BQUE3RSxJQUNJQSxNQUFLb04sU0FBV1MsS0FDaEI3TixLQUFLOE4sTUFBUUQsS0FBS0MsS0FFbEIsSUFBTUMsU0FBVUYsS0FBS0csTUFBTS9GLFNBQVdqSSxLQUFLeUwsYUFBYVIsV0FDeERqTCxNQUFLaU8sUUFBVUYsUUFBVSxFQUFJLEVBQzdCL04sS0FBS2MsT0FBT00sT0FBTyxXQVVULFFBQUE4TSxTQUFpQkMsS0FLWCxJQUpBLEdBQ3NCQyxHQUFHdkgsRUFEckJ3SCxNQUFRRixJQUFJRyxNQUFNLEdBQ2xCQyxFQUFJRixNQUFNdkgsT0FHUHlILEdBRUgxSCxFQUFJMkgsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV0gsS0FHL0JILEVBQUlDLE1BQU1FLEdBQ1ZGLE1BQU1FLEdBQUtGLE1BQU14SCxHQUNqQndILE1BQU14SCxHQUFLdUgsQ0FHZixPQUFPQyxPQXhCYnhKLE1BQUsvRCxPQUFPMk0saUJBQW1CTSxRQUFVRixLQUFLYyxXQUFhZCxLQUFLSCxXQUNoRTdJLE1BQUsvRCxPQUFPNE0sV0FBY0ssUUFBNEJGLEtBQUtILFdBQXZCRyxLQUFLYyxXQUN6QzlKLE1BQUsvRCxPQUFPOE4saUJBQW9CYixRQUFtQ0YsS0FBS2dCLE1BQU1uSyxZQUFwQ21KLEtBQUtHLE1BQU10SixZQUNyREcsTUFBSy9ELE9BQU9nTyxpQkFBbUIsRUFDL0JqSyxNQUFLL0QsT0FBT3VNLFlBQWN4SSxNQUFLaUosTUFBTSxHQUNyQ2pKLE1BQUtrSyxtQkFDTGxLLE1BQUsvRCxPQUFPME0sa0JBQXFCTyxTQUF5QyxJQUE5QmxKLE1BQUt1SSxTQUFTNEIsY0FDckJqQixTQUF5QyxJQUE5QmxKLE1BQUt1SSxTQUFTNEIsWUFtQjlEbkssTUFBSy9ELE9BQU84TSxVQUFZTSxRQUFRckosTUFBS2lKLE1BQU1RLE1BQU0sTUFHM0R0TyxLQUFLeUwsYUFBYVQsb0JBQ2xCaEwsS0FBS2lQLGNBR0RyQyxlQUFBbEwsVUFBQTZHLGlCQUFSLFNBQXlCeEgsUUFDakJmLEtBQUtjLE9BQU9JLFFBQ1pILFNBRUFmLEtBQUtjLE9BQU9NLE9BQU8sV0FDZkwsWUFLSjZMLGVBQUFsTCxVQUFBdU4sV0FBUixXQUFBLEdBQUFwSyxPQUFBN0UsSUFDSSxJQUFJQSxLQUFLa1AsYUFDTCxLQUFNLGtDQUdWbFAsTUFBS3VJLGlCQUFpQixXQUNsQjFELE1BQUsvRCxPQUFPd00sbUJBQXFCekksTUFBS2tJLGVBQ3RDbEksTUFBSy9ELE9BQU95TSxnQkFBa0IsTUFHbEN2TixLQUFLa1AsYUFBZWxQLEtBQUs2TSxVQUFVLFdBQy9CaEksTUFBSy9ELE9BQU93TSxxQkFDWnpJLE1BQUsvRCxPQUFPeU0sZ0JBQWtCMUksTUFBSy9ELE9BQU93TSxtQkFBcUIsR0FBSyxJQUU3QixJQUFuQ3pJLE1BQUsvRCxPQUFPd00sb0JBQ1R6SSxNQUFLL0QsT0FBTzBNLG1CQUNmM0ksTUFBS2xFLFlBRVYsSUFBTSxLQUdMaU0sZUFBQWxMLFVBQUF5TCxVQUFSLFdBQ1NuTixLQUFLa1AsZUFJVmxQLEtBQUs2TSxVQUFVc0MsT0FBT25QLEtBQUtrUCxjQUMzQmxQLEtBQUtrUCxhQUFlLE9BR2hCdEMsZUFBQWxMLFVBQUF1TCxhQUFSLFNBQXFCbUMsU0FBckIsR0FBQXZLLE9BQUE3RSxJQUNJQSxNQUFLYyxPQUFPTSxPQUFPLFdBQ2Z5RCxNQUFLd0ssV0FBV0QsU0FBUyxNQUl6QnhDLGVBQUFsTCxVQUFBZixTQUFSLFdBQUEsR0FBQWtFLE9BQUE3RSxJQUNJQSxNQUFLd0wscUJBQXFCN0ssU0FBU1gsS0FBS2lPLFNBQ2RxQixLQUFLLFNBQUNDLFlBQ0gxSyxNQUFLL0QsT0FBT00sT0FBTyxXQUNmeUQsTUFBS3dLLFdBQVdFLFlBQVksUUFLekQzQyxlQUFBbEwsVUFBQWhCLE9BQVIsU0FBZXVDLFNBQWYsR0FBQTRCLE9BQUE3RSxJQUVJLElBQ29CLElBRGhCQSxLQUFLYyxPQUFPdU0sWUFBWW1DLGtCQUFrQkMsT0FBTyxTQUFBQyxHQUFLLE1BQUFBLEdBQUV2TSxhQUNuRDJELFNBSVQ5RyxLQUFLbU4sWUFDa0MsSUFBbkNuTixLQUFLYyxPQUFPd00sb0JBQWhCLENBS0EsR0FBSXFDLGFBQWMzUCxLQUFLYyxPQUFPdU0sWUFBWW1DLGtCQUFrQkMsT0FBTyxTQUFBQyxHQUFLLE1BQUFBLEdBQUV6TSxVQUFZQSxVQUFTLEVBQzFGME0sYUFHREEsWUFBWXhNLFlBQWEsRUFGekJzSCxRQUFRQyxJQUFJLDBCQUtoQjFLLEtBQUt3TCxxQkFBcUI5SyxPQUFPVixLQUFLaU8sUUFBU2pPLEtBQUtjLE9BQU91TSxZQUFZOUksS0FBTXRCLFNBQ25EcU0sS0FBSyxTQUFDQyxZQUNIMUssTUFBSy9ELE9BQU9NLE9BQU8sV0FDZnlELE1BQUt3SyxXQUFXRSxZQUFZLFNBS3pEM0MsZUFBQWxMLFVBQUEyTixXQUFSLFNBQW1CRCxRQUE0QjVCLG1CQUEvQyxHQUFBM0ksT0FBQTdFLElBQ0lBLE1BQUttTixZQUtEaUMsUUFBUVEsWUFDUjVQLEtBQUtjLE9BQU93TSxtQkFBcUIsRUFDakN0TixLQUFLYyxPQUFPeU0sZ0JBQWtCLEVBR2xDLElBQUlFLGtCQUFvQyxJQUFqQnpOLEtBQUtpTyxRQUFnQmpPLEtBQUtvTixTQUFTdUIsV0FBYTNPLEtBQUtvTixTQUFTTSxXQUNqRkEsV0FBOEIsSUFBakIxTixLQUFLaU8sUUFBZ0JqTyxLQUFLb04sU0FBU00sV0FBYTFOLEtBQUtvTixTQUFTdUIsV0FFM0VrQixNQUFRckMsa0JBQW9CQyxpQkFBbUJDLFVBRTlDMEIsU0FBUVUsVUFFRlYsUUFBUVcsYUFDZkYsTUFBTUcsa0JBRU5ILE1BQU1JLGFBSk54RixRQUFRRCxNQUFNNEUsUUFBUWMsY0FPdEJkLFFBQVFlLHdCQUF5QixJQUNqQ25RLEtBQUtjLE9BQU91TSxZQUFZbUMsa0JBQWtCSixRQUFRZSxzQkFBc0JoTixZQUFhLEdBR3BFLElBQWpCbkQsS0FBS2lPLFNBQ0xqTyxLQUFLYyxPQUFPMk0saUJBQW1Cek4sS0FBS29OLFNBQVN1QixXQUM3QzNPLEtBQUtjLE9BQU80TSxXQUFhMU4sS0FBS29OLFNBQVNNLGFBRXZDMU4sS0FBS2MsT0FBTzJNLGlCQUFtQnpOLEtBQUtvTixTQUFTTSxXQUM3QzFOLEtBQUtjLE9BQU80TSxXQUFhMU4sS0FBS29OLFNBQVN1QixZQUczQzNPLEtBQUs4TSxTQUFTLFdBY1YsUUFBQXNELG1CQUEyQmpDLElBQXlCa0MsVUFFaEQsSUFEQSxHQUFJeEosR0FBSSxFQUNEQSxFQUFJc0gsSUFBSXJILFFBQVEsQ0FDbkIsR0FBSXVKLFNBQVNsQyxJQUFJdEgsR0FBSUEsR0FFakIsV0FEQXNILEtBQUltQyxPQUFPekosRUFBRyxLQUlaQSxHQW5CZCxHQUZBaEMsTUFBSy9ELE9BQU8wTSxtQkFBcUJBLGtCQUNqQzNJLE1BQUsvRCxPQUFPZ08sbUJBQ1J0QixrQkFBbUIsQ0FDbkIsR0FBSStDLFlBQWEsR0FBSTNOLFFBQU9ZLGNBQzVCK00sWUFBV2hNLEtBQU9NLE1BQUsvRCxPQUFPdU0sWUFBWTlJLEtBQzFDZ00sV0FBV0MsT0FBUzNMLE1BQUsvRCxPQUFPdU0sWUFBWW1DLGtCQUN2Q0MsT0FBTyxTQUFBNUksR0FBSyxNQUFBQSxHQUFFM0QsU0FDZHVOLFFBQ0F4TixRQUNMc04sV0FBV0csVUFBWXRCLFFBQVFXLGFBQy9CbEwsTUFBSy9ELE9BQU82TSxZQUFZZ0QsS0FBS0osWUFnQmpDMUwsTUFBSy9ELE9BQU91TSxZQUFjeEksTUFBS3VJLFNBQVNVLE1BQU1qSixNQUFLL0QsT0FBT2dPLGtCQUMxRGpLLE1BQUtrSyxtQkFDTHFCLGtCQUFrQnZMLE1BQUsvRCxPQUFPOE0sVUFBVyxTQUFBZ0QsR0FBSyxNQUFBQSxHQUFFck0sT0FBU00sTUFBSy9ELE9BQU91TSxZQUFZOUksT0FFN0U2SyxRQUFReUIsWUFDUmhNLE1BQUs0RyxhQUFhWCxtQkFBbUJqRyxNQUFLL0QsT0FBTzJNLGlCQUFpQnVDLGdCQUFrQm5MLE1BQUsvRCxPQUFPNE0sV0FBV3NDLGdCQUN0RW5MLE1BQUsvRCxPQUFPMk0saUJBQWlCdUMsaUJBQW1CbkwsTUFBSy9ELE9BQU80TSxXQUFXc0MsaUJBQzVHbkwsTUFBS3FJLGdCQUNMckksTUFBSzJHLHFCQUFxQmhHLHFCQUUxQlgsTUFBS29LLGNBRVYsS0FBTSxJQUdMckMsZUFBQWxMLFVBQUFxTixpQkFBUixXQUNTL08sS0FBS2MsT0FBT3VNLGFBSWpCck4sS0FBS2MsT0FBT3VNLFlBQVltQyxrQkFBa0JzQixRQUFRLFNBQUM3RSxNQUFPOEUsT0FBVSxNQUFBOUUsT0FBTStFLE1BQVFELE1BQVEsS0F4UHZGbkUsZUFBQWxILFNBQVcsZ0NBQWlDLFNBQVUsK0JBQWdDLFlBQWEsWUEwUDlHa0gsaUJBdFFhdEIsYUFBQXNCLGVBQWNBLGVBd1EzQmxLLFFBQVFDLE9BQU85QyxPQUFPQyxlQUFlRyxTQUFTdUosV0FBVyw2QkFBOEJvRCxpQkF6UXBGdEIsY0FBQUEsaUJDRFAvTCxFQUFFLFdBRUVBLEVBQUUsa0NBQWtDMFIsS0FBSyxlQUFlLE1BQ3REQyxLQUFLQyxtQkFBbUIsWUFDbkJDLGlCQUFpQixPQUNqQkMscUJBQXFCLE9BQ3JCQyxzQkFBc0IsT0FDdEJDLGtCQUFrQixPQUNsQkMsY0FBYyxTQUNqQkMsS0FBSyxjQUFlLFdBQVksT0FBTyxNQ1QvQ2xTLEVBQUUsV0FDRUEsRUFBRWdILFVBQVVtTCxTQUFTLFNBQUFDLEdBQ2pCLEdBQWdCLEtBQVpBLEVBQUVDLE1BQ0ZyUyxFQUFFLHVCQUF1QnNTLFFBQVFDLFlBQzlCLElBQUlILEVBQUVDLE9BQVMsSUFBTUQsRUFBRUMsT0FBUyxHQUFJLENBQ3ZDLEdBQUlHLGNBQWFKLEVBQUVDLE1BQVEsRUFDM0JyUyxHQUFFLDZCQUE2QmtRLE9BQU8sU0FBQ3NCLE1BQU9pQixNQUFTLE1BQUF6UyxHQUFFeVMsTUFBTWxHLEtBQUssV0FBYWlHLGVBQzVFRixRQUNBQyxhQ1JqQnZTLEVBQUUsV0FDRUEsRUFBRSxrQkFBa0JrUyxLQUFLLGtCQUFtQixXQUFNLE1BQUNsUyxHQUFFLDZCQUFxQzBTIiwiZmlsZSI6ImN1c3RvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9jb21tb24udHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vYXBwLnRzXCIgLz5cclxuaW50ZXJmYWNlIFBvaW50IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufTtcclxuXHJcbi8vIEFwcC5HZXRBcHAoKS5hbmltYXRpb24oJy53b3Jkcy1sZWZ0LWl0ZW0nLCBmdW5jdGlvbigpOmFuZ3VsYXIuYW5pbWF0ZS5JQW5pbWF0ZUNhbGxiYWNrT2JqZWN0IHtcclxuLy8gICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgbGVhdmU6IGZ1bmN0aW9uKGVsZW1lbnQ6IEpRdWVyeSwgZG9uZTogRnVuY3Rpb24pIHtcclxuLy8gICAgICAgICAgICAgbGV0ICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuLy8gICAgICAgICAgICAgdmFyIHRhcmdldFBvcyA9IGdldFdvcmRDb250YWluZXJQb3N0aW9uKCk7XHJcbi8vICAgICAgICAgICAgIC8vICRlbGVtZW50LmFuaW1hdGUoe1xyXG4vLyAgICAgICAgICAgICAvLyAgICAgb3Bhc2l0eTogMCxcclxuLy8gICAgICAgICAgICAgLy8gICAgIHRvcDogdGFyZ2V0UG9zLnksXHJcbi8vICAgICAgICAgICAgIC8vICAgICBsZWZ0OiB0YXJnZXRQb3MueFxyXG4vLyAgICAgICAgICAgICAvLyB9LCBkb25lKTtcclxuLy8gICAgICAgICAgICAgZG9uZSgpO1xyXG5cclxuLy8gICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlzQ2FuY2VsbGVkOiBib29sZWFuKSB7XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoaXNDYW5jZWxsZWQpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5zdG9wKCk7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9O1xyXG4vLyB9KVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldFdvcmRDb250YWluZXJQb3N0aW9uKCk6IFBvaW50IHtcclxuICAgIGxldCAkZWxlbWVudCA9ICQoJyN3b3JkLWVsZW1lbnQnKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6ICRlbGVtZW50Lm9mZnNldCgpLmxlZnQsXHJcbiAgICAgICAgeTogJGVsZW1lbnQub2Zmc2V0KCkudG9wXHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9nbG9iYWxzL2FuZ3VsYXIvaW5kZXguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9nbG9iYWxzL3NpZ25hbHIvaW5kZXguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2dsb2JhbHMvZXM2LXNoaW0vaW5kZXguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2dsb2JhbHMvYW5ndWxhci11aS1ib290c3RyYXAvaW5kZXguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9ub2RlX21vZHVsZXMvcngvdHMvcnguZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2dsb2JhbHMvcnguYW5ndWxhci9pbmRleC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvZ2xvYmFscy9hbmd1bGFyLWFuaW1hdGUvaW5kZXguZC50c1wiIC8+XHJcbm1vZHVsZSBDb21tb24ge1xyXG4gICAgZXhwb3J0IGNsYXNzIENvbnN0YW50cyB7XHJcbiAgICAgICAgcHVibGljIGFwcE5hbWU6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgaHViQ29ubmVjdFRvR3JvdXBNZXRob2ROYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGNvbm5lY3RlZFRvR3JvdXA6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgbGVmdEdyb3VwOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGdyb3VwRnVsbGVkOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGNvbXBldGl0aW9uSHViOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGdhbWVTdGFydGVkOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGRpZE1vdmU6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZ2FtZUZpbmlzaGVkOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGRvTW92ZTogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBwYXNzTW92ZTogc3RyaW5nO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBOYW1lID0gXCJnYW1lQXBwXCJcclxuICAgICAgICAgICAgdGhpcy5odWJDb25uZWN0VG9Hcm91cE1ldGhvZE5hbWUgPSBcImNvbm5lY3RcIjtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWRUb0dyb3VwID0gXCJ1c2VyQWRkZWRcIjtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0R3JvdXAgPSBcInVzZXJMZWZ0XCI7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBGdWxsZWQgPSBcImdyb3VwRnVsbGVkXCI7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGV0aXRpb25IdWIgPSBcImNvbXBldGl0aW9uSHViXCI7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXJ0ZWQgPSBcImdhbWVTdGFydGVkXCI7XHJcbiAgICAgICAgICAgIHRoaXMuZGlkTW92ZSA9IFwiZGlkTW92ZVwiO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVGaW5pc2hlZCA9IFwiZ2FtZUZpbmlzaGVkXCI7XHJcbiAgICAgICAgICAgIHRoaXMuZG9Nb3ZlID0gXCJkb01vdmVcIjtcclxuICAgICAgICAgICAgdGhpcy5wYXNzTW92ZSA9IFwicGFzc01vdmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGV4cG9ydCBmdW5jdGlvbiAgR2V0Q29uc3RhbnRzKCk6IENvbnN0YW50cyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb25zdGFudHMoKTtcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9jb21tb24udHNcIiAvPlxyXG5tb2R1bGUgTWl4aW5zIHtcclxuICAgIGZ1bmN0aW9uIGFjdGlvbldyYXBwZXI8VFN0YXRlPigkc2NvcGU6IG5nLklTY29wZSwgYWN0aW9uOiAoc2NoZWR1bGVyOiBSeC5JU2NoZWR1bGVyLCBzdGF0ZTogVFN0YXRlKSA9PiBSeC5JRGlzcG9zYWJsZSk6IFxyXG4gICAgKHNjaGVkdWxlcjogUnguSVNjaGVkdWxlciwgc3RhdGU6IFRTdGF0ZSkgPT4gUnguSURpc3Bvc2FibGUgIHtcclxuICAgICAgICByZXR1cm4gKHNjaGVkdWxlcjogUnguSVNjaGVkdWxlciwgc3RhdGU6IFRTdGF0ZSk6IFJ4LklEaXNwb3NhYmxlID0+IHtcclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlOiBSeC5JRGlzcG9zYWJsZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYWN0aW9uKHNjaGVkdWxlciwgc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbihzY2hlZHVsZXIsIHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE5nU2NoZWR1bGVyIGltcGxlbWVudHMgUnguSVNjaGVkdWxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBpbW1lZGlhdGVTY2hlZHVsZXI6IFJ4LklTY2hlZHVsZXI7XHJcbiAgICAgICAgcHJpdmF0ZSAkc2NvcGU6IG5nLklTY29wZTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoJHNjb3BlOiBuZy5JU2NvcGUpIHtcclxuICAgICAgICAgICAgdGhpcy5pbW1lZGlhdGVTY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIuaW1tZWRpYXRlO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vdygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGVTY2hlZHVsZXIubm93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHNjaGVkdWxlPFRTdGF0ZT4oc3RhdGU6IFRTdGF0ZSwgYWN0aW9uOiAoc2NoZWR1bGVyOiBSeC5JU2NoZWR1bGVyLCBzdGF0ZTogVFN0YXRlKSA9PiBSeC5JRGlzcG9zYWJsZSk6IFJ4LklEaXNwb3NhYmxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlU2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBhY3Rpb25XcmFwcGVyKHRoaXMuJHNjb3BlLCBhY3Rpb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZHVlVGltZS5cclxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2NoZWR1bGVGdXR1cmU8VFN0YXRlPihzdGF0ZTogVFN0YXRlLCBkdWVUaW1lOiBudW1iZXIgfCBEYXRlLCBhY3Rpb246IChzY2hlZHVsZXI6IFJ4LklTY2hlZHVsZXIsIHN0YXRlOiBUU3RhdGUpID0+IFJ4LklEaXNwb3NhYmxlKTogUnguSURpc3Bvc2FibGUge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCByZWN1cnNpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiByZWN1cnNpdmUgaW52b2NhdGlvbiBzdGF0ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2NoZWR1bGVSZWN1cnNpdmU8VFN0YXRlPihzdGF0ZTogVFN0YXRlLCBhY3Rpb246IChzdGF0ZTogVFN0YXRlLCBhY3Rpb246IChzdGF0ZTogVFN0YXRlKSA9PiB2b2lkKSA9PiB2b2lkKTogUnguSURpc3Bvc2FibGUge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCByZWN1cnNpdmVseSBhZnRlciBhIHNwZWNpZmllZCByZWxhdGl2ZSBkdWUgdGltZS5cclxuICAgICAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiB0aGUgcmVjdXJzaXZlIGR1ZSB0aW1lIGFuZCBpbnZvY2F0aW9uIHN0YXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfWR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZTxUU3RhdGUsIFRUaW1lIGV4dGVuZHMgbnVtYmVyIHwgRGF0ZT4oc3RhdGU6IFRTdGF0ZSwgZHVlVGltZTogVFRpbWUsIGFjdGlvbjogKHN0YXRlOiBUU3RhdGUsIGFjdGlvbjogKHN0YXRlOiBUU3RhdGUsIGR1ZVRpbWU6IFRUaW1lKSA9PiB2b2lkKSA9PiB2b2lkKTogUnguSURpc3Bvc2FibGUge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2NoZWR1bGVzIGEgcGVyaW9kaWMgcGllY2Ugb2Ygd29yayBieSBkeW5hbWljYWxseSBkaXNjb3ZlcmluZyB0aGUgc2NoZWR1bGVyJ3MgY2FwYWJpbGl0aWVzLiBUaGUgcGVyaW9kaWMgdGFzayB3aWxsIGJlIHNjaGVkdWxlZCB1c2luZyB3aW5kb3cuc2V0SW50ZXJ2YWwgZm9yIHRoZSBiYXNlIGltcGxlbWVudGF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIEluaXRpYWwgc3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdXBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBydW5uaW5nIHRoZSB3b3JrIHBlcmlvZGljYWxseS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLCBwb3RlbnRpYWxseSB1cGRhdGluZyB0aGUgc3RhdGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIHJlY3VycmluZyBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzY2hlZHVsZVBlcmlvZGljPFRTdGF0ZT4oc3RhdGU6IFRTdGF0ZSwgcGVyaW9kOiBudW1iZXIsIGFjdGlvbjogKHN0YXRlOiBUU3RhdGUpID0+IFRTdGF0ZSk6IFJ4LklEaXNwb3NhYmxlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhdGNoKGhhbmRsZXI6IEZ1bmN0aW9uKTogUnguSVNjaGVkdWxlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZVNjaGVkdWxlci5jYXRjaChoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiY29tbW9uLnRzXCIgLz5cclxubW9kdWxlIEFwcCB7XHJcbiAgICB2YXIgY29uc3RhbnRzID0gQ29tbW9uLkdldENvbnN0YW50cygpO1xyXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKGNvbnN0YW50cy5hcHBOYW1lLCBbJ3VpLmJvb3RzdHJhcC5tb2RhbCcsJ2NnQnVzeScsICduZ0FuaW1hdGUnXSk7XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIEdldEFwcCgpOiBuZy5JTW9kdWxlIHtcclxuICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgVXNlciB7XHJcbiAgICAgICAgcHVibGljIHVzZXJJZDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBkaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vVXNlci50c1wiIC8+XHJcbm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIEdyb3VwIHtcclxuICAgICAgICBwdWJsaWMgZ3JvdXBJZDogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgdXNlcnNMaXN0OiBBcnJheTxNb2RlbHMuVXNlcj5cclxuICAgIH1cclxufSIsIm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIFNjb3JlIHtcclxuICAgICAgICBwdWJsaWMgc3VjY2Vzc2Z1bE1vdmVzOiBudW1iZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3cm9uZ01vdmVzOiBudW1iZXI7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBUcmFuc2xhdGVWYXJpYW50IHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5pc1RydWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmFyaWFudDogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgaXNUcnVlOiBib29sZWFuO1xyXG5cclxuICAgICAgICBwdWJsaWMgaXNTZWxlY3RlZDogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIG9yZGVyOiBudW1iZXI7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi90cmFuc2xhdGVWYXJpYW50LnRzXCIgLz5cclxubW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgV29yZCB7XHJcbiAgICAgICAgcHVibGljIHdvcmQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIHRyYW5zbGF0ZVZhcmlhbnRzOiBBcnJheTxUcmFuc2xhdGVWYXJpYW50PlxyXG5cclxuICAgICAgICBwdWJsaWMgZXhwbGFuYXRpb25RdW90ZXM6IEFycmF5PHN0cmluZz5cclxuXHJcbiAgICAgICAgcHVibGljIGRlZmluaXRpb246IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIHNob3J0V29yZFJlcHJlc2VudGF0aW9uOiBzdHJpbmc7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9zY29yZS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL3dvcmQudHNcIiAvPlxyXG5tb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBHYW1lIHtcclxuICAgICAgICBwdWJsaWMgdXNlcjE6IFVzZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB1c2VyMjogVXNlcjtcclxuXHJcbiAgICAgICAgcHVibGljIGN1cnJlbnRNb3ZlOiBudW1iZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3b3JkczogQXJyYXk8V29yZD5cclxuXHJcbiAgICAgICAgcHVibGljIHVzZXIxU2NvcmU6IFNjb3JlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdXNlcjJTY29yZTogU2NvcmU7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgTW9kZWxzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBHYW1lUmVzdWx0IHtcclxuICAgICAgICBwdWJsaWMgd2lubmVyOiBudW1iZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc0RyYXc6IGJvb2xlYW47XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9nYW1lUmVzdWx0LnRzXCIgLz5cclxubW9kdWxlIE1vZGVscyB7XHJcbiAgICBleHBvcnQgY2xhc3MgTW92ZVJlc3VsdCB7XHJcbiAgICAgICAgcHVibGljIGlzU3VjY2Vzc2Z1bDogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIGlzQ29ycmVjdDogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIGVycm9yTWVzc2FnZTogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgaXNMYXN0TW92ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIGdhbWVSZXN1bHQ6IE1vZGVscy5HYW1lUmVzdWx0O1xyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0ZWRWYXJpYW50SW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICAgICAgcHVibGljIGlzU2tpcHBlZDogYm9vbGVhbjtcclxuICAgIH1cclxufSIsIm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhc3NlZFdvcmRJbmZvIHtcclxuICAgICAgICBwdWJsaWMgd29yZDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBhbnN3ZXI6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIHdhc1Bhc3NlZDogYm9vbGVhbjtcclxuICAgIH1cclxufSIsIm1vZHVsZSBNb2RlbHMge1xyXG4gICAgZXhwb3J0IGVudW0gTGV2ZWwge1xyXG4gICAgICAgIEJlZ2luZXIgPSAxLFxyXG5cclxuICAgICAgICBJbnRlcm1lZGlhdGUgPSAyLFxyXG5cclxuICAgICAgICBBZHZhbmNlZCA9IDNcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMZXZlbE5hbWVQYWlyIHtcclxuICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgbGV2ZWw6IE1vZGVscy5MZXZlbDtcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzLnRzXCIgLz5cclxubW9kdWxlIFNlcnZpY2VzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBDb25uZWN0VG9HYW1lU2VydmljZSBpbXBsZW1lbnRzIEludGVyZmFjZXMuSUNvbm5lY3RUb0dhbWUge1xyXG4gICAgICAgIHByaXZhdGUgaHViOiBTaWduYWxSLkh1Yi5Qcm94eTtcclxuICAgICAgICBwcml2YXRlIGNvbm5lY3Rpb246IFNpZ25hbFIuSHViLkNvbm5lY3Rpb247XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdGFudHM6IENvbW1vbi5Db25zdGFudHM7XHJcbiAgICAgICAgcHJpdmF0ZSBvbkNvbm5lY3RlZFRvSHViQ2FsbGJhY2s6KHVzZXJJZDogc3RyaW5nKSA9PiB2b2lkXHJcblxyXG4gICAgICAgIHN0YXRpYyAkaW5qZWN0ID0gW1wiU2VydmljZXMuSHViQ29ubmVjdGlvblNlcnZpY2VcIl07XHJcbiAgICAgICAgY29uc3RydWN0b3IoaHViQ29ubmVjdGlvblNlcnZpY2U6IEludGVyZmFjZXMuSUh1YkNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zdGFudHMgPSBDb21tb24uR2V0Q29uc3RhbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGh1YkNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5odWIgPSB0aGlzLmNvbm5lY3Rpb24uY3JlYXRlSHViUHJveHkodGhpcy5jb25zdGFudHMuY29tcGV0aXRpb25IdWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9IdWIoKTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHViLmNvbm5lY3Rpb24uc3RhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkNvbm5lY3RUb0h1YihjYWxsQmFjazoodXNlcklkOiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3RlZFRvSHViQ2FsbGJhY2sgPSBjYWxsQmFjaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb01vdmUobW92ZU9yZGVyOiBudW1iZXIsIHdvcmQ6IHN0cmluZywgdmFyaWFudDpzdHJpbmcpOiBKUXVlcnlQcm9taXNlPE1vZGVscy5Nb3ZlUmVzdWx0PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh1Yi5pbnZva2UodGhpcy5jb25zdGFudHMuZG9Nb3ZlLCBtb3ZlT3JkZXIsIHdvcmQsIHZhcmlhbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHBhc3NNb3ZlKG1vdmVPcmRlcjogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxNb2RlbHMuTW92ZVJlc3VsdD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odWIuaW52b2tlKHRoaXMuY29uc3RhbnRzLnBhc3NNb3ZlLCBtb3ZlT3JkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9OZXdHcm91cEltcGwoZGlzcGxheU5hbWU6IHN0cmluZywgbGV2ZWw6IE1vZGVscy5MZXZlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odWIuaW52b2tlKHRoaXMuY29uc3RhbnRzLmh1YkNvbm5lY3RUb0dyb3VwTWV0aG9kTmFtZSwgZGlzcGxheU5hbWUsIGxldmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25uZWN0VG9OZXdHcm91cChkaXNwbGF5TmFtZTogc3RyaW5nLCBsZXZlbDogTW9kZWxzLkxldmVsKTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5zdGF0ZSA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdFRvSHViKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4odmFsdWVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db25uZWN0ZWRUb0h1YkNhbGxiYWNrKHZhbHVlcy5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odWIuaW52b2tlKHRoaXMuY29uc3RhbnRzLmh1YkNvbm5lY3RUb0dyb3VwTWV0aG9kTmFtZSwgZGlzcGxheU5hbWUsIGxldmVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHViLmludm9rZSh0aGlzLmNvbnN0YW50cy5odWJDb25uZWN0VG9Hcm91cE1ldGhvZE5hbWUsIGRpc3BsYXlOYW1lLCBsZXZlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb25Db25uZWN0ZWRUb0dyb3VwKGNhbGxCYWNrOih1c2VySWQ6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmh1Yi5vbih0aGlzLmNvbnN0YW50cy5jb25uZWN0ZWRUb0dyb3VwLCAobXNnKSA9PiBjYWxsQmFjayhtc2cpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkdyb3VwRnVsbGVkKGNhbGxCYWNrOihncm91cDogTW9kZWxzLkdyb3VwKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuaHViLm9uKHRoaXMuY29uc3RhbnRzLmdyb3VwRnVsbGVkLCAobXNnKSA9PiBjYWxsQmFjayhtc2cpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvblVzZXJMZWZ0KGNhbGxCYWNrOihncm91cDogTW9kZWxzLkdyb3VwKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuaHViLm9uKHRoaXMuY29uc3RhbnRzLmxlZnRHcm91cCwgKG1zZykgPT4gY2FsbEJhY2sobXNnWzBdKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2FtZVN0YXJ0ZWQoY2FsbEJhY2s6KGdyb3VwOiBNb2RlbHMuR2FtZSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmh1Yi5vbih0aGlzLmNvbnN0YW50cy5nYW1lU3RhcnRlZCwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2sobXNnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlkTW92ZShjYWxsQmFjazoobW92ZVJlczogTW9kZWxzLk1vdmVSZXN1bHQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5odWIub24odGhpcy5jb25zdGFudHMuZGlkTW92ZSwgKG1zZykgPT4gY2FsbEJhY2sobXNnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2FtZUZpbmlzaGVkKGNhbGxCYWNrOihncm91cDogTW9kZWxzLkdhbWUpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5odWIub24odGhpcy5jb25zdGFudHMuZ2FtZUZpbmlzaGVkLCAobXNnKSA9PiBjYWxsQmFjayhtc2dbMF0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkRpc2Nvbm5lY3RlZEZyb21IdWIoY2FsbEJhY2s6KCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZGlzY29ubmVjdGVkKGNhbGxCYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdG9wSHViQ29ubmVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5zdGF0ZSAhPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuc2VydmljZShcIlNlcnZpY2VzLkNvbm5lY3RUb0dhbWVTZXJ2aWNlXCIsIENvbm5lY3RUb0dhbWVTZXJ2aWNlKTtcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzLnRzXCIgLz5cclxubW9kdWxlIFNlcnZpY2VzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBDb29raWVTZXJ2aWNlIGltcGxlbWVudHMgSW50ZXJmYWNlcy5JQ29va2llU2VydmljZSB7XHJcbiAgICAgICAgc2V0Q29va2llKGNuYW1lOiBzdHJpbmcsIGN2YWx1ZTogYW55LCBleGRheXM/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFleGRheXMpIHtcclxuICAgICAgICAgICAgICAgIGV4ZGF5cyA9IDEwICogMzY3OyAvLyAxMCB5ZWFycyBjb29raWVzXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKGV4ZGF5cyoyNCo2MCo2MCoxMDAwKSk7XHJcbiAgICAgICAgICAgIGxldCBleHBpcmVzID0gXCJleHBpcmVzPVwiKyBkLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgXCI9XCIgKyBjdmFsdWUgKyBcIjtcIiArIGV4cGlyZXMgKyBcIjtwYXRoPS9cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldENvb2tpZShjbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSBjbmFtZSArIFwiPVwiO1xyXG4gICAgICAgICAgICBsZXQgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYyA9IGNhW2ldO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFuZ3VsYXIubW9kdWxlKENvbW1vbi5HZXRDb25zdGFudHMoKS5hcHBOYW1lKS5zZXJ2aWNlKFwiU2VydmljZXMuQ29va2llU2VydmljZVwiLCBDb29raWVTZXJ2aWNlKTtcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzLnRzXCIgLz5cclxubW9kdWxlIFNlcnZpY2VzIHtcclxuICAgIGV4cG9ydCBjbGFzcyBIdWJDb25uZWN0aW9uU2VydmljZSBpbXBsZW1lbnRzIEludGVyZmFjZXMuSUh1YkNvbm5lY3Rpb24ge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNvbm5lY3Rpb246IFNpZ25hbFIuSHViLkNvbm5lY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDb25uZWN0aW9uKCk6IFNpZ25hbFIuSHViLkNvbm5lY3Rpb24ge1xyXG4gICAgICAgICAgICBpZiAoIUh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24gPSAkLmh1YkNvbm5lY3Rpb24oXCIvc2lnbmFsclwiLCB7IHVzZURlZmF1bHRQYXRoOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb24ubG9nZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEh1YkNvbm5lY3Rpb25TZXJ2aWNlLmNvbm5lY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYW5ndWxhci5tb2R1bGUoQ29tbW9uLkdldENvbnN0YW50cygpLmFwcE5hbWUpLnNlcnZpY2UoXCJTZXJ2aWNlcy5IdWJDb25uZWN0aW9uU2VydmljZVwiLCBIdWJDb25uZWN0aW9uU2VydmljZSk7XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9taXhpbnMvbmdTY2hlZHVsZXIudHNcIiAvPlxyXG5tb2R1bGUgU2VydmljZXMge1xyXG4gICAgZnVuY3Rpb24gdG9Qcm9taXNlQ3VzdG9tPFQ+KG9ic2VydmFibGU6IFJ4LklPYnNlcnZhYmxlPFQ+KTogUHJvbWlzZSA8YW55PiB7XHJcbiAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZTxhbnk+KHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHt9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBJTW9kYWxTZXR0aW5ncyBleHRlbmRzIG5nLnVpLmJvb3RzdHJhcC5JTW9kYWxTZXR0aW5ncyB7XHJcblxyXG4gICAgICAgIC8qKiBTZXRzIHRoZSBhcmlhLWRlc2NyaWJlZGJ5IHByb3BlcnR5IG9uIHRoZSBtb2RhbC4gXHJcbiAgICAgICAgICogVGhlIHZhbHVlIHNob3VsZCBiZSBhbiBpZCAod2l0aG91dCB0aGUgbGVhZGluZyAjKSBwb2ludGluZyB0byB0aGUgZWxlbWVudCB0aGF0IGRlc2NyaWJlcyB5b3VyIG1vZGFsLiBcclxuICAgICAgICAgKiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSB0aGUgdGV4dCBvbiB5b3VyIG1vZGFsLFxyXG4gICAgICAgICAqICBidXQgZG9lcyBub3QgaW5jbHVkZSBzb21ldGhpbmcgdGhlIHVzZXIgd291bGQgaW50ZXJhY3Qgd2l0aCwgXHJcbiAgICAgICAgICogbGlrZSBidXR0b25zIG9yIGEgZm9ybS4gXHJcbiAgICAgICAgICogT21pdHRpbmcgdGhpcyBvcHRpb24gd2lsbCBub3QgaW1wYWN0IHNpZ2h0ZWQgdXNlcnMgYnV0IHdpbGwgd2Vha2VuIHlvdXIgYWNjZXNzaWJpbGl0eSBzdXBwb3J0LiAqL1xyXG4gICAgICAgIGFyaWFEZXNjcmliZWRCeTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKiogU2V0cyB0aGUgYXJpYS1sYWJlbGxlZGJ5IHByb3BlcnR5IG9uIHRoZSBtb2RhbC4gXHJcbiAgICAgICAgICogVGhlIHZhbHVlIHNob3VsZCBiZSBhbiBpZCAod2l0aG91dCB0aGUgbGVhZGluZyAjKSBwb2ludGluZyB0byB0aGUgZWxlbWVudCB0aGF0IGxhYmVscyB5b3VyIG1vZGFsLiBcclxuICAgICAgICAgKiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBhIGhlYWRlciBlbGVtZW50LiBcclxuICAgICAgICAgKiBPbWl0dGluZyB0aGlzIG9wdGlvbiB3aWxsIG5vdCBpbXBhY3Qgc2lnaHRlZCB1c2VycyBidXQgd2lsbCB3ZWFrZW4geW91ciBhY2Nlc3NpYmlsaXR5IHN1cHBvcnQuICovXHJcbiAgICAgICAgYXJpYUxhYmVsbGVkQnk6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RhdGVIYW5kbGVyU2VydmljZSBpbXBsZW1lbnRzIEludGVyZmFjZXMuSVN0YXRlSGFuZGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdGFudHM6IENvbW1vbi5Db25zdGFudHM7XHJcbiAgICAgICAgcHJpdmF0ZSAkcm9vdFNjb3BlOiBJbnRlcmZhY2VzLklSb290U2NvcGU7XHJcbiAgICAgICAgcHJpdmF0ZSAkbW9kYWw6IGFuZ3VsYXIudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2U7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9HYW1lU2NvcGU6IEludGVyZmFjZXMuSUNvbm5lY3RUb0dhbWVTY29wZTtcclxuICAgICAgICBwcml2YXRlIGdyb3VwRnVsbGVkT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgdXNlckxlZnRHcm91cE9ic2VydmFibGU6IFJ4LlN1YmplY3Q8YW55PjtcclxuICAgICAgICBwcml2YXRlIGdhbWVTdGFydGVkT2JzZXJ2YWJsZTogUnguU3ViamVjdDxhbnk+O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXJ0R2FtZU1vZGFsSW5zdGFuY2U6IGFuZ3VsYXIudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2VJbnN0YW5jZTtcclxuXHJcbiAgICAgICAgc3RhdGljICRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwiJHVpYk1vZGFsXCJdO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRyb290U2NvcGU6IEludGVyZmFjZXMuSVJvb3RTY29wZSwgJG1vZGFsOiBhbmd1bGFyLnVpLmJvb3RzdHJhcC5JTW9kYWxTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RhbnRzID0gQ29tbW9uLkdldENvbnN0YW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLiRtb2RhbCA9ICRtb2RhbDtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmlzU3RhcnRHYW1lUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLiRyb290U2NvcGUudXNlcklkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEZ1bGxlZE9ic2VydmFibGUgPSBuZXcgUnguU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWRUb0dyb3VwT2JzZXJ2YWJsZSA9IG5ldyBSeC5TdWJqZWN0PGFueT4oKTtcclxuICAgICAgICAgICAgdGhpcy51c2VyTGVmdEdyb3VwT2JzZXJ2YWJsZSA9IG5ldyBSeC5TdWJqZWN0PGFueT4oKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhcnRlZE9ic2VydmFibGUgPSBuZXcgUnguU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbGxJbkRpZ2VzdExvb3AoYWN0aW9uOigpID0+IHZvaWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHJvb3RTY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93U3RhcnRHYW1lTW9kYWwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBvcHQgPSB7fSBhcyBuZy51aS5ib290c3RyYXAuSU1vZGFsU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBvcHQuc2NvcGUgPSB0aGlzLmNvbm5lY3RUb0dhbWVTY29wZTtcclxuICAgICAgICAgICAgICAgIG9wdC50ZW1wbGF0ZVVybCA9IFwiY29ubmVjdFRvR3JvdXAuaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgb3B0LndpbmRvd1RlbXBsYXRlVXJsID0gXCJ3aW5kb3dUZW1wbGF0ZS5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICBvcHQuYmFja2Ryb3AgPSBcInN0YXRpY1wiO1xyXG4gICAgICAgICAgICAgICAgb3B0LmtleWJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBvcHQuYW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9wdC5zaXplID0gXCJsZ1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlID0gdGhpcy4kbW9kYWwub3BlbihvcHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93R2FtZUZpbmlzaGVkTW9kYWxXaW5kb3coaXNXaW4/OiBib29sZWFuLCBpc0RyYXc/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChpc1dpbiA9PT0gdW5kZWZpbmVkICYmIGlzRHJhdyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBcIk9uZSBvZiBib29sZWFuIGZsYWdzIHNob3VsZCBiZSBzcGVjaWZpZWRcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNvbm5lY3RUb0dhbWVTY29wZSA9IHRoaXMuY29ubmVjdFRvR2FtZVNjb3BlO1xyXG4gICAgICAgICAgICBsZXQgb3B0ID0ge30gYXMgbmcudWkuYm9vdHN0cmFwLklNb2RhbFNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgb3B0LmNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGU6IEludGVyZmFjZXMuSUdhbWVGaW5pc2hlZE1vZGFsV2luZG93U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGxheUFnYWluID0gY29ubmVjdFRvR2FtZVNjb3BlLmNvbm5lY3RUb0dyb3VwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEcmF3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gXCLQndC40YfRjNGPLiDQntGC0LvQuNGH0L3QsNGPINC40LPRgNCwIDpEIVxcbtCl0L7RgtC40YLQtSDRgdGL0LPRgNCw0YLRjCDQtdGJ0ZEg0YDQsNC3P1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcItCf0L7Qt9C00YDQsNCy0LvQtdC90LjRjyEg0JLRiyDQstGL0LjQs9GA0LDQu9C4IVxcbtCl0L7RgtC40YLQtSDRgdGL0LPRgNCw0YLRjCDQtdGJ0ZEg0YDQsNC3P1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gXCLQlNCw0LbQtSDQtdGB0LvQuCDQv9GA0L7QuNCz0YDQsNC7LCDQv9GA0LXQvtCx0YDQtdGC0LXQvdC90YvQuSDQvtC/0YvRgiDQvtGB0YLQsNC90LXRgtGB0Y8g0L3QsNCy0YHQtdCz0LTQsCDRgSDRgtC+0LHQvtC5INC4INGB0YLQsNC90LXRgiDRgtCy0L7QtdC5INC90LDQs9GA0LDQtNC+0LkgOilcXG7QpdC+0YLQuNGC0LUg0YHRi9Cz0YDQsNGC0Ywg0LXRidGRINGA0LDQtz9cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvcHQudGVtcGxhdGVVcmwgPSBcImdhbWVGaW5pc2hlZC5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICBvcHQud2luZG93VGVtcGxhdGVVcmwgPSBcIndpbmRvd1RlbXBsYXRlLmh0bWxcIjtcclxuICAgICAgICAgICAgICAgIG9wdC5iYWNrZHJvcCA9IFwic3RhdGljXCI7XHJcbiAgICAgICAgICAgICAgICBvcHQua2V5Ym9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIG9wdC5hbmltYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb3B0LnNpemUgPSBcImxnXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZU1vZGFsSW5zdGFuY2UgPSB0aGlzLiRtb2RhbC5vcGVuKG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0Q29ubmVjdFRvR2FtZVNjb3BlKGNvbm5lY3RUb0dhbWVTY29wZTogSW50ZXJmYWNlcy5JQ29ubmVjdFRvR2FtZVNjb3BlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFRvR2FtZVNjb3BlID0gY29ubmVjdFRvR2FtZVNjb3BlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZUNvbm5lY3Rpb25Ub0dyb3VwKHByb21pc2U6IEpRdWVyeVByb21pc2U8YW55Pik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWRkZWRUb0dyb3VwID0gdGhpcy5hZGRlZFRvR3JvdXBPYnNlcnZhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRha2UoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuYWRkZWRUb0dyb3VwUHJvbWlzZSA9IHRvUHJvbWlzZUN1c3RvbShhZGRlZFRvR3JvdXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRUb0dyb3VwLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuaXNTdGFydEdhbWVQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBGdWxsZWQgPSB0aGlzLmdyb3VwRnVsbGVkT2JzZXJ2YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRha2UoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCVUc6IEZvciBzb21lIHJlYXNvbiBzb21ldGhpbWVzIGlzIG5vdCByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUudXNlcjJDb25uZWN0ZWRQcm9taXNlID0gdG9Qcm9taXNlQ3VzdG9tKGdyb3VwRnVsbGVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwRnVsbGVkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmxvYWRpbmdHYW1lUHJvbWlzZSA9IHRvUHJvbWlzZUN1c3RvbShSeC5PYnNlcnZhYmxlLm1lcmdlKHRoaXMudXNlckxlZnRHcm91cE9ic2VydmFibGUudGFrZSgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU3RhcnRlZE9ic2VydmFibGUudGFrZSgxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFrZSgxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdFRvR2FtZVNjb3BlLmNvbm5lY3RUb0dyb3VwUHJvbWlzZSA9IHByb21pc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcHJvbWlzZS5mYWlsKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzbXRoIGJhZCBoYXBwZW5lZDogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaGFuZGxlVXNlckFkZGVkVG9Hcm91cCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRlZFRvR3JvdXBPYnNlcnZhYmxlLm9uTmV4dCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2hvd1N0YXJ0R2FtZVdpbmRvdygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhcnRHYW1lTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBoYW5kbGVHYW1lRmluaXNoZWQoaXNXaW4/OiBib29sZWFuLCBpc0RyYXc/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbEluRGlnZXN0TG9vcCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuaXNTdGFydEdhbWVQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dHYW1lRmluaXNoZWRNb2RhbFdpbmRvdyhpc1dpbiwgaXNEcmF3KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaGFuZGxlR3JvdXBGdWxsZWQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IEJldHRlciB0byBpbXBsZW1lbnQgc2NoZWR1bGVyIHRvIHN1YnNjcmliZSB3aXRoaW4gbmcgc2NvcGVcclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBGdWxsZWRPYnNlcnZhYmxlLm9uTmV4dCh7fSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgaGFuZGxlR2FtZVN0YXJ0ZWQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbEluRGlnZXN0TG9vcCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRyb290U2NvcGUuaXNTdGFydEdhbWVQYWdlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVNb2RhbEluc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFydGVkT2JzZXJ2YWJsZS5vbk5leHQoe30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcm9vdFNjb3BlLnVzZXJJZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRVc2VySWQodXNlcklkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBoYW5kbGVVc2VyMkxlZnRHcm91cCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsSW5EaWdlc3RMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlckxlZnRHcm91cE9ic2VydmFibGUub25OZXh0KHt9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS5pc1N0YXJ0R2FtZVBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0YXJ0R2FtZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFVzZXJEaXNwbGF5TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcm9vdFNjb3BlLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGhhbmRsZURpc2Nvbm5lY3RlZEZyb21IdWIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLiRyb290U2NvcGUuaXNTdGFydEdhbWVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNob3cgc29tZWhvdyB0aGF0IHNvbWV0aGluZyB3YXMgd3Jvbmcgd2l0aCBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlLmlzU3RhcnRHYW1lUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0YXJ0R2FtZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuc2VydmljZShcIlNlcnZpY2VzLlN0YXRlSGFuZGxlclNlcnZpY2VcIiwgU3RhdGVIYW5kbGVyU2VydmljZSk7XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2ludGVyZmFjZXMudHNcIiAvPlxyXG5tb2R1bGUgY29udHJvbGxlcnMge1xyXG4gICAgZXhwb3J0IGNsYXNzIENvbm5lY3RUb0dhbWVDb250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIGNvbm5lY3Rpb25IdWJTZXJ2aWNlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lO1xyXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lU2NvcGU7XHJcbiAgICAgICAgcHJpdmF0ZSBncm91cEluZm86IE1vZGVscy5Hcm91cDtcclxuICAgICAgICBwcml2YXRlIHN0YXRlSGFuZGxlcjogSW50ZXJmYWNlcy5JU3RhdGVIYW5kbGVyO1xyXG4gICAgICAgIHByaXZhdGUgJHJvb3RTY29wZTogSW50ZXJmYWNlcy5JUm9vdFNjb3BlO1xyXG4gICAgICAgIHByaXZhdGUgY29vY2tpZVNlcnZpY2U6IEludGVyZmFjZXMuSUNvb2tpZVNlcnZpY2U7XHJcbiAgICAgICAgcHJpdmF0ZSBkaXNwbGF5TmFtZUNvb2tpZUtleTogc3RyaW5nO1xyXG4gICAgICAgIHByaXZhdGUgbGV2ZWxDb29raWVLZXk6IHN0cmluZztcclxuXHJcbiAgICAgICAgc3RhdGljICRpbmplY3QgPSBbXCJTZXJ2aWNlcy5Db25uZWN0VG9HYW1lU2VydmljZVwiLCBcIiRzY29wZVwiLCBcIlNlcnZpY2VzLlN0YXRlSGFuZGxlclNlcnZpY2VcIiwgXCIkcm9vdFNjb3BlXCIsIFwiU2VydmljZXMuQ29va2llU2VydmljZVwiXTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSHViU2VydmljZTogSW50ZXJmYWNlcy5JQ29ubmVjdFRvR2FtZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lU2NvcGUsIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlSGFuZGxlcjogSW50ZXJmYWNlcy5JU3RhdGVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGU6IEludGVyZmFjZXMuSVJvb3RTY29wZSxcclxuICAgICAgICAgICAgICAgICAgICBjb29ja2llU2VydmljZTogSW50ZXJmYWNlcy5JQ29va2llU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlID0gY29ubmVjdGlvbkh1YlNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlciA9IHN0YXRlSGFuZGxlcjtcclxuICAgICAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICAgICAgdGhpcy5jb29ja2llU2VydmljZSA9IGNvb2NraWVTZXJ2aWNlO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlOYW1lQ29va2llS2V5ID0gXCJkaXNwbGF5TmFtZVwiO1xyXG4gICAgICAgICAgICB0aGlzLmxldmVsQ29va2llS2V5ID0gXCJsZXZlbE5hbWVcIjtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplVmlld01vZGVsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVWaWV3TW9kZWwoKTp2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuc2V0Q29ubmVjdFRvR2FtZVNjb3BlKHRoaXMuJHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2Uub25Vc2VyTGVmdChkYXRhID0+IHRoaXMub25Vc2VyTGVmdC5jYWxsKHRoaXMsIGRhdGEpKTtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5vbkdyb3VwRnVsbGVkKGRhdGEgPT4gdGhpcy5vbkdyb3VwRnVsbGVkLmNhbGwodGhpcywgZGF0YSkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLm9uQ29ubmVjdGVkVG9Hcm91cChkYXRhID0+IHRoaXMub25Db25uZWN0ZWRUb0dyb3VwLmNhbGwodGhpcywgZGF0YSkpO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5jb25uZWN0VG9Hcm91cCA9ICgpID0+IHRoaXMuY29ubmVjdFRvR3JvdXAuYXBwbHkodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLm9uQ29ubmVjdFRvSHViKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyLnNldFVzZXJJZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLm9uRGlzY29ubmVjdGVkRnJvbUh1YigoKSA9PiB0aGlzLnN0YXRlSGFuZGxlci5oYW5kbGVEaXNjb25uZWN0ZWRGcm9tSHViKCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUubGV2ZWxzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xldmVsOiBNb2RlbHMuTGV2ZWwuQmVnaW5lciwgbmFtZTogXCLQndC+0LLQsNGH0L7QulwifSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsZXZlbDogTW9kZWxzLkxldmVsLkludGVybWVkaWF0ZSwgbmFtZTogXCLQodGA0LXQtNC90LjQuVwifSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsZXZlbDogTW9kZWxzLkxldmVsLkFkdmFuY2VkLCBuYW1lOiBcItCS0YvRgdC+0LrQuNC5XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmNoYW5nZUxldmVsID0gKGxldmVsOiBNb2RlbHMuSUxldmVsTmFtZVBhaXIpID0+IHRoaXMuJHJvb3RTY29wZS5sZXZlbCA9IGxldmVsO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlOYW1lRnJvbUNvb2tpZXMgPSBcItCh0LvRg9GH0LDQudC90YvQuSDQuNCz0YDQvtC6XCI7XHJcbiAgICAgICAgICAgIGxldCBsZXZlbEZyb21Db29raWVzID0gMjsgLy8gSW50ZXJtZWRpYXRlIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCBjb29raWVWYWx1ZSA9IHRoaXMuY29vY2tpZVNlcnZpY2UuZ2V0Q29va2llKHRoaXMuZGlzcGxheU5hbWVDb29raWVLZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvb2tpZVZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWVGcm9tQ29va2llcyA9IGNvb2tpZVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvb2tpZVZhbHVlID0gdGhpcy5jb29ja2llU2VydmljZS5nZXRDb29raWUodGhpcy5sZXZlbENvb2tpZUtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29va2llVmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbEZyb21Db29raWVzID0gcGFyc2VJbnQoY29va2llVmFsdWUpIHx8IGxldmVsRnJvbUNvb2tpZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lRnJvbUNvb2tpZXM7XHJcbiAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS5sZXZlbCA9IHRoaXMuJHNjb3BlLmxldmVsc1tsZXZlbEZyb21Db29raWVzIC0gMV07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5zaG93U3RhcnRHYW1lV2luZG93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uR3JvdXBGdWxsZWQoZ3JvdXBJbmZvOiBNb2RlbHMuR3JvdXApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEluZm8gPSBncm91cEluZm87XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyLmhhbmRsZUdyb3VwRnVsbGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uVXNlckxlZnQoZ3JvdXBJbmZvOiBNb2RlbHMuR3JvdXApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEluZm8gPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5oYW5kbGVVc2VyMkxlZnRHcm91cCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0VG9Hcm91cCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlOYW1lID0gdGhpcy5zdGF0ZUhhbmRsZXIuZ2V0VXNlckRpc3BsYXlOYW1lKCk7XHJcbiAgICAgICAgICAgIGxldCBsZXZlbCA9IHRoaXMuJHJvb3RTY29wZS5sZXZlbC5sZXZlbDtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvb2NraWVTZXJ2aWNlLnNldENvb2tpZSh0aGlzLmRpc3BsYXlOYW1lQ29va2llS2V5LCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvb2NraWVTZXJ2aWNlLnNldENvb2tpZSh0aGlzLmxldmVsQ29va2llS2V5LCBsZXZlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5jb25uZWN0VG9OZXdHcm91cChkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlQ29ubmVjdGlvblRvR3JvdXAocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQ29ubmVjdGVkVG9Hcm91cCh1c2VySWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlSGFuZGxlci5zZXRVc2VySWQodXNlcklkKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlVXNlckFkZGVkVG9Hcm91cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuY29udHJvbGxlcihcImNvbnRyb2xsZXJzLkNvbm5lY3RUb0dhbWVDb250cm9sbGVyXCIsIENvbm5lY3RUb0dhbWVDb250cm9sbGVyKTtcclxufSAiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2ludGVyZmFjZXMudHNcIiAvPlxyXG5tb2R1bGUgY29udHJvbGxlcnMge1xyXG4gICAgZXhwb3J0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIGNvbm5lY3Rpb25IdWJTZXJ2aWNlOiBJbnRlcmZhY2VzLklDb25uZWN0VG9HYW1lO1xyXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBJbnRlcmZhY2VzLklHYW1lU2NvcGU7XHJcbiAgICAgICAgcHJpdmF0ZSBnYW1lSW5mbzogTW9kZWxzLkdhbWU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0ZUhhbmRsZXI6IEludGVyZmFjZXMuSVN0YXRlSGFuZGxlcjtcclxuICAgICAgICBwcml2YXRlIHdvcmRzOiBBcnJheTxNb2RlbHMuV29yZD5cclxuICAgICAgICBwcml2YXRlIHVzZXJOdW06IG51bWJlcjtcclxuICAgICAgICBwcml2YXRlICRpbnRlcnZhbDogbmcuSUludGVydmFsU2VydmljZTtcclxuICAgICAgICBwcml2YXRlIHNlY29uZHNGb3JNb3ZlOiBudW1iZXI7XHJcbiAgICAgICAgcHJpdmF0ZSB0aW1lclByb21pc2U6IG5nLklQcm9taXNlPGFueT47XHJcbiAgICAgICAgcHJpdmF0ZSAkdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlO1xyXG5cclxuICAgICAgICBzdGF0aWMgJGluamVjdCA9IFtcIlNlcnZpY2VzLkNvbm5lY3RUb0dhbWVTZXJ2aWNlXCIsIFwiJHNjb3BlXCIsIFwiU2VydmljZXMuU3RhdGVIYW5kbGVyU2VydmljZVwiLCBcIiRpbnRlcnZhbFwiLCAnJHRpbWVvdXQnXTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSHViU2VydmljZTogSW50ZXJmYWNlcy5JQ29ubmVjdFRvR2FtZSwgJHNjb3BlOiBJbnRlcmZhY2VzLklHYW1lU2NvcGUsIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlSGFuZGxlcjogSW50ZXJmYWNlcy5JU3RhdGVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbDogbmcuSUludGVydmFsU2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UgPSBjb25uZWN0aW9uSHViU2VydmljZTtcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyID0gc3RhdGVIYW5kbGVyO1xyXG4gICAgICAgICAgICB0aGlzLiRpbnRlcnZhbCA9ICRpbnRlcnZhbDtcclxuICAgICAgICAgICAgdGhpcy5zZWNvbmRzRm9yTW92ZSA9IDEwO1xyXG4gICAgICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXdNb2RlbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplVmlld01vZGVsKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UuZ2FtZVN0YXJ0ZWQoZGF0YSA9PiB0aGlzLnN0YXJ0R2FtZS5jYWxsKHRoaXMsIGRhdGEpKTtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5kaWRNb3ZlKGRhdGEgPT4gdGhpcy51c2VyMmRpZE1vdmUuY2FsbCh0aGlzLCBkYXRhKSk7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmRvTW92ZSA9ICh2YXJpYW50OiBzdHJpbmcpID0+IHRoaXMuZG9Nb3ZlLmNhbGwodGhpcywgdmFyaWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2Uub25Vc2VyTGVmdCgoKSA9PiB0aGlzLm9uVXNlckxlZnQuY2FsbCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMudW5zZXRHYW1lSW5mbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblVzZXJMZWZ0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnVuc2V0R2FtZUluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdW5zZXRHYW1lSW5mbygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lSW5mbyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGxJbkRpZ2VzdExvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFdvcmQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBlcmNlbnRhZ2VzTGVmdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5pc0N1cnJlbnRVc2VyTW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUucGFzc2VkV29yZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmxlZnRXb3JkcyA9IFtdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhcnRHYW1lKGdhbWU6IE1vZGVscy5HYW1lKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZUluZm8gPSBnYW1lO1xyXG4gICAgICAgICAgICB0aGlzLndvcmRzID0gZ2FtZS53b3JkcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlzVXNlcjEgPSBnYW1lLnVzZXIxLnVzZXJJZCA9PT0gdGhpcy5zdGF0ZUhhbmRsZXIuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXNlck51bSA9IGlzVXNlcjEgPyAxIDogMjtcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUuJGFwcGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRVc2VyU2NvcmUgPSBpc1VzZXIxID8gZ2FtZS51c2VyMVNjb3JlIDogZ2FtZS51c2VyMlNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUudXNlcjJTY29yZSA9ICFpc1VzZXIxID8gZ2FtZS51c2VyMVNjb3JlIDogZ2FtZS51c2VyMlNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUudXNlcjJEaXNwbGF5TmFtZSA9ICFpc1VzZXIxID8gZ2FtZS51c2VyMS5kaXNwbGF5TmFtZSA6IGdhbWUudXNlcjIuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50V29yZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFyaW5hdHNPcmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuaXNDdXJyZW50VXNlck1vdmUgPSAoaXNVc2VyMSAmJiB0aGlzLmdhbWVJbmZvLmN1cnJlbnRNb3ZlID09PSAxKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCFpc1VzZXIxICYmIHRoaXMuZ2FtZUluZm8uY3VycmVudE1vdmUgPT09IDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGFycjogQXJyYXk8TW9kZWxzLldvcmQ+KTogQXJyYXk8TW9kZWxzLldvcmQ+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcnJheSA9IGFyci5zbGljZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtID0gYXJyYXkubGVuZ3RoLCB0LCBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudOKAplxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGFycmF5W21dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W21dID0gYXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbaV0gPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmxlZnRXb3JkcyA9IHNodWZmbGUodGhpcy53b3Jkcy5zbGljZSgxKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUhhbmRsZXIuaGFuZGxlR2FtZVN0YXJ0ZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbGxJbkRpZ2VzdExvb3AoYWN0aW9uOigpID0+IHZvaWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlLiQkcGhhc2UpIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuJGFwcGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhcnRUaW1lcigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlByZXZpb3VzIHRpbWVyIHNob3VsZCBiZSBzdG9wcGVkXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FsbEluRGlnZXN0TG9vcCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5zZWNvbmRzRm9yTW92ZUxlZnQgPSB0aGlzLnNlY29uZHNGb3JNb3ZlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUucGVyY2VudGFnZXNMZWZ0ID0gMTAwO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gdGhpcy4kaW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0LS07XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5wZXJjZW50YWdlc0xlZnQgPSB0aGlzLiRzY29wZS5zZWNvbmRzRm9yTW92ZUxlZnQgLyAxMCAqIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0ID09PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy4kc2NvcGUuaXNDdXJyZW50VXNlck1vdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3NNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDAsIDEwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RvcFRpbWVyKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudGltZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGludGVydmFsLmNhbmNlbCh0aGlzLnRpbWVyUHJvbWlzZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXNlcjJkaWRNb3ZlKG1vdmVSZXM6IE1vZGVscy5Nb3ZlUmVzdWx0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdmUobW92ZVJlcywgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFzc01vdmUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkh1YlNlcnZpY2UucGFzc01vdmUodGhpcy51c2VyTnVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUoKG1vdmVSZXN1bHQ6TW9kZWxzLk1vdmVSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdmUobW92ZVJlc3VsdCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZG9Nb3ZlKHZhcmlhbnQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBhIHdheSB0byBoYW5kbGUgbXVsdGlwbGUgY2xpY2tcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLnRyYW5zbGF0ZVZhcmlhbnRzLmZpbHRlcih2ID0+IHYuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlLnNlY29uZHNGb3JNb3ZlTGVmdCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGltZXIgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkVmFyID0gdGhpcy4kc2NvcGUuY3VycmVudFdvcmQudHJhbnNsYXRlVmFyaWFudHMuZmlsdGVyKHYgPT4gdi52YXJpYW50ID09PSB2YXJpYW50KVswXTtcclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFZhcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luY29ycmVjdCB2YXIgc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25IdWJTZXJ2aWNlLmRvTW92ZSh0aGlzLnVzZXJOdW0sIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLndvcmQsIHZhcmlhbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZSgobW92ZVJlc3VsdDpNb2RlbHMuTW92ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZShtb3ZlUmVzdWx0LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVNb3ZlKG1vdmVSZXM6IE1vZGVscy5Nb3ZlUmVzdWx0LCBpc0N1cnJlbnRVc2VyTW92ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgaXQgaXMgc2tpcHBlZCwgdGhlbiBzZXQgdGltZXIgbWFudWFsbHkgdG8gMFxyXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRpbWVyIG9uIGJvdGggc2lkZSBtYXkgc2hvdyBkaWZmZXJlbnQgdGltZSBieSB0aGF0IHRpbWVcclxuICAgICAgICAgICAgLy8gZS5nLiBvbmUgY291bGQgaGF2ZSAwIGFuZCBvdGhlciBwbGF5ZXIgY291bGQgaGF2ZSAxXHJcbiAgICAgICAgICAgIGlmIChtb3ZlUmVzLmlzU2tpcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuc2Vjb25kc0Zvck1vdmVMZWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBlcmNlbnRhZ2VzTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50VXNlclNjb3JlID0gdGhpcy51c2VyTnVtID09PSAxID8gdGhpcy5nYW1lSW5mby51c2VyMVNjb3JlIDogdGhpcy5nYW1lSW5mby51c2VyMlNjb3JlO1xyXG4gICAgICAgICAgICB2YXIgdXNlcjJTY29yZSA9IHRoaXMudXNlck51bSA9PT0gMSA/IHRoaXMuZ2FtZUluZm8udXNlcjJTY29yZSA6IHRoaXMuZ2FtZUluZm8udXNlcjFTY29yZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzY29yZSA9IGlzQ3VycmVudFVzZXJNb3ZlID8gY3VycmVudFVzZXJTY29yZSA6IHVzZXIyU2NvcmU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW1vdmVSZXMuaXNDb3JyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKG1vdmVSZXMuZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtb3ZlUmVzLmlzU3VjY2Vzc2Z1bCkge1xyXG4gICAgICAgICAgICAgICAgc2NvcmUuc3VjY2Vzc2Z1bE1vdmVzKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzY29yZS53cm9uZ01vdmVzKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlUmVzLnNlbGVjdGVkVmFyaWFudEluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFdvcmQudHJhbnNsYXRlVmFyaWFudHNbbW92ZVJlcy5zZWxlY3RlZFZhcmlhbnRJbmRleF0uaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJOdW0gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRVc2VyU2NvcmUgPSB0aGlzLmdhbWVJbmZvLnVzZXIxU2NvcmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS51c2VyMlNjb3JlID0gdGhpcy5nYW1lSW5mby51c2VyMlNjb3JlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXJTY29yZSA9IHRoaXMuZ2FtZUluZm8udXNlcjJTY29yZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUgPSB0aGlzLmdhbWVJbmZvLnVzZXIxU2NvcmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuaXNDdXJyZW50VXNlck1vdmUgPSAhaXNDdXJyZW50VXNlck1vdmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50V29yZEluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50VXNlck1vdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFzc2VkV29yZCA9IG5ldyBNb2RlbHMuUGFzc2VkV29yZEluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXNzZWRXb3JkLndvcmQgPSB0aGlzLiRzY29wZS5jdXJyZW50V29yZC53b3JkO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZFdvcmQuYW5zd2VyID0gdGhpcy4kc2NvcGUuY3VycmVudFdvcmQudHJhbnNsYXRlVmFyaWFudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpID0+IGkuaXNUcnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudmFyaWFudDtcclxuICAgICAgICAgICAgICAgICAgICBwYXNzZWRXb3JkLndhc1Bhc3NlZCA9IG1vdmVSZXMuaXNTdWNjZXNzZnVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLnBhc3NlZFdvcmRzLnB1c2gocGFzc2VkV29yZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21BcnJheUlmKGFycjogQXJyYXk8TW9kZWxzLldvcmQ+LCBjYWxsYmFjazogKGFyZzogTW9kZWxzLldvcmQsIGluZGV4OiBudW1iZXIpID0+IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhhcnJbaV0sIGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkID0gdGhpcy5nYW1lSW5mby53b3Jkc1t0aGlzLiRzY29wZS5jdXJyZW50V29yZEluZGV4XTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFyaW5hdHNPcmRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUFycmF5SWYodGhpcy4kc2NvcGUubGVmdFdvcmRzLCB3ID0+IHcud29yZCA9PT0gdGhpcy4kc2NvcGUuY3VycmVudFdvcmQud29yZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1vdmVSZXMuaXNMYXN0TW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIYW5kbGVyLmhhbmRsZUdhbWVGaW5pc2hlZCh0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlLnN1Y2Nlc3NmdWxNb3ZlcyA+IHRoaXMuJHNjb3BlLnVzZXIyU2NvcmUuc3VjY2Vzc2Z1bE1vdmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlclNjb3JlLnN1Y2Nlc3NmdWxNb3ZlcyA9PSB0aGlzLiRzY29wZS51c2VyMlNjb3JlLnN1Y2Nlc3NmdWxNb3Zlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldEdhbWVJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uSHViU2VydmljZS5zdG9wSHViQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAwMCwgdHJ1ZSk7IC8vIGRlbGF5IHRvIGxldCB1c2VyIHNlZSB0aGUgcmVzdWx0IG9mIG1vdmVcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRWYXJpbmF0c09yZGVyKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmN1cnJlbnRXb3JkLnRyYW5zbGF0ZVZhcmlhbnRzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUub3JkZXIgPSBpbmRleCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShDb21tb24uR2V0Q29uc3RhbnRzKCkuYXBwTmFtZSkuY29udHJvbGxlcihcImNvbnRyb2xsZXJzLkdhbWVDb250cm9sbGVyXCIsIEdhbWVDb250cm9sbGVyKTtcclxufSAiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuJCgoKSA9PiB7XHJcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3MDAwMDAvaG93LXRvLWRpc2FibGUtdGV4dC1zZWxlY3Rpb24tdXNpbmctanF1ZXJ5XHJcbiAgICAkKCcjd29yZCwgLndvcmQtbGVmdC1pdGVtLWNhcHRpb24nKS5hdHRyKCd1bnNlbGVjdGFibGUnLCdvbicpXHJcbiAgICAgLmNzcyh7Jy1tb3otdXNlci1zZWxlY3QnOictbW96LW5vbmUnLFxyXG4gICAgICAgICAgICctby11c2VyLXNlbGVjdCc6J25vbmUnLFxyXG4gICAgICAgICAgICcta2h0bWwtdXNlci1zZWxlY3QnOidub25lJywgLyogeW91IGNvdWxkIGFsc28gcHV0IHRoaXMgaW4gYSBjbGFzcyAqL1xyXG4gICAgICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0Jzonbm9uZScsLyogYW5kIGFkZCB0aGUgQ1NTIGNsYXNzIGhlcmUgaW5zdGVhZCAqL1xyXG4gICAgICAgICAgICctbXMtdXNlci1zZWxlY3QnOidub25lJyxcclxuICAgICAgICAgICAndXNlci1zZWxlY3QnOidub25lJ1xyXG4gICAgIH0pLmJpbmQoJ3NlbGVjdHN0YXJ0JywgZnVuY3Rpb24oKXsgcmV0dXJuIGZhbHNlOyB9KTtcclxufSkiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuJCgoKSA9PiB7XHJcbiAgICAkKGRvY3VtZW50KS5rZXlwcmVzcyhlID0+IHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpIHtcclxuICAgICAgICAgICAgJChcIi5idG4tc3VibWl0OnZpc2libGVcIikuZmlyc3QoKS5jbGljaygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA+PSA0OCAmJiBlLndoaWNoIDw9IDU3KSB7XHJcbiAgICAgICAgICAgIGxldCBudW1QcmVzc2VkID0gZS53aGljaCAtIDQ4O1xyXG4gICAgICAgICAgICAkKCcudHJhbnNsYXRlVmFyaWFudDp2aXNpYmxlJykuZmlsdGVyKChpbmRleCwgZWxlbSkgPT4gJChlbGVtKS5kYXRhKCdvcmRlcicpID09PSBudW1QcmVzc2VkKVxyXG4gICAgICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgICAgIC5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTsiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29tbW9uLnRzXCIgLz5cclxuJCgoKSA9PiB7XHJcbiAgICAkKCcjdXNlcjJ2YXJpYW50cycpLmJpbmQoJ0RPTU5vZGVJbnNlcnRlZCcsICgpID0+ICgkKCcudHJhbnNsYXRlVmFyaWFudC5ub2hvdmVyJykgYXMgYW55KS50b29sdGlwKCkpO1xyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
